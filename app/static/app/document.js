var ke=Object.defineProperty;var we=(t,e,n)=>e in t?ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var S=(t,e,n)=>(we(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function N(){}function _e(t){return t()}function ie(){return Object.create(null)}function z(t){t.forEach(_e)}function pe(t){return typeof t=="function"}function x(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ee(t){return Object.keys(t).length===0}function g(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function W(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function Ne(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function T(){return B(" ")}function O(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Y(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Te(t){return Array.from(t.childNodes)}function ne(t,e){e=""+e,t.data!==e&&(t.data=e)}function L(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function oe(t,e,n){t.classList.toggle(e,!!n)}function Se(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}class Le{constructor(e=!1){S(this,"is_svg",!1);S(this,"e");S(this,"n");S(this,"t");S(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,s=null){this.e||(this.is_svg?this.e=Ne(n.nodeName):this.e=y(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)E(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(w)}}let q;function H(t){q=t}function se(){if(!q)throw new Error("Function called outside component initialization");return q}function Oe(t){se().$$.on_mount.push(t)}function xe(t){se().$$.on_destroy.push(t)}function ge(){const t=se();return(e,n,{cancelable:s=!1}={})=>{const l=t.$$.callbacks[e];if(l){const i=Se(e,n,{cancelable:s});return l.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}function Me(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const P=[],U=[];let C=[];const Z=[],Ae=Promise.resolve();let ee=!1;function Pe(){ee||(ee=!0,Ae.then(ve))}function te(t){C.push(t)}function be(t){Z.push(t)}const Q=new Set;let M=0;function ve(){if(M!==0)return;const t=q;do{try{for(;M<P.length;){const e=P[M];M++,H(e),je(e.$$)}}catch(e){throw P.length=0,M=0,e}for(H(null),P.length=0,M=0;U.length;)U.pop()();for(let e=0;e<C.length;e+=1){const n=C[e];Q.has(n)||(Q.add(n),n())}C.length=0}while(P.length);for(;Z.length;)Z.pop()();ee=!1,Q.clear(),H(t)}function je(t){if(t.fragment!==null){t.update(),z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(te)}}function Ce(t){const e=[],n=[];C.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),C=e}const K=new Set;let De;function F(t,e){t&&t.i&&(K.delete(t),t.i(e))}function X(t,e,n,s){if(t&&t.o){if(K.has(t))return;K.add(t),De.c.push(()=>{K.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function j(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ye(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function G(t){t&&t.c()}function R(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),te(()=>{const i=t.$$.on_mount.map(_e).filter(pe);t.$$.on_destroy?t.$$.on_destroy.push(...i):z(i),t.$$.on_mount=[]}),l.forEach(te)}function J(t,e){const n=t.$$;n.fragment!==null&&(Ce(n.after_update),z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ie(t,e){t.$$.dirty[0]===-1&&(P.push(t),Pe(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(t,e,n,s,l,i,r,u=[-1]){const h=q;H(t);const c=t.$$={fragment:null,ctx:[],props:i,update:N,not_equal:l,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:ie(),dirty:u,skip_bound:!1,root:e.target||h.$$.root};r&&r(c.root);let m=!1;if(c.ctx=n?n(t,e.props||{},(o,a,..._)=>{const p=_.length?_[0]:a;return c.ctx&&l(c.ctx[o],c.ctx[o]=p)&&(!c.skip_bound&&c.bound[o]&&c.bound[o](p),m&&Ie(t,o)),a}):[],c.update(),m=!0,z(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const o=Te(e.target);c.fragment&&c.fragment.l(o),o.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&F(t.$$.fragment),R(t,e.target,e.anchor),ve()}H(h)}class I{constructor(){S(this,"$$");S(this,"$$set")}$destroy(){J(this,1),this.$destroy=N}$on(e,n){if(!pe(n))return N;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!Ee(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const He="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(He);const A=[];function qe(t,e=N){let n;const s=new Set;function l(u){if(x(t,u)&&(t=u,n)){const h=!A.length;for(const c of s)c[1](),A.push(c,t);if(h){for(let c=0;c<A.length;c+=2)A[c][0](A[c+1]);A.length=0}}}function i(u){l(u(t))}function r(u,h=N){const c=[u,h];return s.add(c),s.size===1&&(n=e(l,i)||N),u(t),()=>{s.delete(c),s.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:r}}const V=qe(!1);function ze(t){let e,n,s,l,i,r,u,h,c,m,o;return{c(){e=y("div"),n=y("div"),s=T(),l=y("div"),i=y("form"),r=y("div"),u=y("div"),h=T(),c=y("div"),c.innerHTML='<p class="control"><button type="submit" class="button is-success svelte-1vm7l7d" title="Подтвердить"><span class="icon is-small"><i class="fa-light fa-check"></i></span><span>Да</span></button></p> <p class="control"><button type="reset" class="button is-danger is-outlined svelte-1vm7l7d" title="Отменить"><span class="icon is-small"><i class="fa-light fa-xmark"></i></span><span>Нет</span></button></p>',$(n,"class","modal-background"),$(u,"class","container content"),$(c,"class","field is-grouped is-grouped-centered"),$(r,"class","message-body"),$(i,"class","message is-warning"),$(l,"class","modal-content"),$(e,"class","modal"),oe(e,"is-active",t[0])},m(a,_){E(a,e,_),g(e,n),g(e,s),g(e,l),g(l,i),g(i,r),g(r,u),u.innerHTML=t[1],g(r,h),g(r,c),m||(o=[O(n,"click",t[3]),O(i,"submit",Y(t[2])),O(i,"reset",Y(t[3]))],m=!0)},p(a,[_]){_&2&&(u.innerHTML=a[1]),_&1&&oe(e,"is-active",a[0])},i:N,o:N,d(a){a&&w(e),m=!1,z(o)}}}let re="modalevent";function Be(t,e,n){const s=ge();let{htmldata:l="Sample modal data"}=e,{active:i=!1}=e,r=!1;const u=()=>{r=!0,n(0,i=!1),s(re,r)},h=()=>{r=!1,n(0,i=!1),s(re,r)};return t.$$set=c=>{"htmldata"in c&&n(1,l=c.htmldata),"active"in c&&n(0,i=c.active)},[i,l,u,h]}class Fe extends I{constructor(e){super(),D(this,e,Be,ze,x,{htmldata:1,active:0})}}function Re(t){let e,n,s,l,i,r,u,h,c;function m(a){t[4](a)}let o={htmldata:Ke};return t[1]!==void 0&&(o.active=t[1]),i=new Fe({props:o}),U.push(()=>ye(i,"active",m)),i.$on("modalevent",t[3]),{c(){e=y("button"),n=y("i"),l=T(),G(i.$$.fragment),$(n,"class","fa-light fa-trash-xmark"),$(e,"type","submit"),$(e,"class","button is-link is-outlined mt-1 ml-2"),e.disabled=s=!t[0],$(e,"title","Удалить отмеченные")},m(a,_){E(a,e,_),g(e,n),E(a,l,_),R(i,a,_),u=!0,h||(c=O(e,"click",Y(t[2])),h=!0)},p(a,[_]){(!u||_&1&&s!==(s=!a[0]))&&(e.disabled=s);const p={};!r&&_&2&&(r=!0,p.active=a[1],be(()=>r=!1)),i.$set(p)},i(a){u||(F(i.$$.fragment,a),u=!0)},o(a){X(i.$$.fragment,a),u=!1},d(a){a&&(w(e),w(l)),J(i,a),h=!1,c()}}}const Je="http://127.0.0.1:8000/api/v1/documents/";let Ke="<p>Удаление <span class='has-text-danger-dark'>необратимо</span>! Удалить?</p>";const Ue="notification";function Ve(t,e,n){const s=document.querySelector("[name=csrfmiddlewaretoken]").value;let l=!1;const i=ge();let{disabled:r=!0}=e,u=V.subscribe(p=>n(0,r=p));xe(u);const h={add_class:"is-danger",text:"Не удалось удалить:"};let c=null;const m=p=>{c=p.currentTarget,n(1,l=!0)};async function o(p){if(!p.detail)return;const b=c.parentElement;let d="";const v=new FormData(b);for(let f of v.values())d+=await a(f);if(i("deleteitem"),V.update(f=>!1),d){let f={...h};f.text+=d,i(Ue,f)}}const a=async p=>{try{const b=await fetch(`${Je}${p}/`,{method:"delete",headers:{"X-CSRFToken":s}});return b.ok?"":`<br> id: ${p}, ${b.status} - ${b.statusText}`}catch(b){return`<br> id: ${p}, ${b.message}`}};function _(p){l=p,n(1,l)}return t.$$set=p=>{"disabled"in p&&n(0,r=p.disabled)},[r,l,m,o,_]}class Xe extends I{constructor(e){super(),D(this,e,Ve,Re,x,{disabled:0})}}function ce(t,e,n){const s=t.slice();s[8]=e[n];const l=Object.values(s[8]);return s[9]=l,s}function ae(t,e,n){const s=t.slice();return s[12]=e[n],s}function ue(t,e,n){const s=t.slice();return s[15]=e[n],s}function fe(t){let e,n=t[5](t[15])+"",s;return{c(){e=y("th"),s=B(n),$(e,"class","has-text-grey svelte-5f7ih4")},m(l,i){E(l,e,i),g(e,s)},p(l,i){i&1&&n!==(n=l[5](l[15])+"")&&ne(s,n)},d(l){l&&w(e)}}}function de(t){let e,n=t[12]+"",s;return{c(){e=y("td"),s=B(n)},m(l,i){E(l,e,i),g(e,s)},p(l,i){i&1&&n!==(n=l[12]+"")&&ne(s,n)},d(l){l&&w(e)}}}function he(t){let e,n,s,l,i,r,u,h=t[9][1]+"",c,m,o,a,_,p,b=j(t[9].slice(2)),d=[];for(let v=0;v<b.length;v+=1)d[v]=de(ae(t,b,v));return{c(){e=y("tr"),n=y("td"),s=y("input"),i=T(),r=y("td"),u=y("a"),c=B(h),o=T();for(let v=0;v<d.length;v+=1)d[v].c();a=T(),$(s,"type","checkbox"),$(s,"name",t[2]),s.value=l=t[9][0],$(u,"href",m=""+(t[1]+t[9][0])),$(u,"class","svelte-5f7ih4")},m(v,f){E(v,e,f),g(e,n),g(n,s),g(e,i),g(e,r),g(r,u),g(u,c),g(e,o);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(e,null);g(e,a),_||(p=O(s,"change",t[3]),_=!0)},p(v,f){if(f&4&&$(s,"name",v[2]),f&1&&l!==(l=v[9][0])&&(s.value=l),f&1&&h!==(h=v[9][1]+"")&&ne(c,h),f&3&&m!==(m=""+(v[1]+v[9][0]))&&$(u,"href",m),f&1){b=j(v[9].slice(2));let k;for(k=0;k<b.length;k+=1){const le=ae(v,b,k);d[k]?d[k].p(le,f):(d[k]=de(le),d[k].c(),d[k].m(e,a))}for(;k<d.length;k+=1)d[k].d(1);d.length=b.length}},d(v){v&&w(e),W(d,v),_=!1,p()}}}function Ge(t){let e,n,s,l,i,r,u,h,c,m,o,a=j(Object.keys(t[0][0]).slice(1)),_=[];for(let d=0;d<a.length;d+=1)_[d]=fe(ue(t,a,d));let p=j(t[0]),b=[];for(let d=0;d<p.length;d+=1)b[d]=he(ce(t,p,d));return{c(){e=y("div"),n=y("table"),s=y("thead"),l=y("tr"),i=y("th"),r=y("input"),u=T();for(let d=0;d<_.length;d+=1)_[d].c();h=T(),c=y("tbody");for(let d=0;d<b.length;d+=1)b[d].c();$(r,"type","checkbox"),$(r,"id",$e),$(i,"class","svelte-5f7ih4"),$(n,"class","table is-hoverable is-striped has-background-white-ter"),$(e,"class","svelte-5f7ih4")},m(d,v){E(d,e,v),g(e,n),g(n,s),g(s,l),g(l,i),g(i,r),g(l,u);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(l,null);g(n,h),g(n,c);for(let f=0;f<b.length;f+=1)b[f]&&b[f].m(c,null);m||(o=O(r,"change",t[4]),m=!0)},p(d,[v]){if(v&33){a=j(Object.keys(d[0][0]).slice(1));let f;for(f=0;f<a.length;f+=1){const k=ue(d,a,f);_[f]?_[f].p(k,v):(_[f]=fe(k),_[f].c(),_[f].m(l,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=a.length}if(v&15){p=j(d[0]);let f;for(f=0;f<p.length;f+=1){const k=ce(d,p,f);b[f]?b[f].p(k,v):(b[f]=he(k),b[f].c(),b[f].m(c,null))}for(;f<b.length;f+=1)b[f].d(1);b.length=p.length}},i:N,o:N,d(d){d&&w(e),W(_,d),W(b,d),m=!1,o()}}}const Qe="has-background-warning-light",$e="tablegen-all";function We(t,e,n){let{table_content:s=[]}=e,{href:l="/item/"}=e,{checkbox_name:i="id"}=e,r=new Set;function u(o){let a=o.currentTarget;h(a)}const h=o=>{o.checked?(r.add(o.value),V.update(a=>!0),o.parentNode.parentNode.className=Qe):(document.querySelector(`#${$e}`).checked=!1,r.delete(o.value),r.size==0&&V.update(a=>!1),o.parentNode.parentNode.className="")},c=o=>{let a=o.currentTarget,_=document.getElementsByName(i);if(a.checked)for(let p of _)p.checked=!0,h(p);else for(let p of _)p.checked=!1,h(p)},m=o=>{const a={name:"Наименование",address:"Адрес",inn:"ИНН",kpp:"КПП",ogrn:"ОГРН",bank:"Банк",bik:"БИК",pay_acount:"Номер счёта",kor_acount:"Корр. счёт",phone:"Телефон",number:"Номер",data:"Дата",city:"Город",truck:"Номер машины",spec_notes:"Особые отметки",destination_address:"Адрес назначения",text:"Условия договора",sender:"Отправитель",receiver:"Получатель",payer:"Плательщик"};return o=a[o]?a[o]:o,o};return t.$$set=o=>{"table_content"in o&&n(0,s=o.table_content),"href"in o&&n(1,l=o.href),"checkbox_name"in o&&n(2,i=o.checkbox_name)},[s,l,i,u,c,m]}class Ye extends I{constructor(e){super(),D(this,e,We,Ge,x,{table_content:0,href:1,checkbox_name:2})}}function Ze(t){let e,n,s,l,i,r,u,h;function c(o){t[3](o)}let m={};return t[0]!==void 0&&(m.disabled=t[0]),r=new Xe({props:m}),U.push(()=>ye(r,"disabled",c)),r.$on("notification",t[4]),r.$on("deleteitem",t[2]),{c(){e=y("h4"),e.textContent="Список документов.",n=T(),s=y("form"),l=y("div"),i=T(),G(r.$$.fragment),$(e,"class","title is-4 pl-4 pt-5"),$(l,"id",t[1])},m(o,a){E(o,e,a),E(o,n,a),E(o,s,a),g(s,l),g(s,i),R(r,s,null),h=!0},p(o,[a]){const _={};!u&&a&1&&(u=!0,_.disabled=o[0],be(()=>u=!1)),r.$set(_)},i(o){h||(F(r.$$.fragment,o),h=!0)},o(o){X(r.$$.fragment,o),h=!1},d(o){o&&(w(e),w(n),w(s)),J(r)}}}const et="http://127.0.0.1:8000/api/v1/documents/",tt="/document/";function me(t){let e=JSON.parse(JSON.stringify(t,["id","number","data","city","truck","destination_address"]));for(let n=0;n<e.length;n++)e[n].sender=t[n].sender.name,e[n].receiver=t[n].receiver.name,e[n].payer=t[n].payer.name;return e}function nt(t,e){return t.id<e.id?1:t.id>e.id?-1:0}function st(t,e,n){let s=!0,l,i=[];const r="tablegen_"+Math.round(Math.random()*1e4),u=async()=>{i=await fetch(et).then(m=>m.json()),l==null||l.$destroy(),l=new Ye({target:document.getElementById(r),props:{table_content:me(i).sort(nt),href:tt,checkbox_name:"id"}}),me(i)};Oe(u);function h(m){s=m,n(0,s)}function c(m){Me.call(this,t,m)}return[s,r,u,h,c]}class lt extends I{constructor(e){super(),D(this,e,st,Ze,x,{})}}function it(t){let e,n,s,l,i,r,u,h,c,m;return u=new lt({}),u.$on("notification",t[4]),{c(){e=y("div"),n=new Le(!1),s=B("  "),l=y("button"),r=T(),G(u.$$.fragment),n.a=s,$(l,"class","delete"),$(e,"id",ot),$(e,"class",i="notification "+t[1]),L(e,"opacity",t[3]()),L(e,"position","fixed"),L(e,"bottom","3rem"),L(e,"right","3rem"),L(e,"font-size","1rem"),L(e,"display",t[2])},m(o,a){E(o,e,a),n.m(t[0],e),g(e,s),g(e,l),E(o,r,a),R(u,o,a),h=!0,c||(m=O(l,"click",t[5]),c=!0)},p(o,[a]){(!h||a&1)&&n.p(o[0]),(!h||a&2&&i!==(i="notification "+o[1]))&&$(e,"class",i),a&4&&L(e,"display",o[2])},i(o){h||(F(u.$$.fragment,o),h=!0)},o(o){X(u.$$.fragment,o),h=!1},d(o){o&&(w(e),w(r)),J(u,o),c=!1,m()}}}const ot="svelt-notyfycation";function rt(t,e,n){let s="Test text",l="is-warning",i="none";const r=()=>{let m;return l.includes("is-danger")||l.includes("is-warning")?m=.5:m=.4,m},u=()=>{let m;return l.includes("is-danger")||l.includes("is-warning")?m=1e4:m=2e3,m};function h(m){n(0,s=m.detail.text),n(1,l=m.detail.add_class),n(2,i="block"),setTimeout(()=>{n(2,i="none")},u())}return[s,l,i,r,h,()=>n(2,i="none")]}class ct extends I{constructor(e){super(),D(this,e,rt,it,x,{})}}function at(t){let e,n;return e=new ct({}),{c(){G(e.$$.fragment)},m(s,l){R(e,s,l),n=!0},p:N,i(s){n||(F(e.$$.fragment,s),n=!0)},o(s){X(e.$$.fragment,s),n=!1},d(s){J(e,s)}}}class ut extends I{constructor(e){super(),D(this,e,null,at,x,{})}}new ut({target:document.getElementById("app")});
