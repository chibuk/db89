var $e=Object.defineProperty;var ke=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(ke(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function w(){}function me(e){return e()}function le(){return Object.create(null)}function I(e){e.forEach(me)}function _e(e){return typeof e=="function"}function A(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function we(e){return Object.keys(e).length===0}function b(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function X(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function S(){return H(" ")}function M(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function G(e){return function(t){return t.preventDefault(),e.call(this,t)}}function $(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ee(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t,n){e.classList.toggle(t,!!n)}function Ne(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}let D;function C(e){D=e}function ee(){if(!D)throw new Error("Function called outside component initialization");return D}function Se(e){ee().$$.on_mount.push(e)}function xe(e){ee().$$.on_destroy.push(e)}function pe(){const e=ee();return(t,n,{cancelable:s=!1}={})=>{const l=e.$$.callbacks[t];if(l){const i=Ne(t,n,{cancelable:s});return l.slice().forEach(c=>{c.call(e,i)}),!i.defaultPrevented}return!0}}function Oe(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(s=>s.call(this,t))}const L=[],z=[];let j=[];const Q=[],Le=Promise.resolve();let W=!1;function Te(){W||(W=!0,Le.then(be))}function Y(e){j.push(e)}function ge(e){Q.push(e)}const V=new Set;let x=0;function be(){if(x!==0)return;const e=D;do{try{for(;x<L.length;){const t=L[x];x++,C(t),Me(t.$$)}}catch(t){throw L.length=0,x=0,t}for(C(null),L.length=0,x=0;z.length;)z.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];V.has(n)||(V.add(n),n())}j.length=0}while(L.length);for(;Q.length;)Q.pop()();W=!1,V.clear(),C(e)}function Me(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}function je(e){const t=[],n=[];j.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),j=t}const B=new Set;let Ae;function R(e,t){e&&e.i&&(B.delete(e),e.i(t))}function te(e,t,n,s){if(e&&e.o){if(B.has(e))return;B.add(e),Ae.c.push(()=>{B.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function T(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ve(e,t,n){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function ne(e){e&&e.c()}function J(e,t,n){const{fragment:s,after_update:l}=e.$$;s&&s.m(t,n),Y(()=>{const i=e.$$.on_mount.map(me).filter(_e);e.$$.on_destroy?e.$$.on_destroy.push(...i):I(i),e.$$.on_mount=[]}),l.forEach(Y)}function K(e,t){const n=e.$$;n.fragment!==null&&(je(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ce(e,t){e.$$.dirty[0]===-1&&(L.push(e),Te(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(e,t,n,s,l,i,c,d=[-1]){const m=D;C(e);const o=e.$$={fragment:null,ctx:[],props:i,update:w,not_equal:l,bound:le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:le(),dirty:d,skip_bound:!1,root:t.target||m.$$.root};c&&c(o.root);let v=!1;if(o.ctx=n?n(e,t.props||{},(r,a,...h)=>{const _=h.length?h[0]:a;return o.ctx&&l(o.ctx[r],o.ctx[r]=_)&&(!o.skip_bound&&o.bound[r]&&o.bound[r](_),v&&Ce(e,r)),a}):[],o.update(),v=!0,I(o.before_update),o.fragment=s?s(o.ctx):!1,t.target){if(t.hydrate){const r=Ee(t.target);o.fragment&&o.fragment.l(r),r.forEach(E)}else o.fragment&&o.fragment.c();t.intro&&R(e.$$.fragment),J(e,t.target,t.anchor),be()}C(m)}class q{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){K(this,1),this.$destroy=w}$on(t,n){if(!_e(n))return w;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(t){this.$$set&&!we(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const De="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(De);const O=[];function Ie(e,t=w){let n;const s=new Set;function l(d){if(A(e,d)&&(e=d,n)){const m=!O.length;for(const o of s)o[1](),O.push(o,e);if(m){for(let o=0;o<O.length;o+=2)O[o][0](O[o+1]);O.length=0}}}function i(d){l(d(e))}function c(d,m=w){const o=[d,m];return s.add(o),s.size===1&&(n=t(l,i)||w),d(e),()=>{s.delete(o),s.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:c}}const F=Ie(!1);function Pe(e){let t,n,s,l,i,c,d,m,o,v,r;return{c(){t=y("div"),n=y("div"),s=S(),l=y("div"),i=y("form"),c=y("div"),d=y("div"),m=S(),o=y("div"),o.innerHTML='<p class="control"><button type="submit" class="button is-success svelte-1vm7l7d" title="Подтвердить"><span class="icon is-small"><i class="fa-light fa-check"></i></span><span>Да</span></button></p> <p class="control"><button type="reset" class="button is-danger is-outlined svelte-1vm7l7d" title="Отменить"><span class="icon is-small"><i class="fa-light fa-xmark"></i></span><span>Нет</span></button></p>',$(n,"class","modal-background"),$(d,"class","container content"),$(o,"class","field is-grouped is-grouped-centered"),$(c,"class","message-body"),$(i,"class","message is-warning"),$(l,"class","modal-content"),$(t,"class","modal"),ie(t,"is-active",e[0])},m(a,h){N(a,t,h),b(t,n),b(t,s),b(t,l),b(l,i),b(i,c),b(c,d),d.innerHTML=e[1],b(c,m),b(c,o),v||(r=[M(n,"click",e[3]),M(i,"submit",G(e[2])),M(i,"reset",G(e[3]))],v=!0)},p(a,[h]){h&2&&(d.innerHTML=a[1]),h&1&&ie(t,"is-active",a[0])},i:w,o:w,d(a){a&&E(t),v=!1,I(r)}}}let re="modalevent";function qe(e,t,n){const s=pe();let{htmldata:l="Sample modal data"}=t,{active:i=!1}=t,c=!1;const d=()=>{c=!0,n(0,i=!1),s(re,c)},m=()=>{c=!1,n(0,i=!1),s(re,c)};return e.$$set=o=>{"htmldata"in o&&n(1,l=o.htmldata),"active"in o&&n(0,i=o.active)},[i,l,d,m]}class Be extends q{constructor(t){super(),P(this,t,qe,Pe,A,{htmldata:1,active:0})}}function ze(e){let t,n,s,l,i,c,d,m,o;function v(a){e[4](a)}let r={htmldata:He};return e[1]!==void 0&&(r.active=e[1]),i=new Be({props:r}),z.push(()=>ve(i,"active",v)),i.$on("modalevent",e[3]),{c(){t=y("button"),n=y("i"),l=S(),ne(i.$$.fragment),$(n,"class","fa-light fa-trash-xmark"),$(t,"type","submit"),$(t,"class","button is-link is-outlined mt-1 ml-2"),t.disabled=s=!e[0],$(t,"title","Удалить отмеченные")},m(a,h){N(a,t,h),b(t,n),N(a,l,h),J(i,a,h),d=!0,m||(o=M(t,"click",G(e[2])),m=!0)},p(a,[h]){(!d||h&1&&s!==(s=!a[0]))&&(t.disabled=s);const _={};!c&&h&2&&(c=!0,_.active=a[1],ge(()=>c=!1)),i.$set(_)},i(a){d||(R(i.$$.fragment,a),d=!0)},o(a){te(i.$$.fragment,a),d=!1},d(a){a&&(E(t),E(l)),K(i,a),m=!1,o()}}}const Fe="http://127.0.0.1:8000/api/v1/items/";let He="<p>Удаление <span class='has-text-danger-dark'>необратимо</span>! Удалить?</p>";const Re="notification";function Je(e,t,n){const s=document.querySelector("[name=csrfmiddlewaretoken]").value;let l=!1;const i=pe();let{disabled:c=!0}=t,d=F.subscribe(_=>n(0,c=_));xe(d);const m={add_class:"is-danger",text:"Не удалось удалить:"};let o=null;const v=_=>{o=_.currentTarget,n(1,l=!0)};async function r(_){if(!_.detail)return;const p=o.parentElement;let f="";const g=new FormData(p);for(let u of g.values())f+=await a(u);if(i("deleteitem"),f){let u={...m};u.text+=f,i(Re,u)}F.update(u=>!1)}const a=async _=>{try{const p=await fetch(`${Fe}${_}/`,{method:"delete",headers:{"X-CSRFToken":s}});return p.ok?"":`<br> id: ${_}, ${p.status} - ${p.statusText}`}catch(p){return`<br> id: ${_}, ${p.message}`}};function h(_){l=_,n(1,l)}return e.$$set=_=>{"disabled"in _&&n(0,c=_.disabled)},[c,l,v,r,h]}class Ke extends q{constructor(t){super(),P(this,t,Je,ze,A,{disabled:0})}}function ce(e,t,n){const s=e.slice();s[8]=t[n];const l=Object.values(s[8]);return s[9]=l,s}function oe(e,t,n){const s=e.slice();return s[12]=t[n],s}function ae(e,t,n){const s=e.slice();return s[15]=t[n],s}function ue(e){let t,n=e[5](e[15])+"",s;return{c(){t=y("th"),s=H(n),$(t,"class","has-text-grey svelte-5f7ih4")},m(l,i){N(l,t,i),b(t,s)},p(l,i){i&1&&n!==(n=l[5](l[15])+"")&&Z(s,n)},d(l){l&&E(t)}}}function fe(e){let t,n=e[12]+"",s;return{c(){t=y("td"),s=H(n)},m(l,i){N(l,t,i),b(t,s)},p(l,i){i&1&&n!==(n=l[12]+"")&&Z(s,n)},d(l){l&&E(t)}}}function de(e){let t,n,s,l,i,c,d,m=e[9][1]+"",o,v,r,a,h,_,p=T(e[9].slice(2)),f=[];for(let g=0;g<p.length;g+=1)f[g]=fe(oe(e,p,g));return{c(){t=y("tr"),n=y("td"),s=y("input"),i=S(),c=y("td"),d=y("a"),o=H(m),r=S();for(let g=0;g<f.length;g+=1)f[g].c();a=S(),$(s,"type","checkbox"),$(s,"name",e[2]),s.value=l=e[9][0],$(d,"href",v=""+(e[1]+e[9][0])),$(d,"class","svelte-5f7ih4")},m(g,u){N(g,t,u),b(t,n),b(n,s),b(t,i),b(t,c),b(c,d),b(d,o),b(t,r);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(t,null);b(t,a),h||(_=M(s,"change",e[3]),h=!0)},p(g,u){if(u&4&&$(s,"name",g[2]),u&1&&l!==(l=g[9][0])&&(s.value=l),u&1&&m!==(m=g[9][1]+"")&&Z(o,m),u&3&&v!==(v=""+(g[1]+g[9][0]))&&$(d,"href",v),u&1){p=T(g[9].slice(2));let k;for(k=0;k<p.length;k+=1){const se=oe(g,p,k);f[k]?f[k].p(se,u):(f[k]=fe(se),f[k].c(),f[k].m(t,a))}for(;k<f.length;k+=1)f[k].d(1);f.length=p.length}},d(g){g&&E(t),X(f,g),h=!1,_()}}}function Ue(e){let t,n,s,l,i,c,d,m,o,v,r,a=T(Object.keys(e[0][0]).slice(1)),h=[];for(let f=0;f<a.length;f+=1)h[f]=ue(ae(e,a,f));let _=T(e[0]),p=[];for(let f=0;f<_.length;f+=1)p[f]=de(ce(e,_,f));return{c(){t=y("div"),n=y("table"),s=y("thead"),l=y("tr"),i=y("th"),c=y("input"),d=S();for(let f=0;f<h.length;f+=1)h[f].c();m=S(),o=y("tbody");for(let f=0;f<p.length;f+=1)p[f].c();$(c,"type","checkbox"),$(c,"id",ye),$(i,"class","svelte-5f7ih4"),$(n,"class","table is-hoverable is-striped has-background-white-ter"),$(t,"class","svelte-5f7ih4")},m(f,g){N(f,t,g),b(t,n),b(n,s),b(s,l),b(l,i),b(i,c),b(l,d);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(l,null);b(n,m),b(n,o);for(let u=0;u<p.length;u+=1)p[u]&&p[u].m(o,null);v||(r=M(c,"change",e[4]),v=!0)},p(f,[g]){if(g&33){a=T(Object.keys(f[0][0]).slice(1));let u;for(u=0;u<a.length;u+=1){const k=ae(f,a,u);h[u]?h[u].p(k,g):(h[u]=ue(k),h[u].c(),h[u].m(l,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=a.length}if(g&15){_=T(f[0]);let u;for(u=0;u<_.length;u+=1){const k=ce(f,_,u);p[u]?p[u].p(k,g):(p[u]=de(k),p[u].c(),p[u].m(o,null))}for(;u<p.length;u+=1)p[u].d(1);p.length=_.length}},i:w,o:w,d(f){f&&E(t),X(h,f),X(p,f),v=!1,r()}}}const Ve="has-background-warning-light",ye="tablegen-all";function Xe(e,t,n){let{table_content:s=[]}=t,{href:l="/item/"}=t,{checkbox_name:i="id"}=t;const c=new Set;function d(r){let a=r.currentTarget;m(a)}const m=r=>{r.checked?(c.add(r.value),F.update(a=>!0),r.parentNode.parentNode.className=Ve):(document.querySelector(`#${ye}`).checked=!1,c.delete(r.value),c.size==0&&F.update(a=>!1),r.parentNode.parentNode.className="")},o=r=>{let a=r.currentTarget,h=document.getElementsByName(i);if(a.checked)for(let _ of h)_.checked=!0,m(_);else for(let _ of h)_.checked=!1,m(_)},v=r=>{const a={name:"Наименование",address:"Адрес",inn:"ИНН",kpp:"КПП",ogrn:"ОГРН",bank:"Банк",bik:"БИК",pay_acount:"Номер счёта",kor_acount:"Корр. счёт",phone:"Телефон",number:"Номер",data:"Дата",city:"Город",truck:"Номер машины",spec_notes:"Особые отметки",destination_address:"Адрес назначения",text:"Условия договора",sender:"Отправитель",receiver:"Получатель",payer:"Плательщик"};return r=a[r]?a[r]:r,r};return e.$$set=r=>{"table_content"in r&&n(0,s=r.table_content),"href"in r&&n(1,l=r.href),"checkbox_name"in r&&n(2,i=r.checkbox_name)},[s,l,i,d,o,v]}class Ge extends q{constructor(t){super(),P(this,t,Xe,Ue,A,{table_content:0,href:1,checkbox_name:2})}}function Qe(e){let t,n,s,l,i,c,d,m;function o(r){e[3](r)}let v={};return e[0]!==void 0&&(v.disabled=e[0]),c=new Ke({props:v}),z.push(()=>ve(c,"disabled",o)),c.$on("notification",e[4]),c.$on("deleteitem",e[2]),{c(){t=y("h4"),t.textContent="Список документов.",n=S(),s=y("form"),l=y("div"),i=S(),ne(c.$$.fragment),$(t,"class","title is-4 pl-4 pt-5"),$(l,"id",e[1])},m(r,a){N(r,t,a),N(r,n,a),N(r,s,a),b(s,l),b(s,i),J(c,s,null),m=!0},p(r,[a]){const h={};!d&&a&1&&(d=!0,h.disabled=r[0],ge(()=>d=!1)),c.$set(h)},i(r){m||(R(c.$$.fragment,r),m=!0)},o(r){te(c.$$.fragment,r),m=!1},d(r){r&&(E(t),E(n),E(s)),K(c)}}}const We="/document/";function he(e){let t=JSON.parse(JSON.stringify(e,["id","number","data","city","truck","destination_address"]));for(let n=0;n<t.length;n++)t[n].sender=e[n].sender.name,t[n].receiver=e[n].receiver.name,t[n].payer=e[n].payer.name;return t}function Ye(e,t){return e.id<t.id?1:e.id>t.id?-1:0}function Ze(e,t,n){let s=!0;const l="https://"+document.domain+app.dataset.api;let i,c=[];const d="tablegen_"+Math.round(Math.random()*1e4),m=async()=>{c=await fetch(l).then(r=>r.json()),i==null||i.$destroy(),i=new Ge({target:document.getElementById(d),props:{table_content:he(c).sort(Ye),href:We,checkbox_name:"id"}}),he(c)};Se(m),document.querySelector("#navbar-item-documents").classList.add("is-active");function o(r){s=r,n(0,s)}function v(r){Oe.call(this,e,r)}return[s,d,m,o,v]}class et extends q{constructor(t){super(),P(this,t,Ze,Qe,A,{})}}function tt(e){let t,n;return t=new et({}),{c(){ne(t.$$.fragment)},m(s,l){J(t,s,l),n=!0},p:w,i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){te(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}class nt extends q{constructor(t){super(),P(this,t,null,tt,A,{})}}new nt({target:document.getElementById("app")});
