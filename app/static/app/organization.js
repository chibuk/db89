var $e=Object.defineProperty;var ye=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var V=(e,t,n)=>(ye(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function w(){}function he(e){return e()}function se(){return Object.create(null)}function I(e){e.forEach(he)}function me(e){return typeof e=="function"}function z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ke(e){return Object.keys(e).length===0}function b(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function G(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function N(){return H(" ")}function M(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function J(e){return function(t){return t.preventDefault(),e.call(this,t)}}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function we(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t,n){e.classList.toggle(t,!!n)}function Ee(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}let C;function A(e){C=e}function ee(){if(!C)throw new Error("Function called outside component initialization");return C}function xe(e){ee().$$.on_mount.push(e)}function Ne(e){ee().$$.on_destroy.push(e)}function _e(){const e=ee();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=Ee(t,n,{cancelable:l});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function Oe(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const L=[],B=[];let j=[];const Q=[],Se=Promise.resolve();let W=!1;function Le(){W||(W=!0,Se.then(ge))}function Y(e){j.push(e)}function pe(e){Q.push(e)}const X=new Set;let O=0;function ge(){if(O!==0)return;const e=C;do{try{for(;O<L.length;){const t=L[O];O++,A(t),Te(t.$$)}}catch(t){throw L.length=0,O=0,t}for(A(null),L.length=0,O=0;B.length;)B.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];X.has(n)||(X.add(n),n())}j.length=0}while(L.length);for(;Q.length;)Q.pop()();W=!1,X.clear(),A(e)}function Te(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}function Me(e){const t=[],n=[];j.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),j=t}const D=new Set;let je;function R(e,t){e&&e.i&&(D.delete(e),e.i(t))}function te(e,t,n,l){if(e&&e.o){if(D.has(e))return;D.add(e),je.c.push(()=>{D.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function T(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function be(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ne(e){e&&e.c()}function K(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),Y(()=>{const i=e.$$.on_mount.map(he).filter(me);e.$$.on_destroy?e.$$.on_destroy.push(...i):I(i),e.$$.on_mount=[]}),s.forEach(Y)}function U(e,t){const n=e.$$;n.fragment!==null&&(Me(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ze(e,t){e.$$.dirty[0]===-1&&(L.push(e),Le(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(e,t,n,l,s,i,o,d=[-1]){const m=C;A(e);const r=e.$$={fragment:null,ctx:[],props:i,update:w,not_equal:s,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:se(),dirty:d,skip_bound:!1,root:t.target||m.$$.root};o&&o(r.root);let v=!1;if(r.ctx=n?n(e,t.props||{},(c,a,...h)=>{const _=h.length?h[0]:a;return r.ctx&&s(r.ctx[c],r.ctx[c]=_)&&(!r.skip_bound&&r.bound[c]&&r.bound[c](_),v&&ze(e,c)),a}):[],r.update(),v=!0,I(r.before_update),r.fragment=l?l(r.ctx):!1,t.target){if(t.hydrate){const c=we(t.target);r.fragment&&r.fragment.l(c),c.forEach(E)}else r.fragment&&r.fragment.c();t.intro&&R(e.$$.fragment),K(e,t.target,t.anchor),ge()}A(m)}class q{constructor(){V(this,"$$");V(this,"$$set")}$destroy(){U(this,1),this.$destroy=w}$on(t,n){if(!me(n))return w;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!ke(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ae="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ae);const S=[];function Ce(e,t=w){let n;const l=new Set;function s(d){if(z(e,d)&&(e=d,n)){const m=!S.length;for(const r of l)r[1](),S.push(r,e);if(m){for(let r=0;r<S.length;r+=2)S[r][0](S[r+1]);S.length=0}}}function i(d){s(d(e))}function o(d,m=w){const r=[d,m];return l.add(r),l.size===1&&(n=t(s,i)||w),d(e),()=>{l.delete(r),l.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}const F=Ce(!1);function Ie(e){let t,n,l,s,i,o,d,m,r,v,c;return{c(){t=$("div"),n=$("div"),l=N(),s=$("div"),i=$("form"),o=$("div"),d=$("div"),m=N(),r=$("div"),r.innerHTML='<p class="control"><button type="submit" class="button is-success svelte-1vm7l7d" title="Подтвердить"><span class="icon is-small"><i class="fa-light fa-check"></i></span><span>Да</span></button></p> <p class="control"><button type="reset" class="button is-danger is-outlined svelte-1vm7l7d" title="Отменить"><span class="icon is-small"><i class="fa-light fa-xmark"></i></span><span>Нет</span></button></p>',y(n,"class","modal-background"),y(d,"class","container content"),y(r,"class","field is-grouped is-grouped-centered"),y(o,"class","message-body"),y(i,"class","message is-warning"),y(s,"class","modal-content"),y(t,"class","modal"),ie(t,"is-active",e[0])},m(a,h){x(a,t,h),b(t,n),b(t,l),b(t,s),b(s,i),b(i,o),b(o,d),d.innerHTML=e[1],b(o,m),b(o,r),v||(c=[M(n,"click",e[3]),M(i,"submit",J(e[2])),M(i,"reset",J(e[3]))],v=!0)},p(a,[h]){h&2&&(d.innerHTML=a[1]),h&1&&ie(t,"is-active",a[0])},i:w,o:w,d(a){a&&E(t),v=!1,I(c)}}}let ce="modalevent";function Pe(e,t,n){const l=_e();let{htmldata:s="Sample modal data"}=t,{active:i=!1}=t,o=!1;const d=()=>{o=!0,n(0,i=!1),l(ce,o)},m=()=>{o=!1,n(0,i=!1),l(ce,o)};return e.$$set=r=>{"htmldata"in r&&n(1,s=r.htmldata),"active"in r&&n(0,i=r.active)},[i,s,d,m]}class qe extends q{constructor(t){super(),P(this,t,Pe,Ie,z,{htmldata:1,active:0})}}function De(e){let t,n,l,s,i,o,d,m,r;function v(a){e[4](a)}let c={htmldata:Fe};return e[1]!==void 0&&(c.active=e[1]),i=new qe({props:c}),B.push(()=>be(i,"active",v)),i.$on("modalevent",e[3]),{c(){t=$("button"),n=$("i"),s=N(),ne(i.$$.fragment),y(n,"class","fa-light fa-trash-xmark"),y(t,"type","submit"),y(t,"class","button is-link is-outlined mt-1 ml-2"),t.disabled=l=!e[0],y(t,"title","Удалить отмеченные")},m(a,h){x(a,t,h),b(t,n),x(a,s,h),K(i,a,h),d=!0,m||(r=M(t,"click",J(e[2])),m=!0)},p(a,[h]){(!d||h&1&&l!==(l=!a[0]))&&(t.disabled=l);const _={};!o&&h&2&&(o=!0,_.active=a[1],pe(()=>o=!1)),i.$set(_)},i(a){d||(R(i.$$.fragment,a),d=!0)},o(a){te(i.$$.fragment,a),d=!1},d(a){a&&(E(t),E(s)),U(i,a),m=!1,r()}}}const Be="http://127.0.0.1:8000/api/v1/items/";let Fe="<p>Удаление <span class='has-text-danger-dark'>необратимо</span>! Удалить?</p>";const He="notification";function Re(e,t,n){const l=document.querySelector("[name=csrfmiddlewaretoken]").value;let s=!1;const i=_e();let{disabled:o=!0}=t,d=F.subscribe(_=>n(0,o=_));Ne(d);const m={add_class:"is-danger",text:"Не удалось удалить:"};let r=null;const v=_=>{r=_.currentTarget,n(1,s=!0)};async function c(_){if(!_.detail)return;const p=r.parentElement;let f="";const g=new FormData(p);for(let u of g.values())f+=await a(u);if(i("deleteitem"),f){let u={...m};u.text+=f,i(He,u)}F.update(u=>!1)}const a=async _=>{try{const p=await fetch(`${Be}${_}/`,{method:"delete",headers:{"X-CSRFToken":l}});return p.ok?"":`<br> id: ${_}, ${p.status} - ${p.statusText}`}catch(p){return`<br> id: ${_}, ${p.message}`}};function h(_){s=_,n(1,s)}return e.$$set=_=>{"disabled"in _&&n(0,o=_.disabled)},[o,s,v,c,h]}class Ke extends q{constructor(t){super(),P(this,t,Re,De,z,{disabled:0})}}function oe(e,t,n){const l=e.slice();l[8]=t[n];const s=Object.values(l[8]);return l[9]=s,l}function re(e,t,n){const l=e.slice();return l[12]=t[n],l}function ae(e,t,n){const l=e.slice();return l[15]=t[n],l}function ue(e){let t,n=e[5](e[15])+"",l;return{c(){t=$("th"),l=H(n),y(t,"class","has-text-grey svelte-5f7ih4")},m(s,i){x(s,t,i),b(t,l)},p(s,i){i&1&&n!==(n=s[5](s[15])+"")&&Z(l,n)},d(s){s&&E(t)}}}function fe(e){let t,n=e[12]+"",l;return{c(){t=$("td"),l=H(n)},m(s,i){x(s,t,i),b(t,l)},p(s,i){i&1&&n!==(n=s[12]+"")&&Z(l,n)},d(s){s&&E(t)}}}function de(e){let t,n,l,s,i,o,d,m=e[9][1]+"",r,v,c,a,h,_,p=T(e[9].slice(2)),f=[];for(let g=0;g<p.length;g+=1)f[g]=fe(re(e,p,g));return{c(){t=$("tr"),n=$("td"),l=$("input"),i=N(),o=$("td"),d=$("a"),r=H(m),c=N();for(let g=0;g<f.length;g+=1)f[g].c();a=N(),y(l,"type","checkbox"),y(l,"name",e[2]),l.value=s=e[9][0],y(d,"href",v=""+(e[1]+e[9][0])),y(d,"class","svelte-5f7ih4")},m(g,u){x(g,t,u),b(t,n),b(n,l),b(t,i),b(t,o),b(o,d),b(d,r),b(t,c);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(t,null);b(t,a),h||(_=M(l,"change",e[3]),h=!0)},p(g,u){if(u&4&&y(l,"name",g[2]),u&1&&s!==(s=g[9][0])&&(l.value=s),u&1&&m!==(m=g[9][1]+"")&&Z(r,m),u&3&&v!==(v=""+(g[1]+g[9][0]))&&y(d,"href",v),u&1){p=T(g[9].slice(2));let k;for(k=0;k<p.length;k+=1){const le=re(g,p,k);f[k]?f[k].p(le,u):(f[k]=fe(le),f[k].c(),f[k].m(t,a))}for(;k<f.length;k+=1)f[k].d(1);f.length=p.length}},d(g){g&&E(t),G(f,g),h=!1,_()}}}function Ue(e){let t,n,l,s,i,o,d,m,r,v,c,a=T(Object.keys(e[0][0]).slice(1)),h=[];for(let f=0;f<a.length;f+=1)h[f]=ue(ae(e,a,f));let _=T(e[0]),p=[];for(let f=0;f<_.length;f+=1)p[f]=de(oe(e,_,f));return{c(){t=$("div"),n=$("table"),l=$("thead"),s=$("tr"),i=$("th"),o=$("input"),d=N();for(let f=0;f<h.length;f+=1)h[f].c();m=N(),r=$("tbody");for(let f=0;f<p.length;f+=1)p[f].c();y(o,"type","checkbox"),y(o,"id",ve),y(i,"class","svelte-5f7ih4"),y(n,"class","table is-hoverable is-striped has-background-white-ter"),y(t,"class","svelte-5f7ih4")},m(f,g){x(f,t,g),b(t,n),b(n,l),b(l,s),b(s,i),b(i,o),b(s,d);for(let u=0;u<h.length;u+=1)h[u]&&h[u].m(s,null);b(n,m),b(n,r);for(let u=0;u<p.length;u+=1)p[u]&&p[u].m(r,null);v||(c=M(o,"change",e[4]),v=!0)},p(f,[g]){if(g&33){a=T(Object.keys(f[0][0]).slice(1));let u;for(u=0;u<a.length;u+=1){const k=ae(f,a,u);h[u]?h[u].p(k,g):(h[u]=ue(k),h[u].c(),h[u].m(s,null))}for(;u<h.length;u+=1)h[u].d(1);h.length=a.length}if(g&15){_=T(f[0]);let u;for(u=0;u<_.length;u+=1){const k=oe(f,_,u);p[u]?p[u].p(k,g):(p[u]=de(k),p[u].c(),p[u].m(r,null))}for(;u<p.length;u+=1)p[u].d(1);p.length=_.length}},i:w,o:w,d(f){f&&E(t),G(h,f),G(p,f),v=!1,c()}}}const Ve="has-background-warning-light",ve="tablegen-all";function Xe(e,t,n){let{table_content:l=[]}=t,{href:s="/item/"}=t,{checkbox_name:i="id"}=t;const o=new Set;function d(c){let a=c.currentTarget;m(a)}const m=c=>{c.checked?(o.add(c.value),F.update(a=>!0),c.parentNode.parentNode.className=Ve):(document.querySelector(`#${ve}`).checked=!1,o.delete(c.value),o.size==0&&F.update(a=>!1),c.parentNode.parentNode.className="")},r=c=>{let a=c.currentTarget,h=document.getElementsByName(i);if(a.checked)for(let _ of h)_.checked=!0,m(_);else for(let _ of h)_.checked=!1,m(_)},v=c=>{const a={name:"Наименование",address:"Адрес",inn:"ИНН",kpp:"КПП",ogrn:"ОГРН",bank:"Банк",bik:"БИК",pay_acount:"Номер счёта",kor_acount:"Корр. счёт",phone:"Телефон",number:"Номер",data:"Дата",city:"Город",truck:"Номер машины",spec_notes:"Особые отметки",destination_address:"Адрес назначения",text:"Условия договора",sender:"Отправитель",receiver:"Получатель",payer:"Плательщик"};return c=a[c]?a[c]:c,c};return e.$$set=c=>{"table_content"in c&&n(0,l=c.table_content),"href"in c&&n(1,s=c.href),"checkbox_name"in c&&n(2,i=c.checkbox_name)},[l,s,i,d,r,v]}class Ge extends q{constructor(t){super(),P(this,t,Xe,Ue,z,{table_content:0,href:1,checkbox_name:2})}}function Je(e){let t,n,l,s,i,o,d,m;function r(c){e[3](c)}let v={};return e[0]!==void 0&&(v.disabled=e[0]),o=new Ke({props:v}),B.push(()=>be(o,"disabled",r)),o.$on("notification",e[4]),o.$on("deleteitem",e[2]),{c(){t=$("h4"),t.textContent="Список организаций.",n=N(),l=$("form"),s=$("div"),i=N(),ne(o.$$.fragment),y(t,"class","title is-4 pl-4 pt-5"),y(s,"id",e[1])},m(c,a){x(c,t,a),x(c,n,a),x(c,l,a),b(l,s),b(l,i),K(o,l,null),m=!0},p(c,[a]){const h={};!d&&a&1&&(d=!0,h.disabled=c[0],pe(()=>d=!1)),o.$set(h)},i(c){m||(R(o.$$.fragment,c),m=!0)},o(c){te(o.$$.fragment,c),m=!1},d(c){c&&(E(t),E(n),E(l)),U(o)}}}const Qe="/organization/";function We(e,t){return e.id<t.id?1:e.id>t.id?-1:0}function Ye(e,t,n){let l=!0;const s="https://"+document.domain+app.dataset.api;let i,o=[];const d="tablegen_"+Math.round(Math.random()*1e4),m=async()=>{o=await fetch(s).then(c=>c.json()),i==null||i.$destroy(),i=new Ge({target:document.getElementById(d),props:{table_content:o.sort(We),href:Qe,checkbox_name:"id"}})};xe(m),document.querySelector("#navbar-item-organizations").classList.add("is-active");function r(c){l=c,n(0,l)}function v(c){Oe.call(this,e,c)}return[l,d,m,r,v]}class Ze extends q{constructor(t){super(),P(this,t,Ye,Je,z,{})}}function et(e){let t,n;return t=new Ze({}),{c(){ne(t.$$.fragment)},m(l,s){K(t,l,s),n=!0},p:w,i(l){n||(R(t.$$.fragment,l),n=!0)},o(l){te(t.$$.fragment,l),n=!1},d(l){U(t,l)}}}class tt extends q{constructor(t){super(),P(this,t,null,et,z,{})}}new tt({target:document.getElementById("app")});
