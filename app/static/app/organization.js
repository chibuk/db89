var $e=Object.defineProperty;var ye=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var V=(e,t,n)=>(ye(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function w(){}function he(e){return e()}function se(){return Object.create(null)}function I(e){e.forEach(he)}function me(e){return typeof e=="function"}function z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ke(e){return Object.keys(e).length===0}function b(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function G(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function $(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function N(){return H(" ")}function M(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function J(e){return function(t){return t.preventDefault(),e.call(this,t)}}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function we(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t,n){e.classList.toggle(t,!!n)}function Ee(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}let C;function A(e){C=e}function ee(){if(!C)throw new Error("Function called outside component initialization");return C}function xe(e){ee().$$.on_mount.push(e)}function Ne(e){ee().$$.on_destroy.push(e)}function _e(){const e=ee();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=Ee(t,n,{cancelable:l});return s.slice().forEach(c=>{c.call(e,i)}),!i.defaultPrevented}return!0}}function Oe(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const L=[],B=[];let j=[];const Q=[],Se=Promise.resolve();let W=!1;function Le(){W||(W=!0,Se.then(ge))}function Y(e){j.push(e)}function pe(e){Q.push(e)}const X=new Set;let O=0;function ge(){if(O!==0)return;const e=C;do{try{for(;O<L.length;){const t=L[O];O++,A(t),Te(t.$$)}}catch(t){throw L.length=0,O=0,t}for(A(null),L.length=0,O=0;B.length;)B.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];X.has(n)||(X.add(n),n())}j.length=0}while(L.length);for(;Q.length;)Q.pop()();W=!1,X.clear(),A(e)}function Te(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}function Me(e){const t=[],n=[];j.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),j=t}const D=new Set;let je;function R(e,t){e&&e.i&&(D.delete(e),e.i(t))}function te(e,t,n,l){if(e&&e.o){if(D.has(e))return;D.add(e),je.c.push(()=>{D.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function T(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function be(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ne(e){e&&e.c()}function K(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),Y(()=>{const i=e.$$.on_mount.map(he).filter(me);e.$$.on_destroy?e.$$.on_destroy.push(...i):I(i),e.$$.on_mount=[]}),s.forEach(Y)}function U(e,t){const n=e.$$;n.fragment!==null&&(Me(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ze(e,t){e.$$.dirty[0]===-1&&(L.push(e),Le(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(e,t,n,l,s,i,c,f=[-1]){const m=C;A(e);const r=e.$$={fragment:null,ctx:[],props:i,update:w,not_equal:s,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:se(),dirty:f,skip_bound:!1,root:t.target||m.$$.root};c&&c(r.root);let v=!1;if(r.ctx=n?n(e,t.props||{},(o,a,...h)=>{const k=h.length?h[0]:a;return r.ctx&&s(r.ctx[o],r.ctx[o]=k)&&(!r.skip_bound&&r.bound[o]&&r.bound[o](k),v&&ze(e,o)),a}):[],r.update(),v=!0,I(r.before_update),r.fragment=l?l(r.ctx):!1,t.target){if(t.hydrate){const o=we(t.target);r.fragment&&r.fragment.l(o),o.forEach(E)}else r.fragment&&r.fragment.c();t.intro&&R(e.$$.fragment),K(e,t.target,t.anchor),ge()}A(m)}class q{constructor(){V(this,"$$");V(this,"$$set")}$destroy(){U(this,1),this.$destroy=w}$on(t,n){if(!me(n))return w;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!ke(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ae="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ae);const S=[];function Ce(e,t=w){let n;const l=new Set;function s(f){if(z(e,f)&&(e=f,n)){const m=!S.length;for(const r of l)r[1](),S.push(r,e);if(m){for(let r=0;r<S.length;r+=2)S[r][0](S[r+1]);S.length=0}}}function i(f){s(f(e))}function c(f,m=w){const r=[f,m];return l.add(r),l.size===1&&(n=t(s,i)||w),f(e),()=>{l.delete(r),l.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:c}}const F=Ce(!1);function Ie(e){let t,n,l,s,i,c,f,m,r,v,o;return{c(){t=$("div"),n=$("div"),l=N(),s=$("div"),i=$("form"),c=$("div"),f=$("div"),m=N(),r=$("div"),r.innerHTML='<p class="control"><button type="submit" class="button is-success svelte-1vm7l7d" title="Подтвердить"><span class="icon is-small"><i class="fa-light fa-check"></i></span><span>Да</span></button></p> <p class="control"><button type="reset" class="button is-danger is-outlined svelte-1vm7l7d" title="Отменить"><span class="icon is-small"><i class="fa-light fa-xmark"></i></span><span>Нет</span></button></p>',y(n,"class","modal-background"),y(f,"class","container content"),y(r,"class","field is-grouped is-grouped-centered"),y(c,"class","message-body"),y(i,"class","message is-warning"),y(s,"class","modal-content"),y(t,"class","modal"),ie(t,"is-active",e[0])},m(a,h){x(a,t,h),b(t,n),b(t,l),b(t,s),b(s,i),b(i,c),b(c,f),f.innerHTML=e[1],b(c,m),b(c,r),v||(o=[M(n,"click",e[3]),M(i,"submit",J(e[2])),M(i,"reset",J(e[3]))],v=!0)},p(a,[h]){h&2&&(f.innerHTML=a[1]),h&1&&ie(t,"is-active",a[0])},i:w,o:w,d(a){a&&E(t),v=!1,I(o)}}}let oe="modalevent";function Pe(e,t,n){const l=_e();let{htmldata:s="Sample modal data"}=t,{active:i=!1}=t,c=!1;const f=()=>{c=!0,n(0,i=!1),l(oe,c)},m=()=>{c=!1,n(0,i=!1),l(oe,c)};return e.$$set=r=>{"htmldata"in r&&n(1,s=r.htmldata),"active"in r&&n(0,i=r.active)},[i,s,f,m]}class qe extends q{constructor(t){super(),P(this,t,Pe,Ie,z,{htmldata:1,active:0})}}function De(e){let t,n,l,s,i,c,f,m,r;function v(a){e[4](a)}let o={htmldata:Be};return e[1]!==void 0&&(o.active=e[1]),i=new qe({props:o}),B.push(()=>be(i,"active",v)),i.$on("modalevent",e[3]),{c(){t=$("button"),n=$("i"),s=N(),ne(i.$$.fragment),y(n,"class","fa-light fa-trash-xmark"),y(t,"type","submit"),y(t,"class","button is-link is-outlined mt-1 ml-2"),t.disabled=l=!e[0],y(t,"title","Удалить отмеченные")},m(a,h){x(a,t,h),b(t,n),x(a,s,h),K(i,a,h),f=!0,m||(r=M(t,"click",J(e[2])),m=!0)},p(a,[h]){(!f||h&1&&l!==(l=!a[0]))&&(t.disabled=l);const k={};!c&&h&2&&(c=!0,k.active=a[1],pe(()=>c=!1)),i.$set(k)},i(a){f||(R(i.$$.fragment,a),f=!0)},o(a){te(i.$$.fragment,a),f=!1},d(a){a&&(E(t),E(s)),U(i,a),m=!1,r()}}}let Be="<p>Удаление <span class='has-text-danger-dark'>необратимо</span>! Удалить?</p>";const Fe="notification";function He(e,t,n){const l=document.querySelector("[name=csrfmiddlewaretoken]").value,s="https://"+document.domain+app.dataset.api;let i=!1;const c=_e();let{disabled:f=!0}=t,m=F.subscribe(_=>n(0,f=_));Ne(m);const r={add_class:"is-danger",text:"Не удалось удалить:"};let v=null;const o=_=>{v=_.currentTarget,n(1,i=!0)};async function a(_){if(!_.detail)return;const u=v.parentElement;let p="";const d=new FormData(u);for(let g of d.values())p+=await h(g);if(c("deleteitem"),p){let g={...r};g.text+=p,c(Fe,g)}F.update(g=>!1)}const h=async _=>{try{const u=await fetch(`${s}${_}/`,{method:"delete",headers:{"X-CSRFToken":l}});return u.ok?"":`<br> id: ${_}, ${u.status} - ${u.statusText}`}catch(u){return`<br> id: ${_}, ${u.message}`}};function k(_){i=_,n(1,i)}return e.$$set=_=>{"disabled"in _&&n(0,f=_.disabled)},[f,i,o,a,k]}class Re extends q{constructor(t){super(),P(this,t,He,De,z,{disabled:0})}}function ce(e,t,n){const l=e.slice();l[8]=t[n];const s=Object.values(l[8]);return l[9]=s,l}function re(e,t,n){const l=e.slice();return l[12]=t[n],l}function ae(e,t,n){const l=e.slice();return l[15]=t[n],l}function ue(e){let t,n=e[5](e[15])+"",l;return{c(){t=$("th"),l=H(n),y(t,"class","has-text-grey svelte-5f7ih4")},m(s,i){x(s,t,i),b(t,l)},p(s,i){i&1&&n!==(n=s[5](s[15])+"")&&Z(l,n)},d(s){s&&E(t)}}}function fe(e){let t,n=e[12]+"",l;return{c(){t=$("td"),l=H(n)},m(s,i){x(s,t,i),b(t,l)},p(s,i){i&1&&n!==(n=s[12]+"")&&Z(l,n)},d(s){s&&E(t)}}}function de(e){let t,n,l,s,i,c,f,m=e[9][1]+"",r,v,o,a,h,k,_=T(e[9].slice(2)),u=[];for(let p=0;p<_.length;p+=1)u[p]=fe(re(e,_,p));return{c(){t=$("tr"),n=$("td"),l=$("input"),i=N(),c=$("td"),f=$("a"),r=H(m),o=N();for(let p=0;p<u.length;p+=1)u[p].c();a=N(),y(l,"type","checkbox"),y(l,"name",e[2]),l.value=s=e[9][0],y(f,"href",v=""+(e[1]+e[9][0])),y(f,"class","svelte-5f7ih4")},m(p,d){x(p,t,d),b(t,n),b(n,l),b(t,i),b(t,c),b(c,f),b(f,r),b(t,o);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(t,null);b(t,a),h||(k=M(l,"change",e[3]),h=!0)},p(p,d){if(d&4&&y(l,"name",p[2]),d&1&&s!==(s=p[9][0])&&(l.value=s),d&1&&m!==(m=p[9][1]+"")&&Z(r,m),d&3&&v!==(v=""+(p[1]+p[9][0]))&&y(f,"href",v),d&1){_=T(p[9].slice(2));let g;for(g=0;g<_.length;g+=1){const le=re(p,_,g);u[g]?u[g].p(le,d):(u[g]=fe(le),u[g].c(),u[g].m(t,a))}for(;g<u.length;g+=1)u[g].d(1);u.length=_.length}},d(p){p&&E(t),G(u,p),h=!1,k()}}}function Ke(e){let t,n,l,s,i,c,f,m,r,v,o,a=T(Object.keys(e[0][0]).slice(1)),h=[];for(let u=0;u<a.length;u+=1)h[u]=ue(ae(e,a,u));let k=T(e[0]),_=[];for(let u=0;u<k.length;u+=1)_[u]=de(ce(e,k,u));return{c(){t=$("div"),n=$("table"),l=$("thead"),s=$("tr"),i=$("th"),c=$("input"),f=N();for(let u=0;u<h.length;u+=1)h[u].c();m=N(),r=$("tbody");for(let u=0;u<_.length;u+=1)_[u].c();y(c,"type","checkbox"),y(c,"id",ve),y(i,"class","svelte-5f7ih4"),y(n,"class","table is-hoverable is-striped has-background-white-ter"),y(t,"class","svelte-5f7ih4")},m(u,p){x(u,t,p),b(t,n),b(n,l),b(l,s),b(s,i),b(i,c),b(s,f);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(s,null);b(n,m),b(n,r);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(r,null);v||(o=M(c,"change",e[4]),v=!0)},p(u,[p]){if(p&33){a=T(Object.keys(u[0][0]).slice(1));let d;for(d=0;d<a.length;d+=1){const g=ae(u,a,d);h[d]?h[d].p(g,p):(h[d]=ue(g),h[d].c(),h[d].m(s,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=a.length}if(p&15){k=T(u[0]);let d;for(d=0;d<k.length;d+=1){const g=ce(u,k,d);_[d]?_[d].p(g,p):(_[d]=de(g),_[d].c(),_[d].m(r,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=k.length}},i:w,o:w,d(u){u&&E(t),G(h,u),G(_,u),v=!1,o()}}}const Ue="has-background-warning-light",ve="tablegen-all";function Ve(e,t,n){let{table_content:l=[]}=t,{href:s="/item/"}=t,{checkbox_name:i="id"}=t;const c=new Set;function f(o){let a=o.currentTarget;m(a)}const m=o=>{o.checked?(c.add(o.value),F.update(a=>!0),o.parentNode.parentNode.className=Ue):(document.querySelector(`#${ve}`).checked=!1,c.delete(o.value),c.size==0&&F.update(a=>!1),o.parentNode.parentNode.className="")},r=o=>{let a=o.currentTarget,h=document.getElementsByName(i);if(a.checked)for(let k of h)k.checked=!0,m(k);else for(let k of h)k.checked=!1,m(k)},v=o=>{const a={name:"Наименование",address:"Адрес",inn:"ИНН",kpp:"КПП",ogrn:"ОГРН",bank:"Банк",bik:"БИК",pay_acount:"Номер счёта",kor_acount:"Корр. счёт",phone:"Телефон",number:"Номер",data:"Дата",city:"Город",truck:"Номер машины",spec_notes:"Особые отметки",destination_address:"Адрес назначения",text:"Условия договора",sender:"Отправитель",receiver:"Получатель",payer:"Плательщик"};return o=a[o]?a[o]:o,o};return e.$$set=o=>{"table_content"in o&&n(0,l=o.table_content),"href"in o&&n(1,s=o.href),"checkbox_name"in o&&n(2,i=o.checkbox_name)},[l,s,i,f,r,v]}class Xe extends q{constructor(t){super(),P(this,t,Ve,Ke,z,{table_content:0,href:1,checkbox_name:2})}}function Ge(e){let t,n,l,s,i,c,f,m;function r(o){e[3](o)}let v={};return e[0]!==void 0&&(v.disabled=e[0]),c=new Re({props:v}),B.push(()=>be(c,"disabled",r)),c.$on("notification",e[4]),c.$on("deleteitem",e[2]),{c(){t=$("h4"),t.textContent="Список организаций.",n=N(),l=$("form"),s=$("div"),i=N(),ne(c.$$.fragment),y(t,"class","title is-4 pl-4 pt-5"),y(s,"id",e[1])},m(o,a){x(o,t,a),x(o,n,a),x(o,l,a),b(l,s),b(l,i),K(c,l,null),m=!0},p(o,[a]){const h={};!f&&a&1&&(f=!0,h.disabled=o[0],pe(()=>f=!1)),c.$set(h)},i(o){m||(R(c.$$.fragment,o),m=!0)},o(o){te(c.$$.fragment,o),m=!1},d(o){o&&(E(t),E(n),E(l)),U(c)}}}const Je="/organization/";function Qe(e,t){return e.id<t.id?1:e.id>t.id?-1:0}function We(e,t,n){let l=!0;const s="https://"+document.domain+app.dataset.api;let i,c=[];const f="tablegen_"+Math.round(Math.random()*1e4),m=async()=>{c=await fetch(s).then(o=>o.json()),i==null||i.$destroy(),i=new Xe({target:document.getElementById(f),props:{table_content:c.sort(Qe),href:Je,checkbox_name:"id"}})};xe(m),document.querySelector("#navbar-item-organizations").classList.add("is-active");function r(o){l=o,n(0,l)}function v(o){Oe.call(this,e,o)}return[l,f,m,r,v]}class Ye extends q{constructor(t){super(),P(this,t,We,Ge,z,{})}}function Ze(e){let t,n;return t=new Ye({}),{c(){ne(t.$$.fragment)},m(l,s){K(t,l,s),n=!0},p:w,i(l){n||(R(t.$$.fragment,l),n=!0)},o(l){te(t.$$.fragment,l),n=!1},d(l){U(t,l)}}}class et extends q{constructor(t){super(),P(this,t,null,Ze,z,{})}}new et({target:document.getElementById("app")});
