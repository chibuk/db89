var Ui=Object.defineProperty;var ji=(e,t,n)=>t in e?Ui(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var it=(e,t,n)=>(ji(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function fe(){}const $n=e=>e;function ht(e,t){for(const n in t)e[n]=t[n];return e}function si(e){return e()}function ul(){return Object.create(null)}function be(e){e.forEach(si)}function _n(e){return typeof e=="function"}function Ke(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ji(e){return Object.keys(e).length===0}function Wi(e,...t){if(e==null){for(const l of t)l(void 0);return fe}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function cl(e,t,n){e.$$.on_destroy.push(Wi(t,n))}function St(e,t,n,l){if(e){const i=oi(e,t,n,l);return e[0](i)}}function oi(e,t,n,l){return e[1]&&l?ht(n.ctx.slice(),e[1](l(t))):n.ctx}function Tt(e,t,n,l){if(e[2]&&l){const i=e[2](l(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=t.dirty[a]|i[a];return s}return t.dirty|i}return t.dirty}function It(e,t,n,l,i,s){if(i){const o=oi(t,n,l,s);e.p(o,i)}}function Ft(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function Vi(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function fl(e,t){const n={};t=new Set(t);for(const l in e)!t.has(l)&&l[0]!=="$"&&(n[l]=e[l]);return n}function dl(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const ri=typeof window<"u";let ai=ri?()=>window.performance.now():()=>Date.now(),el=ri?e=>requestAnimationFrame(e):fe;const Qt=new Set;function ui(e){Qt.forEach(t=>{t.c(e)||(Qt.delete(t),t.f())}),Qt.size!==0&&el(ui)}function ci(e){let t;return Qt.size===0&&el(ui),{promise:new Promise(n=>{Qt.add(t={c:e,f:n})}),abort(){Qt.delete(t)}}}const Xi=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function d(e,t){e.appendChild(t)}function fi(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Gi(e){const t=b("style");return t.textContent="/* empty */",Qi(fi(e),t),t.sheet}function Qi(e,t){return d(e.head||e,t),t.sheet}function J(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function dt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function cn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ge(e){return document.createTextNode(e)}function O(){return ge(" ")}function gt(){return ge("")}function P(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function st(e){return function(t){return t.preventDefault(),e.call(this,t)}}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Zi=["width","height"];function ml(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)t[l]==null?e.removeAttribute(l):l==="style"?e.style.cssText=t[l]:l==="__value"?e.value=e[l]=t[l]:n[l]&&n[l].set&&Zi.indexOf(l)===-1?e[l]=t[l]:m(e,l,t[l])}function xi(e){return Array.from(e.childNodes)}function Se(e,t){t=""+t,e.data!==t&&(e.data=t)}function ce(e,t){e.value=t??""}function on(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}function Cn(e,t,n){for(let l=0;l<e.options.length;l+=1){const i=e.options[l];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ie(e,t,n){e.classList.toggle(t,!!n)}function di(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}class mi{constructor(t=!1){it(this,"is_svg",!1);it(this,"e");it(this,"n");it(this,"t");it(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,l=null){this.e||(this.is_svg?this.e=cn(n.nodeName):this.e=b(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(l)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)J(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(j)}}const An=new Map;let En=0;function $i(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function es(e,t){const n={stylesheet:Gi(t),rules:{}};return An.set(e,n),n}function Vn(e,t,n,l,i,s,o,a=0){const c=16.666/l;let f=`{
`;for(let I=0;I<=1;I+=c){const k=t+(n-t)*s(I);f+=I*100+`%{${o(k,1-k)}}
`}const S=f+`100% {${o(n,1-n)}}
}`,p=`__svelte_${$i(S)}_${a}`,_=fi(e),{stylesheet:v,rules:h}=An.get(_)||es(_,e);h[p]||(h[p]=!0,v.insertRule(`@keyframes ${p} ${S}`,v.cssRules.length));const y=e.style.animation||"";return e.style.animation=`${y?`${y}, `:""}${p} ${l}ms linear ${i}ms 1 both`,En+=1,p}function hi(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=n.length-l.length;i&&(e.style.animation=l.join(", "),En-=i,En||ts())}function ts(){el(()=>{En||(An.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)}),An.clear())})}function ns(e,t,n,l){if(!t)return fe;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return fe;const{delay:s=0,duration:o=300,easing:a=$n,start:c=ai()+s,end:f=c+o,tick:S=fe,css:p}=n(e,{from:t,to:i},l);let _=!0,v=!1,h;function y(){p&&(h=Vn(e,0,1,o,s,a,p)),s||(v=!0)}function I(){p&&hi(e,h),_=!1}return ci(k=>{if(!v&&k>=c&&(v=!0),v&&k>=f&&(S(1,0),I()),!_)return!1;if(v){const D=k-c,F=0+1*a(D/o);S(F,1-F)}return!0}),y(),S(0,1),I}function ls(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:l}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=l,gi(e,i)}}function gi(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const l=getComputedStyle(e),i=l.transform==="none"?"":l.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let hn;function fn(e){hn=e}function On(){if(!hn)throw new Error("Function called outside component initialization");return hn}function Hn(e){On().$$.on_mount.push(e)}function is(e){On().$$.after_update.push(e)}function _i(e){On().$$.on_destroy.push(e)}function pn(){const e=On();return(t,n,{cancelable:l=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=di(t,n,{cancelable:l});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}function pi(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const Gt=[],Re=[];let Zt=[];const Xn=[],ss=Promise.resolve();let Gn=!1;function os(){Gn||(Gn=!0,ss.then(bi))}function en(e){Zt.push(e)}function Et(e){Xn.push(e)}const zn=new Set;let Wt=0;function bi(){if(Wt!==0)return;const e=hn;do{try{for(;Wt<Gt.length;){const t=Gt[Wt];Wt++,fn(t),rs(t.$$)}}catch(t){throw Gt.length=0,Wt=0,t}for(fn(null),Gt.length=0,Wt=0;Re.length;)Re.pop()();for(let t=0;t<Zt.length;t+=1){const n=Zt[t];zn.has(n)||(zn.add(n),n())}Zt.length=0}while(Gt.length);for(;Xn.length;)Xn.pop()();Gn=!1,zn.clear(),fn(e)}function rs(e){if(e.fragment!==null){e.update(),be(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(en)}}function as(e){const t=[],n=[];Zt.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Zt=t}let rn;function us(){return rn||(rn=Promise.resolve(),rn.then(()=>{rn=null})),rn}function Un(e,t,n){e.dispatchEvent(di(`${t?"intro":"outro"}${n}`))}const Mn=new Set;let mt;function tn(){mt={r:0,c:[],p:mt}}function nn(){mt.r||be(mt.c),mt=mt.p}function ee(e,t){e&&e.i&&(Mn.delete(e),e.i(t))}function se(e,t,n,l){if(e&&e.o){if(Mn.has(e))return;Mn.add(e),mt.c.push(()=>{Mn.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const cs={duration:0};function qn(e,t,n,l){let s=t(e,n,{direction:"both"}),o=l?0:1,a=null,c=null,f=null,S;function p(){f&&hi(e,f)}function _(h,y){const I=h.b-o;return y*=Math.abs(I),{a:o,b:h.b,d:I,duration:y,start:h.start,end:h.start+y,group:h.group}}function v(h){const{delay:y=0,duration:I=300,easing:k=$n,tick:D=fe,css:F}=s||cs,C={start:ai()+y,b:h};h||(C.group=mt,mt.r+=1),"inert"in e&&(h?S!==void 0&&(e.inert=S):(S=e.inert,e.inert=!0)),a||c?c=C:(F&&(p(),f=Vn(e,o,h,I,y,k,F)),h&&D(0,1),a=_(C,I),en(()=>Un(e,h,"start")),ci(H=>{if(c&&H>c.start&&(a=_(c,I),c=null,Un(e,a.b,"start"),F&&(p(),f=Vn(e,o,a.b,a.duration,0,k,s.css))),a){if(H>=a.end)D(o=a.b,1-o),Un(e,a.b,"end"),c||(a.b?p():--a.group.r||be(a.group.c)),a=null;else if(H>=a.start){const L=H-a.start;o=a.a+a.d*k(L/a.duration),D(o,1-o)}}return!!(a||c)}))}return{run(h){_n(s)?us().then(()=>{s=s({direction:h?"in":"out"}),v(h)}):v(h)},end(){p(),a=c=null}}}function me(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function fs(e,t){se(e,1,1,()=>{t.delete(e.key)})}function ds(e,t){e.f(),fs(e,t)}function ms(e,t,n,l,i,s,o,a,c,f,S,p){let _=e.length,v=s.length,h=_;const y={};for(;h--;)y[e[h].key]=h;const I=[],k=new Map,D=new Map,F=[];for(h=v;h--;){const N=p(i,s,h),Y=n(N);let W=o.get(Y);W?l&&F.push(()=>W.p(N,t)):(W=f(Y,N),W.c()),k.set(Y,I[h]=W),Y in y&&D.set(Y,Math.abs(h-y[Y]))}const C=new Set,H=new Set;function L(N){ee(N,1),N.m(a,S),o.set(N.key,N),S=N.first,v--}for(;_&&v;){const N=I[v-1],Y=e[_-1],W=N.key,te=Y.key;N===Y?(S=N.first,_--,v--):k.has(te)?!o.has(W)||C.has(W)?L(N):H.has(te)?_--:D.get(W)>D.get(te)?(H.add(W),L(N)):(C.add(te),_--):(c(Y,o),_--)}for(;_--;){const N=e[_];k.has(N.key)||c(N,o)}for(;v;)L(I[v-1]);return be(F),I}function xt(e,t){const n={},l={},i={$$scope:1};let s=e.length;for(;s--;){const o=e[s],a=t[s];if(a){for(const c in o)c in a||(l[c]=1);for(const c in a)i[c]||(n[c]=a[c],i[c]=1);e[s]=a}else for(const c in o)i[c]=1}for(const o in l)o in n||(n[o]=void 0);return n}function dn(e){return typeof e=="object"&&e!==null?e:{}}function qt(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function Pe(e){e&&e.c()}function qe(e,t,n){const{fragment:l,after_update:i}=e.$$;l&&l.m(t,n),en(()=>{const s=e.$$.on_mount.map(si).filter(_n);e.$$.on_destroy?e.$$.on_destroy.push(...s):be(s),e.$$.on_mount=[]}),i.forEach(en)}function Oe(e,t){const n=e.$$;n.fragment!==null&&(as(n.after_update),be(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function hs(e,t){e.$$.dirty[0]===-1&&(Gt.push(e),os(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ge(e,t,n,l,i,s,o,a=[-1]){const c=hn;fn(e);const f=e.$$={fragment:null,ctx:[],props:s,update:fe,not_equal:i,bound:ul(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ul(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(f.root);let S=!1;if(f.ctx=n?n(e,t.props||{},(p,_,...v)=>{const h=v.length?v[0]:_;return f.ctx&&i(f.ctx[p],f.ctx[p]=h)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](h),S&&hs(e,p)),_}):[],f.update(),S=!0,be(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const p=xi(t.target);f.fragment&&f.fragment.l(p),p.forEach(j)}else f.fragment&&f.fragment.c();t.intro&&ee(e.$$.fragment),qe(e,t.target,t.anchor),bi()}fn(c)}class Qe{constructor(){it(this,"$$");it(this,"$$set")}$destroy(){Oe(this,1),this.$destroy=fe}$on(t,n){if(!_n(n))return fe;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!Ji(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const gs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gs);const Vt=[];function yi(e,t=fe){let n;const l=new Set;function i(a){if(Ke(e,a)&&(e=a,n)){const c=!Vt.length;for(const f of l)f[1](),Vt.push(f,e);if(c){for(let f=0;f<Vt.length;f+=2)Vt[f][0](Vt[f+1]);Vt.length=0}}}function s(a){i(a(e))}function o(a,c=fe){const f=[a,c];return l.add(f),l.size===1&&(n=t(i,s)||fe),a(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const mn=yi(!1);function _s(e){let t,n,l,i,s,o,a,c,f,S,p;return{c(){t=b("div"),n=b("div"),l=O(),i=b("div"),s=b("form"),o=b("div"),a=b("div"),c=O(),f=b("div"),f.innerHTML='<p class="control"><button type="submit" class="button is-success svelte-1vm7l7d" title="Подтвердить"><span class="icon is-small"><i class="fa-light fa-check"></i></span><span>Да</span></button></p> <p class="control"><button type="reset" class="button is-danger is-outlined svelte-1vm7l7d" title="Отменить"><span class="icon is-small"><i class="fa-light fa-xmark"></i></span><span>Нет</span></button></p>',m(n,"class","modal-background"),m(a,"class","container content"),m(f,"class","field is-grouped is-grouped-centered"),m(o,"class","message-body"),m(s,"class","message is-warning"),m(i,"class","modal-content"),m(t,"class","modal"),ie(t,"is-active",e[0])},m(_,v){J(_,t,v),d(t,n),d(t,l),d(t,i),d(i,s),d(s,o),d(o,a),a.innerHTML=e[1],d(o,c),d(o,f),S||(p=[P(n,"click",e[3]),P(s,"submit",st(e[2])),P(s,"reset",st(e[3]))],S=!0)},p(_,[v]){v&2&&(a.innerHTML=_[1]),v&1&&ie(t,"is-active",_[0])},i:fe,o:fe,d(_){_&&j(t),S=!1,be(p)}}}let hl="modalevent";function ps(e,t,n){const l=pn();let{htmldata:i="Sample modal data"}=t,{active:s=!1}=t,o=!1;const a=()=>{o=!0,n(0,s=!1),l(hl,o)},c=()=>{o=!1,n(0,s=!1),l(hl,o)};return e.$$set=f=>{"htmldata"in f&&n(1,i=f.htmldata),"active"in f&&n(0,s=f.active)},[s,i,a,c]}class bs extends Qe{constructor(t){super(),Ge(this,t,ps,_s,Ke,{htmldata:1,active:0})}}function ys(e){let t,n,l,i,s,o,a,c,f,S,p;function _(h){e[5](h)}let v={htmldata:vs};return e[1]!==void 0&&(v.active=e[1]),a=new bs({props:v}),Re.push(()=>qt(a,"active",_)),a.$on("modalevent",e[3]),{c(){t=b("button"),n=b("i"),l=O(),i=b("div"),o=O(),Pe(a.$$.fragment),m(n,"class","fa-light fa-trash-xmark"),m(i,"id","tgen_change_inform"),m(t,"type","submit"),m(t,"class","button is-link is-outlined mt-1 ml-2"),t.disabled=s=!e[0],m(t,"title","Удалить отмеченные")},m(h,y){J(h,t,y),d(t,n),d(t,l),d(t,i),J(h,o,y),qe(a,h,y),f=!0,S||(p=P(t,"click",st(e[2])),S=!0)},p(h,[y]){(!f||y&1&&s!==(s=!h[0]))&&(t.disabled=s);const I={};!c&&y&2&&(c=!0,I.active=h[1],Et(()=>c=!1)),a.$set(I)},i(h){f||(ee(a.$$.fragment,h),f=!0)},o(h){se(a.$$.fragment,h),f=!1},d(h){h&&(j(t),j(o)),Oe(a,h),S=!1,p()}}}let vs="<p>Удаление <span class='has-text-danger-dark'>необратимо</span>! Удалить?</p>";const ks="notification";function ws(e,t,n){let{uriPath:l=""}=t;const i=document.querySelector("[name=csrfmiddlewaretoken]").value,s="https://"+document.domain+app.dataset.api;let o=!1;const a=pn();let{disabled:c=!0}=t,f=mn.subscribe(I=>n(0,c=I));_i(f);const S={add_class:"is-danger",text:"Не удалось удалить:"};let p=null;const _=I=>{p=I.currentTarget,n(1,o=!0)};async function v(I){if(!I.detail)return;const k=p.parentElement;let D="";const F=new FormData(k);for(let C of F.values())C&&(D+=await h(C));if(a("updatetable"),D){let C={...S};C.text+=D,a(ks,C)}mn.update(C=>!1)}const h=async I=>{try{const k=await fetch(`${s}${I}/`,{method:"delete",headers:{"X-CSRFToken":i}});return k.ok?"":`<br> id: ${I}, ${k.status} - ${k.statusText}`}catch(k){return`<br> id: ${I}, ${k.message}`}};function y(I){o=I,n(1,o)}return e.$$set=I=>{"uriPath"in I&&n(4,l=I.uriPath),"disabled"in I&&n(0,c=I.disabled)},[c,o,_,v,l,y]}class Ss extends Qe{constructor(t){super(),Ge(this,t,ws,ys,Ke,{uriPath:4,disabled:0})}}function Ts(e){let t,n,l;return{c(){t=b("table"),t.innerHTML="",n=O(),l=b("div"),l.textContent="...",m(t,"class","table is-hoverable is-striped has-background-white-ter svelte-qssaav"),m(t,"id","T_gen"),m(l,"id","observer_target"),on(l,"width","15rem"),on(l,"height","20px"),on(l,"border","none"),on(l,"margin","0 0 0 1rem"),on(l,"font-size","0.8rem")},m(i,s){J(i,t,s),J(i,n,s),J(i,l,s)},p:fe,i:fe,o:fe,d(i){i&&(j(t),j(n),j(l))}}}const gl="has-background-warning-light",_l="tablegen-all",jn=10;function Le(e,t={}){let n=document.createElement(e);for(let l in t)n.setAttribute(l,t[l]);return n}function Is(e,t,n){let{href:l="/item/"}=t,{checkbox_name:i="id"}=t,{url:s=""}=t,{fields:o=["id"]}=t,{parseData:a=void 0}=t,c=0;_i(()=>mn.update(g=>!1));const f=new Set;function S(g){let r=g.currentTarget;p(r)}const p=g=>{const r=document.querySelector("tr th.firstcell label input");g.checked?(f.add(g.value),mn.update(T=>!0),g.parentNode.parentNode.parentNode.classList.add(gl),document.querySelector("#tgen_change_inform").innerHTML=""+f.size,r.classList.add("haschecked")):(document.querySelector(`#${_l}`).checked=!1,f.delete(g.value),document.querySelector("#tgen_change_inform").innerHTML=""+f.size,f.size==0&&(mn.update(T=>!1),document.querySelector("#tgen_change_inform").innerHTML="",r.classList.remove("haschecked")),g.parentNode.parentNode.parentNode.classList.remove(gl))},_=g=>{let r=g.currentTarget,T=document.getElementsByName(i);if(r.checked)for(let A of T)A.checked=!0,p(A);else for(let A of T)A.checked=!1,p(A)},v=g=>{const r={name:"Наименование",address:"Адрес",inn:"ИНН",kpp:"КПП",ogrn:"ОГРН",bank:"Банк",bik:"БИК",pay_account:"Номер счёта",kor_account:"Корр. счёт",phone:"Телефон",number:"Номер",date:"Дата",city:"Город",truck:"Авто",spec_notes:"Особые отметки",destination_address:"Адрес назначения",text:"Условия договора",sender:"Отправитель",receiver:"Получатель",payer:"Плательщик",created:" ",modified:" ",document:"Документ",doc_sum:"Сумма"};return r[g]?r[g]:g};function h(g){return a?a(g):JSON.parse(JSON.stringify(g,o))}class y{constructor(r=!0,T="",A=void 0,q=!0,V="",Q=void 0){this.item1=T,this.minus1=r,this.tag1=A,this.item2=V,this.minus2=q,this.tag2=Q}add(r,T,A){return T!==this.item1&&(this.tag2&&(this.tag2.setAttribute("state",0),this.tag2.querySelector("i").className="fa-light fa-sort"),this.item2=this.item1,this.minus2=this.minus1,this.tag2=this.tag1,this.item1=T,this.tag1=A,A.style.color="chocolate",this.tag2&&(this.tag2.style.color="grey")),this.minus1=r,this.str()}clear(){return this.tag1&&(this.item1=this.item2="",this.minus1=this.minus2=!0,this.tag2&&(this.tag2.setAttribute("state",0),this.tag2.querySelector("i").className="fa-light fa-sort"),this.tag1.setAttribute("state",0),this.tag1.querySelector("i").className="fa-light fa-sort",this.tag1=this.tag2=void 0),""}str(){const r=this.minus1?"-":"",T=this.minus2?"-":"";let A=this.item1?"&o="+r+this.item1:"",q=this.item2?"&o="+T+this.item2:"";return A+q}has(r){return this.item1===r||this.item2===r}reverse(){this.item1&&(this.minus1=!this.minus1)}}class I{constructor(){this.data={}}add(r,T=""){this.data[r]=T}del(r){this.add(r,"")}str(){let r="";for(let T in this.data)r+=this.data[T]?"&"+T+"="+this.data[T]:"";return r}}let k=new I,D=new y;async function F(){const g="&q="+jn,r=c?"&s="+c:"";let T=`${g}${r}${D.str()}${k.str()}`;T=T?T.replace("&","?"):"";const A=await fetch(`${s}${T}`).then(q=>q.json());return c=A.length<jn?-1:c+jn,h(A)}class C{constructor(r="",T="td",A={}){this.tagname=T,this.element=Le(T,A),r&&(this.element.innerHTML=r)}append(r){this.element.appendChild(r)}}class H{constructor(r={}){it(this,"appendCells",r=>{const T="<a href='"+l+r.id+"'>"+r[Object.keys(r)[1]]+"</a>";for(const A in r)if(A==="id"){const q=Le("input",{type:"checkbox",name:i,value:r[A]});q.addEventListener("change",S);const V=Le("label");V.appendChild(q);const Q=new C("","td",{class:"firstcell"});Q.append(V),this.append(Q.element)}else{const q=new C(r[A]);this.append(q.element)}this.element.children[1].innerHTML=T});it(this,"appendThCells",r=>{for(const T in r){const A=Le("div",{class:"field has-addons"});let q=Le("div",{class:"control is-expanded"});const V=Le("input",{class:"input is-small",type:"search",placeholder:v(T),name:T});V.addEventListener("change",N),q.appendChild(V),A.appendChild(q),q=Le("a",{class:"control",name:T,state:0}),A.appendChild(q);const Q=Le("span",{class:"icon"});q.appendChild(Q),Q.appendChild(Le("i",{class:"fa-light fa-sort"}));const Z=new C("","th");Z.append(A),this.append(Z.element),q.addEventListener("click",L)}});this.element=Le("tr",r)}append(r){this.element.appendChild(r)}}function L(g){const r=g.currentTarget,T=r.getAttribute("state"),A=r.getAttribute("name"),q=r.querySelector("i"),V="fa-light fa-sort-down",Q="fa-light fa-sort-up",Z="fa-light fa-sort";r.preventDefault,T==0?(D.add(!1,A,r),r.setAttribute("state",1),q.className=V):T==1?(D.add(!0,A,r),r.setAttribute("state",2),q.className=Q):(D.clear(),r.setAttribute("state",0),q.className=Z),U()}function N(g){const r=g.currentTarget;k.add(r.name,r.value),U()}const Y=new IntersectionObserver(X,{root:document.querySelector("#tablegen_id"),threshold:.5});let W=!1;const te=Le("tbody");async function G(){const g=document.querySelector("#T_gen"),r=Le("thead"),T=new H,A=await F(),q=Le("input",{type:"checkbox",id:_l});q.addEventListener("change",_);const V=Le("label");V.appendChild(q);const Q=new C("","th",{class:"firstcell"});Q.append(V),T.append(Q.element);const Z={...A[0]};delete Z.id,T.appendThCells(Z),r.appendChild(T.element),g.appendChild(r),g.appendChild(te),R(A),setTimeout(()=>Y.observe(document.querySelector("#observer_target")),200),W=!0,document.querySelector("#tgen_change_inform").innerHTML=""}async function U(){const r=document.querySelector("#T_gen").querySelector("tbody");r.innerHTML="",c=0,document.querySelector("#observer_target").innerHTML="...";const T=await F();R(T),!W&&(setTimeout(()=>Y.observe(document.querySelector("#observer_target")),200),W=!0)}function R(g){for(const r of g){const T=new H;T.appendCells(r),te.appendChild(T.element)}}function X(g,r){const T=document.querySelector("#observer_target");if(c===-1){r.unobserve(T),W=!1,T.innerHTML="Конец списка";return}g.forEach(async A=>{if(A.isIntersecting){const q=await F();R(q)}}),r.unobserve(T),setTimeout(()=>r.observe(T),200)}return Hn(G),e.$$set=g=>{"href"in g&&n(0,l=g.href),"checkbox_name"in g&&n(1,i=g.checkbox_name),"url"in g&&n(2,s=g.url),"fields"in g&&n(3,o=g.fields),"parseData"in g&&n(4,a=g.parseData)},[l,i,s,o,a]}class Fs extends Qe{constructor(t){super(),Ge(this,t,Is,Ts,Ke,{href:0,checkbox_name:1,url:2,fields:3,parseData:4})}}function Cs(e){let t,n,l,i,s,o,a,c,f;const S=e[4].default,p=St(S,e,e[3],null);return{c(){t=b("div"),n=b("div"),l=O(),i=b("div"),p&&p.c(),s=O(),o=b("button"),m(n,"class","modal-background"),m(i,"class","modal-content"),m(i,"style",e[2]),m(o,"class","modal-close is-large"),m(o,"aria-label","close"),m(t,"class","modal"),m(t,"style",e[1]),ie(t,"is-active",e[0])},m(_,v){J(_,t,v),d(t,n),d(t,l),d(t,i),p&&p.m(i,null),d(t,s),d(t,o),a=!0,c||(f=P(o,"click",e[5]),c=!0)},p(_,[v]){p&&p.p&&(!a||v&8)&&It(p,S,_,_[3],a?Tt(S,_[3],v,null):Ft(_[3]),null),(!a||v&4)&&m(i,"style",_[2]),(!a||v&2)&&m(t,"style",_[1]),(!a||v&1)&&ie(t,"is-active",_[0])},i(_){a||(ee(p,_),a=!0)},o(_){se(p,_),a=!1},d(_){_&&j(t),p&&p.d(_),c=!1,f()}}}function Ls(e,t,n){let{$$slots:l={},$$scope:i}=t,{active:s=!1}=t,{modal_style:o=""}=t,{content_style:a=""}=t;const c=()=>n(0,s=!1);return e.$$set=f=>{"active"in f&&n(0,s=f.active),"modal_style"in f&&n(1,o=f.modal_style),"content_style"in f&&n(2,a=f.content_style),"$$scope"in f&&n(3,i=f.$$scope)},[s,o,a,i,l,c]}class Ds extends Qe{constructor(t){super(),Ge(this,t,Ls,Cs,Ke,{active:0,modal_style:1,content_style:2})}}function Ns(e){return e%4===0&&e%100!==0||e%400===0}function gn(e,t){return[31,Ns(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}function pl(e,t){let n="";if(e)for(const l of t)typeof l=="string"?n+=l:n+=l.toString(e);return n}function Jn(e,t){const n=gn(e,t),l=[];for(let i=0;i<n;i++)l.push({year:e,month:t,number:i+1});return l}function Ms(e,t){const n=e.getFullYear(),l=e.getMonth(),i=new Date(n,l,1).getDay();let s=[];const o=(i-t+7)%7;if(o>0){let S=l-1,p=n;S===-1&&(S=11,p=n-1),s=Jn(p,S).slice(-o)}s=s.concat(Jn(n,l));let a=l+1,c=n;a===12&&(a=0,c=n+1);const f=42-s.length;return s=s.concat(Jn(c,a).slice(0,f)),s}function As(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekStartsOn:1}}function Es(e={}){const t=As();return typeof e.weekStartsOn=="number"&&(t.weekStartsOn=e.weekStartsOn),e.months&&(t.months=e.months),e.weekdays&&(t.weekdays=e.weekdays),t}function bl(e,t,n){const l=e.slice();return l[29]=t[n],l[31]=n,l}function yl(e,t,n){const l=e.slice();return l[32]=t[n],l}function vl(e,t,n){const l=e.slice();return l[29]=t[n],l[36]=n,l}function kl(e,t,n){const l=e.slice();return l[37]=t[n],l}function wl(e,t,n){const l=e.slice();return l[37]=t[n],l}function Sl(e,t,n){const l=e.slice();return l[42]=t[n],l[36]=n,l}function Tl(e,t,n){const l=e.slice();return l[42]=t[n],l[36]=n,l}function Il(e){let t,n=e[42]+"",l,i;return{c(){t=b("option"),l=ge(n),t.disabled=i=new Date(e[8],e[36],gn(e[8],e[36]),23,59,59,999)<e[1]||new Date(e[8],e[36])>e[2],t.__value=e[36],ce(t,t.__value)},m(s,o){J(s,t,o),d(t,l)},p(s,o){o[0]&16&&n!==(n=s[42]+"")&&Se(l,n),o[0]&294&&i!==(i=new Date(s[8],s[36],gn(s[8],s[36]),23,59,59,999)<s[1]||new Date(s[8],s[36])>s[2])&&(t.disabled=i)},d(s){s&&j(t)}}}function Fl(e){let t,n=e[42]+"",l,i;return{c(){t=b("option"),l=ge(n),t.__value=e[36],ce(t,t.__value),t.selected=i=e[36]===e[7]},m(s,o){J(s,t,o),d(t,l)},p(s,o){o[0]&16&&n!==(n=s[42]+"")&&Se(l,n),o[0]&128&&i!==(i=s[36]===s[7])&&(t.selected=i)},d(s){s&&j(t)}}}function Cl(e){let t,n=e[37]+"",l,i;return{c(){t=b("option"),l=ge(n),t.__value=i=e[37],ce(t,t.__value)},m(s,o){J(s,t,o),d(t,l)},p(s,o){o[0]&32&&n!==(n=s[37]+"")&&Se(l,n),o[0]&32&&i!==(i=s[37])&&(t.__value=i,ce(t,t.__value))},d(s){s&&j(t)}}}function Ll(e){let t,n=e[37]+"",l,i,s;return{c(){t=b("option"),l=ge(n),t.__value=i=e[37],ce(t,t.__value),t.selected=s=e[37]===e[3].getFullYear()},m(o,a){J(o,t,a),d(t,l)},p(o,a){a[0]&32&&n!==(n=o[37]+"")&&Se(l,n),a[0]&32&&i!==(i=o[37])&&(t.__value=i,ce(t,t.__value)),a[0]&40&&s!==(s=o[37]===o[3].getFullYear())&&(t.selected=s)},d(o){o&&j(t)}}}function qs(e){let t,n=e[4].weekdays[e[4].weekStartsOn+e[36]-7]+"",l;return{c(){t=b("div"),l=ge(n),m(t,"class","header-cell svelte-w239uu")},m(i,s){J(i,t,s),d(t,l)},p(i,s){s[0]&16&&n!==(n=i[4].weekdays[i[4].weekStartsOn+i[36]-7]+"")&&Se(l,n)},d(i){i&&j(t)}}}function Os(e){let t,n=e[4].weekdays[e[4].weekStartsOn+e[36]]+"",l;return{c(){t=b("div"),l=ge(n),m(t,"class","header-cell svelte-w239uu")},m(i,s){J(i,t,s),d(t,l)},p(i,s){s[0]&16&&n!==(n=i[4].weekdays[i[4].weekStartsOn+i[36]]+"")&&Se(l,n)},d(i){i&&j(t)}}}function Dl(e){let t;function n(s,o){return s[36]+s[4].weekStartsOn<7?Os:qs}let l=n(e),i=l(e);return{c(){i.c(),t=gt()},m(s,o){i.m(s,o),J(s,t,o)},p(s,o){l===(l=n(s))&&i?i.p(s,o):(i.d(1),i=l(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){s&&j(t),i.d(s)}}}function Nl(e){let t,n,l=e[32].number+"",i,s,o;function a(){return e[23](e[32])}return{c(){t=b("div"),n=b("span"),i=ge(l),m(n,"class","svelte-w239uu"),m(t,"class","cell svelte-w239uu"),ie(t,"disabled",!Qn(e[32],e[1],e[2])),ie(t,"selected",e[0]&&e[32].year===e[0].getFullYear()&&e[32].month===e[0].getMonth()&&e[32].number===e[0].getDate()),ie(t,"today",e[32].year===e[9].getFullYear()&&e[32].month===e[9].getMonth()&&e[32].number===e[9].getDate()),ie(t,"other-month",e[32].month!==e[7])},m(c,f){J(c,t,f),d(t,n),d(n,i),s||(o=P(t,"click",a),s=!0)},p(c,f){e=c,f[0]&64&&l!==(l=e[32].number+"")&&Se(i,l),f[0]&70&&ie(t,"disabled",!Qn(e[32],e[1],e[2])),f[0]&65&&ie(t,"selected",e[0]&&e[32].year===e[0].getFullYear()&&e[32].month===e[0].getMonth()&&e[32].number===e[0].getDate()),f[0]&576&&ie(t,"today",e[32].year===e[9].getFullYear()&&e[32].month===e[9].getMonth()&&e[32].number===e[9].getDate()),f[0]&192&&ie(t,"other-month",e[32].month!==e[7])},d(c){c&&j(t),s=!1,o()}}}function Ml(e){let t,n,l=me(e[6].slice(e[31]*7,e[31]*7+7)),i=[];for(let s=0;s<l.length;s+=1)i[s]=Nl(yl(e,l,s));return{c(){t=b("div");for(let s=0;s<i.length;s+=1)i[s].c();n=O(),m(t,"class","week svelte-w239uu")},m(s,o){J(s,t,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(t,null);d(t,n)},p(s,o){if(o[0]&4807){l=me(s[6].slice(s[31]*7,s[31]*7+7));let a;for(a=0;a<l.length;a+=1){const c=yl(s,l,a);i[a]?i[a].p(c,o):(i[a]=Nl(c),i[a].c(),i[a].m(t,n))}for(;a<i.length;a+=1)i[a].d(1);i.length=l.length}},d(s){s&&j(t),dt(i,s)}}}function Hs(e){let t,n,l,i,s,o,a,c,f,S,p,_,v,h,y,I,k,D,F,C,H,L,N,Y,W,te,G,U=me(e[4].months),R=[];for(let M=0;M<U.length;M+=1)R[M]=Il(Tl(e,U,M));let X=me(e[4].months),g=[];for(let M=0;M<X.length;M+=1)g[M]=Fl(Sl(e,X,M));let r=me(e[5]),T=[];for(let M=0;M<r.length;M+=1)T[M]=Cl(wl(e,r,M));let A=me(e[5]),q=[];for(let M=0;M<A.length;M+=1)q[M]=Ll(kl(e,A,M));let V=me(Array(7)),Q=[];for(let M=0;M<V.length;M+=1)Q[M]=Dl(vl(e,V,M));let Z=me(Array(6)),ne=[];for(let M=0;M<Z.length;M+=1)ne[M]=Ml(bl(e,Z,M));return{c(){t=b("div"),n=b("div"),l=b("div"),i=b("button"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',s=O(),o=b("div"),a=b("select");for(let M=0;M<R.length;M+=1)R[M].c();c=O(),f=b("select");for(let M=0;M<g.length;M+=1)g[M].c();S=O(),p=cn("svg"),_=cn("path"),v=O(),h=b("div"),y=b("select");for(let M=0;M<T.length;M+=1)T[M].c();I=O(),k=b("select");for(let M=0;M<q.length;M+=1)q[M].c();D=O(),F=cn("svg"),C=cn("path"),H=O(),L=b("button"),L.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',N=O(),Y=b("div");for(let M=0;M<Q.length;M+=1)Q[M].c();W=O();for(let M=0;M<ne.length;M+=1)ne[M].c();m(i,"type","button"),m(i,"class","page-button svelte-w239uu"),m(i,"tabindex","-1"),m(a,"class","svelte-w239uu"),m(f,"class","dummy-select svelte-w239uu"),m(f,"tabindex","-1"),m(_,"d","M6 0l12 12-12 12z"),m(_,"transform","rotate(90, 12, 12)"),m(p,"xmlns","http://www.w3.org/2000/svg"),m(p,"width","24"),m(p,"height","24"),m(p,"viewBox","0 0 24 24"),m(p,"class","svelte-w239uu"),m(o,"class","dropdown month svelte-w239uu"),m(y,"class","svelte-w239uu"),m(k,"class","dummy-select svelte-w239uu"),m(k,"tabindex","-1"),m(C,"d","M6 0l12 12-12 12z"),m(C,"transform","rotate(90, 12, 12)"),m(F,"xmlns","http://www.w3.org/2000/svg"),m(F,"width","24"),m(F,"height","24"),m(F,"viewBox","0 0 24 24"),m(F,"class","svelte-w239uu"),m(h,"class","dropdown year svelte-w239uu"),m(L,"type","button"),m(L,"class","page-button svelte-w239uu"),m(L,"tabindex","-1"),m(l,"class","top svelte-w239uu"),m(Y,"class","header svelte-w239uu"),m(n,"class","tab-container svelte-w239uu"),m(n,"tabindex","-1"),m(t,"class","date-time-picker svelte-w239uu"),m(t,"tabindex","0")},m(M,le){J(M,t,le),d(t,n),d(n,l),d(l,i),d(l,s),d(l,o),d(o,a);for(let w=0;w<R.length;w+=1)R[w]&&R[w].m(a,null);Cn(a,e[7]),d(o,c),d(o,f);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(f,null);d(o,S),d(o,p),d(p,_),d(l,v),d(l,h),d(h,y);for(let w=0;w<T.length;w+=1)T[w]&&T[w].m(y,null);Cn(y,e[8]),d(h,I),d(h,k);for(let w=0;w<q.length;w+=1)q[w]&&q[w].m(k,null);d(h,D),d(h,F),d(F,C),d(l,H),d(l,L),d(n,N),d(n,Y);for(let w=0;w<Q.length;w+=1)Q[w]&&Q[w].m(Y,null);d(n,W);for(let w=0;w<ne.length;w+=1)ne[w]&&ne[w].m(n,null);te||(G=[P(i,"click",e[19]),P(a,"keydown",e[14]),P(a,"input",e[20]),P(y,"input",e[21]),P(y,"keydown",e[13]),P(L,"click",e[22]),P(t,"focusout",e[18]),P(t,"keydown",e[15])],te=!0)},p(M,le){if(le[0]&278){U=me(M[4].months);let w;for(w=0;w<U.length;w+=1){const re=Tl(M,U,w);R[w]?R[w].p(re,le):(R[w]=Il(re),R[w].c(),R[w].m(a,null))}for(;w<R.length;w+=1)R[w].d(1);R.length=U.length}if(le[0]&128&&Cn(a,M[7]),le[0]&144){X=me(M[4].months);let w;for(w=0;w<X.length;w+=1){const re=Sl(M,X,w);g[w]?g[w].p(re,le):(g[w]=Fl(re),g[w].c(),g[w].m(f,null))}for(;w<g.length;w+=1)g[w].d(1);g.length=X.length}if(le[0]&32){r=me(M[5]);let w;for(w=0;w<r.length;w+=1){const re=wl(M,r,w);T[w]?T[w].p(re,le):(T[w]=Cl(re),T[w].c(),T[w].m(y,null))}for(;w<T.length;w+=1)T[w].d(1);T.length=r.length}if(le[0]&288&&Cn(y,M[8]),le[0]&40){A=me(M[5]);let w;for(w=0;w<A.length;w+=1){const re=kl(M,A,w);q[w]?q[w].p(re,le):(q[w]=Ll(re),q[w].c(),q[w].m(k,null))}for(;w<q.length;w+=1)q[w].d(1);q.length=A.length}if(le[0]&16){V=me(Array(7));let w;for(w=0;w<V.length;w+=1){const re=vl(M,V,w);Q[w]?Q[w].p(re,le):(Q[w]=Dl(re),Q[w].c(),Q[w].m(Y,null))}for(;w<Q.length;w+=1)Q[w].d(1);Q.length=V.length}if(le[0]&4807){Z=me(Array(6));let w;for(w=0;w<Z.length;w+=1){const re=bl(M,Z,w);ne[w]?ne[w].p(re,le):(ne[w]=Ml(re),ne[w].c(),ne[w].m(n,null))}for(;w<ne.length;w+=1)ne[w].d(1);ne.length=Z.length}},i:fe,o:fe,d(M){M&&j(t),dt(R,M),dt(g,M),dt(T,M),dt(q,M),dt(Q,M),dt(ne,M),te=!1,be(G)}}}function At(e){return new Date(e.getTime())}function Wn(e,t,n){return e>n?At(n):e<t?At(t):At(e)}function Al(e,t){let n=[];for(let l=e.getFullYear();l<=t.getFullYear();l++)n.push(l);return n}function Qn(e,t,n){const l=new Date(e.year,e.month,e.number),i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=new Date(n.getFullYear(),n.getMonth(),n.getDate());return l>=i&&l<=s}function Bs(e,t,n){let l,i,s,o;const a=pn();let{value:c=null}=t;function f(r){r.getTime()!==(c==null?void 0:c.getTime())&&(n(3,y=Wn(r,v,h)),n(0,c=At(y)))}function S(r){n(3,y=Wn(r,v,h)),!D&&c&&f(y)}const p=new Date,_=new Date;let{min:v=new Date(_.getFullYear()-20,0,1)}=t,{max:h=new Date(_.getFullYear(),11,31,23,59,59,999)}=t,y=At(c||Wn(_,v,h)),I=Al(v,h),{locale:k={}}=t,{browseWithoutSelecting:D=!1}=t;function F(r){y.setFullYear(r),S(y)}function C(r){let T=y.getFullYear();r===12?(r=0,T++):r===-1&&(r=11,T--);const A=gn(T,r),q=Math.min(y.getDate(),A);S(new Date(T,r,q,y.getHours(),y.getMinutes(),y.getSeconds(),y.getMilliseconds()))}function H(r){Qn(r,v,h)&&(y.setFullYear(0),y.setMonth(0),y.setDate(1),y.setFullYear(r.year),y.setMonth(r.month),y.setDate(r.number),f(y),a("select"))}function L(r){if(r.shiftKey&&r.key==="ArrowUp")F(y.getFullYear()-1);else if(r.shiftKey&&r.key==="ArrowDown")F(y.getFullYear()+1);else if(r.shiftKey&&r.key==="ArrowLeft")C(y.getMonth()-1);else if(r.shiftKey&&r.key==="ArrowRight")C(y.getMonth()+1);else return!1;return r.preventDefault(),!0}function N(r){if(r.shiftKey||r.altKey){L(r);return}else if(r.key==="ArrowUp")F(y.getFullYear()-1);else if(r.key==="ArrowDown")F(y.getFullYear()+1);else if(r.key==="ArrowLeft")C(y.getMonth()-1);else if(r.key==="ArrowRight")C(y.getMonth()+1);else{L(r);return}r.preventDefault()}function Y(r){if(r.shiftKey||r.altKey){L(r);return}else if(r.key==="ArrowUp"||r.key==="ArrowLeft")C(y.getMonth()-1);else if(r.key==="ArrowDown"||r.key==="ArrowRight")C(y.getMonth()+1);else{L(r);return}r.preventDefault()}function W(r){var A;let T=r.shiftKey||r.altKey;if(((A=r.target)==null?void 0:A.tagName)!=="SELECT"){if(T){L(r);return}else if(r.key==="ArrowUp")y.setDate(y.getDate()-7),f(y);else if(r.key==="ArrowDown")y.setDate(y.getDate()+7),f(y);else if(r.key==="ArrowLeft")y.setDate(y.getDate()-1),f(y);else if(r.key==="ArrowRight")y.setDate(y.getDate()+1),f(y);else if(r.key==="Enter")f(y),a("select");else return;r.preventDefault()}}function te(r){pi.call(this,e,r)}const G=()=>C(y.getMonth()-1),U=r=>C(parseInt(r.currentTarget.value)),R=r=>F(parseInt(r.currentTarget.value)),X=()=>C(y.getMonth()+1),g=r=>H(r);return e.$$set=r=>{"value"in r&&n(0,c=r.value),"min"in r&&n(1,v=r.min),"max"in r&&n(2,h=r.max),"locale"in r&&n(16,k=r.locale),"browseWithoutSelecting"in r&&n(17,D=r.browseWithoutSelecting)},e.$$.update=()=>{e.$$.dirty[0]&7&&(c&&c>h?f(h):c&&c<v&&f(v)),e.$$.dirty[0]&131081&&y.getTime()!==(c==null?void 0:c.getTime())&&!D&&n(3,y=c?At(c):y),e.$$.dirty[0]&6&&n(5,I=Al(v,h)),e.$$.dirty[0]&65536&&n(4,l=Es(k)),e.$$.dirty[0]&8&&n(8,i=y.getFullYear()),e.$$.dirty[0]&8&&n(7,s=y.getMonth()),e.$$.dirty[0]&24&&n(6,o=Ms(y,l.weekStartsOn))},[c,v,h,y,l,I,o,s,i,p,F,C,H,N,Y,W,k,D,te,G,U,R,X,g]}class Ps extends Qe{constructor(t){super(),Ge(this,t,Bs,Hs,Ke,{value:0,min:1,max:2,locale:16,browseWithoutSelecting:17},null,[-1,-1])}}function El(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function vi(e){const t=e-1;return t*t*t+1}function ql(e,{delay:t=0,duration:n=400,easing:l=$n}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:l,css:s=>`opacity: ${s*i}`}}function Ol(e,{delay:t=0,duration:n=400,easing:l=vi,x:i=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(e),c=+a.opacity,f=a.transform==="none"?"":a.transform,S=c*(1-o),[p,_]=dl(i),[v,h]=dl(s);return{delay:t,duration:n,easing:l,css:(y,I)=>`
			transform: ${f} translate(${(1-y)*p}${_}, ${(1-y)*v}${h});
			opacity: ${c-S*I}`}}function Hl(e,t,n){let l="",i=!0;n=n||new Date(2020,0,1,0,0,0,0);let s=n.getFullYear(),o=n.getMonth(),a=n.getDate(),c=n.getHours(),f=n.getMinutes(),S=n.getSeconds();const p=n.getMilliseconds();function _(I){for(let k=0;k<I.length;k++)if(e.startsWith(I[k]))e=e.slice(1);else{i=!1,e.length===0&&(l=I.slice(k));return}}function v(I,k,D){const F=e.match(I);if(F!=null&&F[0]){e=e.slice(F[0].length);const C=parseInt(F[0]);return C>D||C<k?(i=!1,null):C}else return i=!1,null}function h(I){if(typeof I=="string")_(I);else if(I.id==="yy"){const k=v(/^[0-9]{2}/,0,99);k!==null&&(s=2e3+k)}else if(I.id==="yyyy"){const k=v(/^[0-9]{4}/,0,9999);k!==null&&(s=k)}else if(I.id==="MM"){const k=v(/^[0-9]{2}/,1,12);k!==null&&(o=k-1)}else if(I.id==="dd"){const k=v(/^[0-9]{2}/,1,31);k!==null&&(a=k)}else if(I.id==="HH"){const k=v(/^[0-9]{2}/,0,23);k!==null&&(c=k)}else if(I.id==="mm"){const k=v(/^[0-9]{2}/,0,59);k!==null&&(f=k)}else if(I.id==="ss"){const k=v(/^[0-9]{2}/,0,59);k!==null&&(S=k)}}for(const I of t)if(h(I),!i)break;const y=gn(s,o);return a>y&&(i=!1),{date:i?new Date(s,o,a,c,f,S,p):null,missingPunctuation:l}}function an(e){return("0"+e.toString()).slice(-2)}const Rs=[{id:"yyyy",toString:e=>e.getFullYear().toString()},{id:"yy",toString:e=>e.getFullYear().toString().slice(-2)},{id:"MM",toString:e=>an(e.getMonth()+1)},{id:"dd",toString:e=>an(e.getDate())},{id:"HH",toString:e=>an(e.getHours())},{id:"mm",toString:e=>an(e.getMinutes())},{id:"ss",toString:e=>an(e.getSeconds())}];function Ks(e){for(const t of Rs)if(e.startsWith(t.id))return t}function Bl(e){const t=[];for(;e.length>0;){const n=Ks(e);n?(t.push(n),e=e.slice(n.id.length)):typeof t[t.length-1]=="string"?(t[t.length-1]+=e[0],e=e.slice(1)):(t.push(e[0]),e=e.slice(1))}return t}function Pl(e){let t,n,l,i,s;function o(c){e[23](c)}let a={min:e[3],max:e[4],locale:e[8],browseWithoutSelecting:e[9]};return e[11]!==void 0&&(a.value=e[11]),n=new Ps({props:a}),Re.push(()=>qt(n,"value",o)),n.$on("focusout",e[14]),n.$on("select",e[16]),{c(){t=b("div"),Pe(n.$$.fragment),m(t,"class","picker svelte-1bsxr9h"),ie(t,"visible",e[2])},m(c,f){J(c,t,f),qe(n,t,null),s=!0},p(c,f){e=c;const S={};f&8&&(S.min=e[3]),f&16&&(S.max=e[4]),f&256&&(S.locale=e[8]),f&512&&(S.browseWithoutSelecting=e[9]),!l&&f&2048&&(l=!0,S.value=e[11],Et(()=>l=!1)),n.$set(S),(!s||f&4)&&ie(t,"visible",e[2])},i(c){s||(ee(n.$$.fragment,c),c&&en(()=>{s&&(i||(i=qn(t,Ol,{duration:80,easing:El,y:-5},!0)),i.run(1))}),s=!0)},o(c){se(n.$$.fragment,c),c&&(i||(i=qn(t,Ol,{duration:80,easing:El,y:-5},!1)),i.run(0)),s=!1},d(c){c&&j(t),Oe(n),c&&i&&i.end()}}}function Ys(e){let t,n,l,i,s,o,a,c=e[2]&&!e[6]&&Pl(e);return{c(){t=b("div"),n=b("input"),l=O(),c&&c.c(),m(n,"type","text"),n.value=e[0],m(n,"placeholder",e[5]),n.disabled=e[6],m(n,"class","svelte-1bsxr9h"),ie(n,"invalid",!e[1]),m(t,"class",i="date-time-field "+e[7]+" svelte-1bsxr9h")},m(f,S){J(f,t,S),d(t,n),d(t,l),c&&c.m(t,null),s=!0,o||(a=[P(n,"focus",e[20]),P(n,"mousedown",e[21]),P(n,"input",e[22]),P(t,"focusout",e[14]),P(t,"keydown",e[15])],o=!0)},p(f,[S]){(!s||S&1&&n.value!==f[0])&&(n.value=f[0]),(!s||S&32)&&m(n,"placeholder",f[5]),(!s||S&64)&&(n.disabled=f[6]),(!s||S&2)&&ie(n,"invalid",!f[1]),f[2]&&!f[6]?c?(c.p(f,S),S&68&&ee(c,1)):(c=Pl(f),c.c(),ee(c,1),c.m(t,null)):c&&(tn(),se(c,1,1,()=>{c=null}),nn()),(!s||S&128&&i!==(i="date-time-field "+f[7]+" svelte-1bsxr9h"))&&m(t,"class",i)},i(f){s||(ee(c),s=!0)},o(f){se(c),s=!1},d(f){f&&j(t),c&&c.d(),o=!1,be(a)}}}function zs(e,t,n){let l,i;const s=pn(),o=new Date,a=yi(null);cl(e,a,r=>n(24,i=r));const c=(()=>({subscribe:a.subscribe,set:r=>{r===null?(a.set(null),n(17,f=r)):r.getTime()!==(i==null?void 0:i.getTime())&&(a.set(r),n(17,f=r))}}))();cl(e,c,r=>n(11,l=r));let{value:f=null}=t,{min:S=new Date(o.getFullYear()-20,0,1)}=t,{max:p=new Date(o.getFullYear(),11,31,23,59,59,999)}=t,{placeholder:_="2020-12-31 23:00:00"}=t,{valid:v=!0}=t,{disabled:h=!1}=t,{class:y=""}=t,{format:I="yyyy-MM-dd HH:mm:ss"}=t,k=Bl(I),{locale:D={}}=t;function F(r,T){n(0,C=pl(r,T))}let{text:C=pl(l,k)}=t;function H(r,T){if(r.length){const A=Hl(r,T,l);A.date!==null?(n(1,v=!0),c.set(A.date)):n(1,v=!1)}else n(1,v=!0),f&&(n(17,f=null),c.set(null))}let{visible:L=!1}=t,{closeOnSelection:N=!1}=t,{browseWithoutSelecting:Y=!1}=t;function W(r){(r==null?void 0:r.currentTarget)instanceof HTMLElement&&r.relatedTarget&&r.relatedTarget instanceof Node&&r.currentTarget.contains(r.relatedTarget)||n(2,L=!1)}function te(r){r.key==="Escape"&&L?(n(2,L=!1),r.preventDefault(),r.stopPropagation()):r.key==="Enter"&&(n(2,L=!L),r.preventDefault())}function G(r){s("select",r.detail),N&&n(2,L=!1)}const U=()=>n(2,L=!0),R=()=>n(2,L=!0),X=r=>{if(r instanceof InputEvent&&r.inputType==="insertText"&&typeof r.data=="string"&&r.currentTarget.value===C+r.data){let T=Hl(C,k,l);if(T.missingPunctuation!==""&&!T.missingPunctuation.startsWith(r.data)){n(0,C=C+T.missingPunctuation+r.data);return}}n(0,C=r.currentTarget.value)};function g(r){l=r,c.set(l)}return e.$$set=r=>{"value"in r&&n(17,f=r.value),"min"in r&&n(3,S=r.min),"max"in r&&n(4,p=r.max),"placeholder"in r&&n(5,_=r.placeholder),"valid"in r&&n(1,v=r.valid),"disabled"in r&&n(6,h=r.disabled),"class"in r&&n(7,y=r.class),"format"in r&&n(18,I=r.format),"locale"in r&&n(8,D=r.locale),"text"in r&&n(0,C=r.text),"visible"in r&&n(2,L=r.visible),"closeOnSelection"in r&&n(19,N=r.closeOnSelection),"browseWithoutSelecting"in r&&n(9,Y=r.browseWithoutSelecting)},e.$$.update=()=>{e.$$.dirty&131072&&c.set(f),e.$$.dirty&262144&&n(10,k=Bl(I)),e.$$.dirty&3072&&F(l,k),e.$$.dirty&1025&&H(C,k)},[C,v,L,S,p,_,h,y,D,Y,k,l,a,c,W,te,G,f,I,N,U,R,X,g]}class Us extends Qe{constructor(t){super(),Ge(this,t,zs,Ys,Ke,{value:17,min:3,max:4,placeholder:5,valid:1,disabled:6,class:7,format:18,locale:8,text:0,visible:2,closeOnSelection:19,browseWithoutSelecting:9})}}function js(e,{from:t,to:n},l={}){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform,[o,a]=i.transformOrigin.split(" ").map(parseFloat),c=t.left+t.width*o/n.width-(n.left+o),f=t.top+t.height*a/n.height-(n.top+a),{delay:S=0,duration:p=v=>Math.sqrt(v)*120,easing:_=vi}=l;return{delay:S,duration:_n(p)?p(Math.sqrt(c*c+f*f)):p,easing:_,css:(v,h)=>{const y=h*c,I=h*f,k=v+h*t.width/n.width,D=v+h*t.height/n.height;return`transform: ${s} translate(${y}px, ${I}px) scale(${k}, ${D});`}}}const{window:Rl}=Xi,Js=e=>({noResultsText:e[0]&1024}),Kl=e=>({noResultsText:e[10]}),Ws=e=>({createText:e[0]&8192}),Yl=e=>({createText:e[13]}),Vs=e=>({loadingText:e[0]&2048}),zl=e=>({loadingText:e[11]}),Xs=e=>({nbItems:e[1]&1,maxItemsToShowInList:e[0]&16}),Ul=e=>({nbItems:e[31].length,maxItemsToShowInList:e[4]});function jl(e,t,n){const l=e.slice();return l[145]=t[n],l[147]=n,l}const Gs=e=>({item:e[1]&1,label:e[1]&1}),Jl=e=>({item:e[145].item,label:e[145].highlighted?e[145].highlighted:e[145].label}),Qs=e=>({nbItems:e[1]&1,maxItemsToShowInList:e[0]&16}),Wl=e=>({nbItems:e[31].length,maxItemsToShowInList:e[4]});function Vl(e,t,n){const l=e.slice();return l[148]=t[n],l[147]=n,l}const Zs=e=>({label:e[0]&2,item:e[0]&2}),Xl=e=>({label:e[43](e[148]),item:e[148],unselectItem:e[50]});function Gl(e,t,n){const l=e.slice();return l[147]=t[n],l}function xs(e){let t,n=me(e[1]),l=[];for(let i=0;i<n.length;i+=1)l[i]=Ql(Gl(e,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=gt()},m(i,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,s);J(i,t,s)},p(i,s){if(s[0]&10|s[1]&4096){n=me(i[1]);let o;for(o=0;o<n.length;o+=1){const a=Gl(i,n,o);l[o]?l[o].p(a,s):(l[o]=Ql(a),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){i&&j(t),dt(l,i)}}}function $s(e){let t,n=e[43](e[1])+"",l,i;return{c(){t=b("option"),l=ge(n),t.__value=i=e[3](e[1],!0),ce(t,t.__value),t.selected=!0,m(t,"class","svelte-1n15yv5")},m(s,o){J(s,t,o),d(t,l)},p(s,o){o[0]&2&&n!==(n=s[43](s[1])+"")&&Se(l,n),o[0]&10&&i!==(i=s[3](s[1],!0))&&(t.__value=i,ce(t,t.__value))},d(s){s&&j(t)}}}function Ql(e){let t,n=e[43](e[147])+"",l,i,s;return{c(){t=b("option"),l=ge(n),i=O(),t.__value=s=e[3](e[147],!0),ce(t,t.__value),t.selected=!0,m(t,"class","svelte-1n15yv5")},m(o,a){J(o,t,a),d(t,l),d(t,i)},p(o,a){a[0]&2&&n!==(n=o[43](o[147])+"")&&Se(l,n),a[0]&10&&s!==(s=o[3](o[147],!0))&&(t.__value=s,ce(t,t.__value))},d(o){o&&j(t)}}}function Zl(e){let t=[],n=new Map,l,i,s=me(e[1]);const o=a=>a[3](a[148],!0);for(let a=0;a<s.length;a+=1){let c=Vl(e,s,a),f=o(c);n.set(f,t[a]=xl(f,c))}return{c(){for(let a=0;a<t.length;a+=1)t[a].c();l=gt()},m(a,c){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(a,c);J(a,l,c),i=!0},p(a,c){if(c[0]&10|c[1]&503844992|c[3]&16){s=me(a[1]),tn();for(let f=0;f<t.length;f+=1)t[f].r();t=ms(t,c,o,1,a,s,n,l.parentNode,ds,xl,l,Vl);for(let f=0;f<t.length;f+=1)t[f].a();nn()}},i(a){if(!i){for(let c=0;c<s.length;c+=1)ee(t[c]);i=!0}},o(a){for(let c=0;c<t.length;c+=1)se(t[c]);i=!1},d(a){a&&j(l);for(let c=0;c<t.length;c+=1)t[c].d(a)}}}function eo(e){let t,n,l=e[43](e[148])+"",i,s,o,a,c;function f(...S){return e[100](e[148],...S)}return{c(){t=b("div"),n=b("span"),i=ge(l),s=O(),o=b("span"),m(n,"class","tag svelte-1n15yv5"),m(o,"class","tag is-delete svelte-1n15yv5"),m(t,"class","tags has-addons svelte-1n15yv5")},m(S,p){J(S,t,p),d(t,n),d(n,i),d(t,s),d(t,o),a||(c=[P(o,"click",st(function(){_n(e[50](e[148]))&&e[50](e[148]).apply(this,arguments)})),P(o,"keypress",st(f))],a=!0)},p(S,p){e=S,p[0]&2&&l!==(l=e[43](e[148])+"")&&Se(i,l)},d(S){S&&j(t),a=!1,be(c)}}}function xl(e,t){let n,l,i,s,o=fe,a,c,f;const S=t[98].tag,p=St(S,t,t[97],Xl),_=p||eo(t);function v(...k){return t[101](t[147],...k)}function h(...k){return t[102](t[147],...k)}function y(...k){return t[103](t[147],...k)}function I(...k){return t[104](t[147],...k)}return{key:e,first:null,c(){n=b("div"),_&&_.c(),l=O(),m(n,"draggable",!0),m(n,"class","svelte-1n15yv5"),ie(n,"is-active",t[38]===t[147]),this.first=n},m(k,D){J(k,n,D),_&&_.m(n,null),d(n,l),a=!0,c||(f=[P(n,"dragstart",v),P(n,"dragover",h),P(n,"dragleave",y),P(n,"drop",I)],c=!0)},p(k,D){t=k,p?p.p&&(!a||D[0]&2|D[3]&16)&&It(p,S,t,t[97],a?Tt(S,t[97],D,Zs):Ft(t[97]),Xl):_&&_.p&&(!a||D[0]&2)&&_.p(t,a?D:[-1,-1,-1,-1,-1]),(!a||D[0]&2|D[1]&128)&&ie(n,"is-active",t[38]===t[147])},r(){s=n.getBoundingClientRect()},f(){ls(n),o(),gi(n,s)},a(){o(),o=ns(n,s,js,{duration:200})},i(k){a||(ee(_,k),k&&en(()=>{a&&(i||(i=qn(n,ql,{duration:200},!0)),i.run(1))}),a=!0)},o(k){se(_,k),k&&(i||(i=qn(n,ql,{duration:200},!1)),i.run(0)),a=!1},d(k){k&&j(n),_&&_.d(k),k&&i&&i.end(),c=!1,be(f)}}}function $l(e){let t,n,l;return{c(){t=b("span"),m(t,"class","autocomplete-clear-button svelte-1n15yv5")},m(i,s){J(i,t,s),t.innerHTML=e[8],n||(l=[P(t,"click",e[54]),P(t,"keypress",e[109])],n=!0)},p(i,s){s[0]&256&&(t.innerHTML=i[8])},d(i){i&&j(t),n=!1,be(l)}}}function to(e){let t,n;const l=e[98]["no-results"],i=St(l,e,e[97],Kl),s=i||so(e);return{c(){t=b("div"),s&&s.c(),m(t,"class","autocomplete-list-item-no-results svelte-1n15yv5")},m(o,a){J(o,t,a),s&&s.m(t,null),n=!0},p(o,a){i?i.p&&(!n||a[0]&1024|a[3]&16)&&It(i,l,o,o[97],n?Tt(l,o[97],a,Js):Ft(o[97]),Kl):s&&s.p&&(!n||a[0]&1024)&&s.p(o,n?a:[-1,-1,-1,-1,-1])},i(o){n||(ee(s,o),n=!0)},o(o){se(s,o),n=!1},d(o){o&&j(t),s&&s.d(o)}}}function no(e){let t,n,l,i;const s=e[98].create,o=St(s,e,e[97],Yl),a=o||oo(e);return{c(){t=b("div"),a&&a.c(),m(t,"class","autocomplete-list-item-create svelte-1n15yv5")},m(c,f){J(c,t,f),a&&a.m(t,null),n=!0,l||(i=[P(t,"click",e[44]),P(t,"keypress",e[114])],l=!0)},p(c,f){o?o.p&&(!n||f[0]&8192|f[3]&16)&&It(o,s,c,c[97],n?Tt(s,c[97],f,Ws):Ft(c[97]),Yl):a&&a.p&&(!n||f[0]&8192)&&a.p(c,n?f:[-1,-1,-1,-1,-1])},i(c){n||(ee(a,c),n=!0)},o(c){se(a,c),n=!1},d(c){c&&j(t),a&&a.d(c),l=!1,be(i)}}}function lo(e){let t,n;const l=e[98].loading,i=St(l,e,e[97],zl),s=i||ro(e);return{c(){t=b("div"),s&&s.c(),m(t,"class","autocomplete-list-item-loading svelte-1n15yv5")},m(o,a){J(o,t,a),s&&s.m(t,null),n=!0},p(o,a){i?i.p&&(!n||a[0]&2048|a[3]&16)&&It(i,l,o,o[97],n?Tt(l,o[97],a,Vs):Ft(o[97]),zl):s&&s.p&&(!n||a[0]&2048)&&s.p(o,n?a:[-1,-1,-1,-1,-1])},i(o){n||(ee(s,o),n=!0)},o(o){se(s,o),n=!1},d(o){o&&j(t),s&&s.d(o)}}}function io(e){let t,n,l;const i=e[98]["dropdown-header"],s=St(i,e,e[97],Wl);let o=me(e[31]),a=[];for(let _=0;_<o.length;_+=1)a[_]=ti(jl(e,o,_));const c=_=>se(a[_],1,1,()=>{a[_]=null}),f=e[98]["dropdown-footer"],S=St(f,e,e[97],Ul),p=S||fo(e);return{c(){s&&s.c(),t=O();for(let _=0;_<a.length;_+=1)a[_].c();n=O(),p&&p.c()},m(_,v){s&&s.m(_,v),J(_,t,v);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(_,v);J(_,n,v),p&&p.m(_,v),l=!0},p(_,v){if(s&&s.p&&(!l||v[0]&16|v[1]&1|v[3]&16)&&It(s,i,_,_[97],l?Tt(i,_[97],v,Qs):Ft(_[97]),Wl),v[0]&1073741840|v[1]&16793601|v[3]&16){o=me(_[31]);let h;for(h=0;h<o.length;h+=1){const y=jl(_,o,h);a[h]?(a[h].p(y,v),ee(a[h],1)):(a[h]=ti(y),a[h].c(),ee(a[h],1),a[h].m(n.parentNode,n))}for(tn(),h=o.length;h<a.length;h+=1)c(h);nn()}S?S.p&&(!l||v[0]&16|v[1]&1|v[3]&16)&&It(S,f,_,_[97],l?Tt(f,_[97],v,Xs):Ft(_[97]),Ul):p&&p.p&&(!l||v[0]&4112|v[1]&1)&&p.p(_,l?v:[-1,-1,-1,-1,-1])},i(_){if(!l){ee(s,_);for(let v=0;v<o.length;v+=1)ee(a[v]);ee(p,_),l=!0}},o(_){se(s,_),a=a.filter(Boolean);for(let v=0;v<a.length;v+=1)se(a[v]);se(p,_),l=!1},d(_){_&&(j(t),j(n)),s&&s.d(_),dt(a,_),p&&p.d(_)}}}function so(e){let t;return{c(){t=ge(e[10])},m(n,l){J(n,t,l)},p(n,l){l[0]&1024&&Se(t,n[10])},d(n){n&&j(t)}}}function oo(e){let t;return{c(){t=ge(e[13])},m(n,l){J(n,t,l)},p(n,l){l[0]&8192&&Se(t,n[13])},d(n){n&&j(t)}}}function ro(e){let t;return{c(){t=ge(e[11])},m(n,l){J(n,t,l)},p(n,l){l[0]&2048&&Se(t,n[11])},d(n){n&&j(t)}}}function ei(e){let t,n,l,i;const s=e[98].item,o=St(s,e,e[97],Jl),a=o||co(e);function c(){return e[111](e[145])}function f(...p){return e[112](e[145],...p)}function S(){return e[113](e[147])}return{c(){t=b("div"),a&&a.c(),m(t,"class","autocomplete-list-item svelte-1n15yv5"),ie(t,"selected",e[147]===e[30]),ie(t,"confirmed",e[55](e[145].item))},m(p,_){J(p,t,_),a&&a.m(t,null),n=!0,l||(i=[P(t,"click",c),P(t,"keypress",f),P(t,"pointerenter",S)],l=!0)},p(p,_){e=p,o?o.p&&(!n||_[1]&1|_[3]&16)&&It(o,s,e,e[97],n?Tt(s,e[97],_,Gs):Ft(e[97]),Jl):a&&a.p&&(!n||_[1]&1)&&a.p(e,n?_:[-1,-1,-1,-1,-1]),(!n||_[0]&1073741824)&&ie(t,"selected",e[147]===e[30]),(!n||_[1]&16777217)&&ie(t,"confirmed",e[55](e[145].item))},i(p){n||(ee(a,p),n=!0)},o(p){se(a,p),n=!1},d(p){p&&j(t),a&&a.d(p),l=!1,be(i)}}}function ao(e){let t,n=e[145].label+"",l;return{c(){t=new mi(!1),l=gt(),t.a=l},m(i,s){t.m(n,i,s),J(i,l,s)},p(i,s){s[1]&1&&n!==(n=i[145].label+"")&&t.p(n)},d(i){i&&(j(l),t.d())}}}function uo(e){let t,n=e[145].highlighted+"",l;return{c(){t=new mi(!1),l=gt(),t.a=l},m(i,s){t.m(n,i,s),J(i,l,s)},p(i,s){s[1]&1&&n!==(n=i[145].highlighted+"")&&t.p(n)},d(i){i&&(j(l),t.d())}}}function co(e){let t;function n(s,o){return s[145].highlighted?uo:ao}let l=n(e),i=l(e);return{c(){i.c(),t=gt()},m(s,o){i.m(s,o),J(s,t,o)},p(s,o){l===(l=n(s))&&i?i.p(s,o):(i.d(1),i=l(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){s&&j(t),i.d(s)}}}function ti(e){let t,n,l=e[145]&&(e[4]<=0||e[147]<e[4])&&ei(e);return{c(){l&&l.c(),t=gt()},m(i,s){l&&l.m(i,s),J(i,t,s),n=!0},p(i,s){i[145]&&(i[4]<=0||i[147]<i[4])?l?(l.p(i,s),s[0]&16|s[1]&1&&ee(l,1)):(l=ei(i),l.c(),ee(l,1),l.m(t.parentNode,t)):l&&(tn(),se(l,1,1,()=>{l=null}),nn())},i(i){n||(ee(l),n=!0)},o(i){se(l),n=!1},d(i){i&&j(t),l&&l.d(i)}}}function ni(e){let t,n=e[12]&&li(e);return{c(){n&&n.c(),t=gt()},m(l,i){n&&n.m(l,i),J(l,t,i)},p(l,i){l[12]?n?n.p(l,i):(n=li(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){l&&j(t),n&&n.d(l)}}}function li(e){let t,n,l=e[31].length-e[4]+"",i,s,o;return{c(){t=b("div"),n=ge("..."),i=ge(l),s=O(),o=ge(e[12]),m(t,"class","autocomplete-list-item-no-results svelte-1n15yv5")},m(a,c){J(a,t,c),d(t,n),d(t,i),d(t,s),d(t,o)},p(a,c){c[0]&16|c[1]&1&&l!==(l=a[31].length-a[4]+"")&&Se(i,l),c[0]&4096&&Se(o,a[12])},d(a){a&&j(t)}}}function fo(e){let t,n=e[4]>0&&e[31].length>e[4]&&ni(e);return{c(){n&&n.c(),t=gt()},m(l,i){n&&n.m(l,i),J(l,t,i)},p(l,i){l[4]>0&&l[31].length>l[4]?n?n.p(l,i):(n=ni(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){l&&j(t),n&&n.d(l)}}}function mo(e){let t,n,l,i,s,o,a,c,f,S,p,_,v,h,y,I,k,D,F,C;function H(g,r){if(!g[5]&&g[32])return $s;if(g[5]&&g[32])return xs}let L=H(e),N=L&&L(e),Y=e[5]&&e[32]&&Zl(e),W=[{type:"search"},{class:a=(e[16]?e[16]:"")+" "+(e[27]?"":"input autocomplete-input")},{id:c=e[17]?e[17]:""},{autocomplete:f=e[22]?"on":e[23]},{placeholder:e[14]},{name:e[18]},{disabled:e[26]},{required:e[28]},{title:e[21]},{readOnly:S=e[24]||e[39]},{tabindex:e[29]},e[60]],te={};for(let g=0;g<W.length;g+=1)te=ht(te,W[g]);let G=e[40]&&$l(e);const U=[io,lo,no,to],R=[];function X(g,r){return g[31]&&g[31].length>0?0:g[36]&&g[11]?1:g[6]?2:g[10]?3:-1}return~(h=X(e))&&(y=R[h]=U[h](e)),{c(){t=b("div"),n=b("select"),N&&N.c(),l=O(),i=b("div"),Y&&Y.c(),s=O(),o=b("input"),p=O(),G&&G.c(),_=O(),v=b("div"),y&&y.c(),m(n,"name",e[19]),m(n,"id",e[20]),n.multiple=e[5],m(n,"class","svelte-1n15yv5"),ml(o,te),ie(o,"svelte-1n15yv5",!0),m(i,"class","input-container svelte-1n15yv5"),m(v,"class",I=(e[25]?e[25]:"")+" autocomplete-list "+(e[41]?"":"hidden")+" is-fullwidth svelte-1n15yv5"),m(t,"class",k=(e[15]?e[15]:"")+" autocomplete "+e[42]+" svelte-1n15yv5"),ie(t,"hide-arrow",e[7]||!e[0].length),ie(t,"is-multiple",e[5]),ie(t,"show-clear",e[40]),ie(t,"is-loading",e[9]&&e[36])},m(g,r){J(g,t,r),d(t,n),N&&N.m(n,null),d(t,l),d(t,i),Y&&Y.m(i,null),d(i,s),d(i,o),o.autofocus&&o.focus(),e[105](o),ce(o,e[2]),d(i,p),G&&G.m(i,null),e[110](i),d(t,_),d(t,v),~h&&R[h].m(v,null),e[115](v),D=!0,F||(C=[P(Rl,"click",e[46]),P(Rl,"scroll",e[99]),P(o,"input",e[106]),P(o,"input",e[49]),P(o,"focus",e[52]),P(o,"blur",e[53]),P(o,"keydown",e[47]),P(o,"click",e[51]),P(o,"keypress",e[48]),P(o,"dragover",e[107]),P(o,"drop",e[108])],F=!0)},p(g,r){L===(L=H(g))&&N?N.p(g,r):(N&&N.d(1),N=L&&L(g),N&&(N.c(),N.m(n,null))),(!D||r[0]&524288)&&m(n,"name",g[19]),(!D||r[0]&1048576)&&m(n,"id",g[20]),(!D||r[0]&32)&&(n.multiple=g[5]),g[5]&&g[32]?Y?(Y.p(g,r),r[0]&32|r[1]&2&&ee(Y,1)):(Y=Zl(g),Y.c(),ee(Y,1),Y.m(i,s)):Y&&(tn(),se(Y,1,1,()=>{Y=null}),nn()),ml(o,te=xt(W,[{type:"search"},(!D||r[0]&134283264&&a!==(a=(g[16]?g[16]:"")+" "+(g[27]?"":"input autocomplete-input")))&&{class:a},(!D||r[0]&131072&&c!==(c=g[17]?g[17]:""))&&{id:c},(!D||r[0]&12582912&&f!==(f=g[22]?"on":g[23]))&&{autocomplete:f},(!D||r[0]&16384)&&{placeholder:g[14]},(!D||r[0]&262144)&&{name:g[18]},(!D||r[0]&67108864)&&{disabled:g[26]},(!D||r[0]&268435456)&&{required:g[28]},(!D||r[0]&2097152)&&{title:g[21]},(!D||r[0]&16777216|r[1]&256&&S!==(S=g[24]||g[39]))&&{readOnly:S},(!D||r[0]&536870912)&&{tabindex:g[29]},r[1]&536870912&&g[60]])),r[0]&4&&o.value!==g[2]&&ce(o,g[2]),ie(o,"svelte-1n15yv5",!0),g[40]?G?G.p(g,r):(G=$l(g),G.c(),G.m(i,null)):G&&(G.d(1),G=null);let T=h;h=X(g),h===T?~h&&R[h].p(g,r):(y&&(tn(),se(R[T],1,1,()=>{R[T]=null}),nn()),~h?(y=R[h],y?y.p(g,r):(y=R[h]=U[h](g),y.c()),ee(y,1),y.m(v,null)):y=null),(!D||r[0]&33554432|r[1]&1024&&I!==(I=(g[25]?g[25]:"")+" autocomplete-list "+(g[41]?"":"hidden")+" is-fullwidth svelte-1n15yv5"))&&m(v,"class",I),(!D||r[0]&32768&&k!==(k=(g[15]?g[15]:"")+" autocomplete "+g[42]+" svelte-1n15yv5"))&&m(t,"class",k),(!D||r[0]&32897)&&ie(t,"hide-arrow",g[7]||!g[0].length),(!D||r[0]&32800)&&ie(t,"is-multiple",g[5]),(!D||r[0]&32768|r[1]&512)&&ie(t,"show-clear",g[40]),(!D||r[0]&33280|r[1]&32)&&ie(t,"is-loading",g[9]&&g[36])},i(g){D||(ee(Y),ee(y),D=!0)},o(g){se(Y),se(y),D=!1},d(g){g&&j(t),N&&N.d(),Y&&Y.d(),e[105](null),G&&G.d(),e[110](null),~h&&R[h].d(),e[115](null),F=!1,be(C)}}}function ho(e,t){if(typeof e!="function"){console.error("Not a function: "+e+", argument: "+t);return}let n;try{n=e(t)}catch{console.warn("Error executing Autocomplete function on value: "+t+" function: "+e)}return n}function Ln(e,t){let n=ho(e,t);return n==null&&(n=""),typeof n!="string"&&(n=n.toString()),n}function Zn(e,t){if(!e)return 0;const n=e.keywords;let l=0;return t.forEach(i=>{n.includes(i)&&l++}),l}function go(e,t,n){return Zn(t,n)-Zn(e,n)}function Dn(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function _o(e,t,n){let l,i,s,o;const a=["items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","textCleanFunction","clearSelection","beforeChange","onChange","onFocus","onBlur","onCreate","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","multiple","create","ignoreAccents","matchAllKeywords","sortByMatchedKeywords","itemFilterFunction","itemSortFunction","lock","delay","localFiltering","localSorting","cleanUserText","lowercaseKeywords","closeOnBlur","orderableSelection","hideArrow","showClear","clearText","showLoadingIndicator","noResultsText","loadingText","moreItemsText","createText","placeholder","className","inputClassName","inputId","name","selectName","selectId","title","html5autocomplete","autocompleteOffValue","readonly","dropdownClassName","disabled","noInputStyles","required","debug","tabindex","selectedItem","value","highlightedItem","text","highlightFilter"];let c=fl(t,a),{$$slots:f={},$$scope:S}=t,{items:p=[]}=t,{searchFunction:_=!1}=t,{labelFieldName:v=void 0}=t,{keywordsFieldName:h=v}=t,{valueFieldName:y=void 0}=t,{labelFunction:I=function(u){return u==null?"":v?u[v]:u}}=t,{keywordsFunction:k=function(u){return u==null?"":h?u[h]:I(u)}}=t,{valueFunction:D=function(u,E=!1){return u==null?u:!X||E?y?u[y]:u:u.map(B=>y?B[y]:B)}}=t,{keywordsCleanFunction:F=function(u){return u}}=t,{textCleanFunction:C=function(u){return u}}=t;const H=()=>{n(2,ae=""),n(1,x=X?[]:void 0),n(0,p=[]),_e=[],setTimeout(()=>{Fe.focus(),ft()})};let{beforeChange:L=function(u,E){return!0}}=t,{onChange:N=function(u){}}=t,{onFocus:Y=function(){}}=t,{onBlur:W=function(){ae==""&&n(1,x=X?[]:void 0)}}=t,{onCreate:te=function(u){K&&console.log("onCreate: "+u)}}=t,{selectFirstIfEmpty:G=!1}=t,{minCharactersToSearch:U=1}=t,{maxItemsToShowInList:R=0}=t,{multiple:X=!1}=t,{create:g=!1}=t,{ignoreAccents:r=!0}=t,{matchAllKeywords:T=!0}=t,{sortByMatchedKeywords:A=!1}=t,{itemFilterFunction:q=void 0}=t,{itemSortFunction:V=void 0}=t,{lock:Q=!1}=t,{delay:Z=0}=t,{localFiltering:ne=!0}=t,{localSorting:M=!0}=t,{cleanUserText:le=!0}=t,{lowercaseKeywords:w=!0}=t,{closeOnBlur:re=!1}=t,{orderableSelection:ve=!1}=t,{hideArrow:Ze=!1}=t,{showClear:De=!1}=t,{clearText:_t="&#10006;"}=t,{showLoadingIndicator:xe=!1}=t,{noResultsText:$e="No results found"}=t,{loadingText:He="Loading results..."}=t,{moreItemsText:Ie="items not shown"}=t,{createText:et="Not found, add anyway?"}=t,{placeholder:ot=void 0}=t,{className:Ne=void 0}=t,{inputClassName:Me=void 0}=t,{inputId:ye=void 0}=t,{name:pt=void 0}=t,{selectName:Ye=void 0}=t,{selectId:ze=void 0}=t,{title:Ue=void 0}=t,{html5autocomplete:Te=void 0}=t,{autocompleteOffValue:oe="off"}=t,{readonly:je=void 0}=t,{dropdownClassName:rt=void 0}=t,{disabled:at=!1}=t,{noInputStyles:tt=!1}=t,{required:ln=null}=t,{debug:K=!1}=t,{tabindex:ut=0}=t,{selectedItem:x=X?[]:void 0}=t,{value:nt=void 0}=t,{highlightedItem:Ot=void 0}=t;const Ct="sautocomplete-"+Math.floor(Math.random()*1e3);let Fe,ke,Ce,Je=!1,We=!1,ue=-1,{text:ae=void 0}=t,bt=0,de,_e=[],yt=0,he=0,Ht,Be=!1;is(()=>{Be&&Ti(),n(37,Be=!1)});function vt(u){return Ln(I,u)}function kt(u){const E=Ln(k,u);let B=Ln(F,E);return B=w?B.toLowerCase().trim():B,r&&(B=Dn(B)),K&&console.log("Extracted keywords: '"+B+"' from item: "+JSON.stringify(u)),B}function Lt(){let u;K&&(u=`Autocomplete prepare list ${ye?`(id: ${ye})`:""}`,console.time(u),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(p))),Array.isArray(p)||(console.warn("Autocomplete items / search function did not return array but",p),n(0,p=[]));const E=p?p.length:0;_e=new Array(E),E>0&&p.forEach((B,$)=>{const we=Bt(B);we===void 0&&console.log("Undefined item for: ",B),_e[$]=we}),n(31,de=_e),K&&(console.log(_e.length+" items to search"),console.timeEnd(u))}function Bt(u){return{keywords:ne?kt(u):[],label:vt(u),item:u}}function Pt(){n(61,nt=D(x)),X||n(2,ae=vt(x)),n(31,de=_e),N(x)}function Rt(u){if(u==null)return"";if(!le)return u;const E=u.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim(),B=Ln(C,E);return w?B.toLowerCase().trim():B.trim()}async function Ae(){let u;K&&(u=`Autocomplete search ${ye?`(id: ${ye})`:""}`,console.time(u),console.log("Searching user entered text: '"+ae+"'"));let E=Rt(ae);if(U>1&&E.length<U&&(E=""),n(96,bt=E.length),K&&console.log("Changed user entered text '"+ae+"' into '"+E+"'"),E===""&&(_?(n(0,p=[]),K&&console.log("User entered text is empty clear list of items")):(n(31,de=_e),K&&console.log("User entered text is empty set the list of items to all items")),il())){K&&console.timeEnd(u);return}if(!_)lt(E);else{yt=yt+1;const B=yt;if(n(36,We=!0),_.constructor.name==="AsyncGeneratorFunction"){for await(const $ of _(E,R)){if(B<he)return!1;B>he&&n(0,p=[]),he=B,n(0,p=[...p,...$]),lt(E)}he<B&&(he=B,n(0,p=[]),lt(E))}else{let $=await _(E,R);if(B<he)return!1;he=B,n(0,p=$),lt(E)}n(36,We=!1)}K&&(console.timeEnd(u),console.log("Search found "+de.length+" items"))}function bn(u,E){const B=Zn(u,E);return T?B>=E.length:B>0}function lt(u=""){Lt();const B=(r?Dn(u):u).split(/\s+/g).filter(Ee=>Ee!=="");let $;ne?(q?$=_e.filter(Ee=>q(Ee.item,B)):$=_e.filter(Ee=>bn(Ee,B)),M&&(V?$=$.sort((Ee,sn)=>V(Ee.item,sn.item,B)):A&&($=$.sort((Ee,sn)=>go(Ee,sn,B))))):$=_e;const we=ol(B,"label");return n(31,de=$.map(we)),il(),!0}function Dt(u){let E;if(K&&console.log("createdItem",u),typeof u<"u"){Lt(),n(31,de=_e);let B=nl(u,de);B<=0&&(n(0,p=[u]),Lt(),n(31,de=_e),B=0),B>=0&&(n(30,ue=B),E=de[ue])}return E}function Nt(u){if(K&&console.log("selectListItem",u),typeof u>"u"&&g){const B=te(ae);if(typeof B<"u"){if(typeof B.then=="function")return B.then($=>{if(typeof $<"u"){const we=Dt($);typeof we<"u"&&Nt(we)}}),!0;u=Dt(B)}}if(typeof u>"u")return K&&console.log("listItem is undefined. Can not select."),!1;if(o)return!0;const E=u.item;return L(x,E)&&(X?x?x.includes(E)?n(1,x=x.filter(B=>B!==E)):n(1,x=[...x,E]):n(1,x=[E]):(n(1,x=void 0),n(1,x=E))),!0}function Mt(){K&&console.log("selectItem",ue);const u=de[ue];Nt(u)?(K&&console.log("selectListItem true, closing"),ft(),X&&(n(2,ae=""),Fe.focus())):K&&console.log("selectListItem false, not closing")}function Kt(){K&&console.log("up"),Sn(),ue>0&&n(30,ue--,ue),ct()}function Bn(){K&&console.log("down"),Sn(),ue<de.length-1&&n(30,ue++,ue),ct()}function ct(){K&&console.log("highlight");const u=".selected";K&&console.log("Seaching DOM element: "+u+" in "+ke);const E=ke&&ke.querySelector(u);E?typeof E.scrollIntoViewIfNeeded=="function"?(K&&console.log("Scrolling selected item into view"),E.scrollIntoViewIfNeeded()):E.scrollIntoView==="function"?(K&&console.log("Scrolling selected item into view"),E.scrollIntoView()):K&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):K&&console.warn("Selected item not found to scroll into view")}function wt(u){K&&console.log("onListItemClick"),Nt(u)&&(ft(),X&&(n(2,ae=""),Fe.focus()))}function Pn(u){K&&console.log("onDocumentClick"),u.composedPath().some(E=>E.classList&&E.classList.contains(Ct))?(K&&console.log("onDocumentClick inside"),ct()):(K&&console.log("onDocumentClick outside"),ft())}function Yt(u){K&&console.log("onKeyDown");let E=u.key;E==="Tab"&&u.shiftKey&&(E="ShiftTab");const $={Tab:Je?ft:null,ShiftTab:Je?ft:null,ArrowDown:Bn.bind(this),ArrowUp:Kt.bind(this),Escape:vn.bind(this),Backspace:X&&i&&!ae?kn.bind(this):null}[E];typeof $=="function"&&$(u)}function zt(u){K&&console.log("onKeyPress"),u.key==="Enter"&&Rn(u)}function Rn(u){Je&&(u.preventDefault(),Mt())}function Ut(u){K&&console.log("onInput"),n(2,ae=u.target.value),Ht&&clearTimeout(Ht),Z?Ht=setTimeout(pe,Z):pe()}function z(u){K&&console.log("unselectItem",u),n(1,x=x.filter(E=>E!==u)),Fe.focus()}function pe(){Ae()&&(n(30,ue=0),Sn())}function yn(){K&&console.log("onInputClick"),tl()}function vn(u){K&&console.log("onEsc"),u.stopPropagation(),Je&&(Fe.focus(),ft())}function kn(u){K&&console.log("onBackspace"),z(x[x.length-1])}function wn(){K&&console.log("onFocus"),Y(),tl()}function ki(){K&&console.log("onBlur"),re&&ft(),W()}function tl(){if(K&&console.log("resetListToAllItemsAndOpen"),_&&!_e.length?Ae():ae||lt(),Sn(),x){K&&console.log("Searching currently selected item: "+JSON.stringify(x));const u=nl(x,de);u>=0&&(n(30,ue=u),ct())}}function nl(u,E){K&&console.log("Finding index for item",u);let B=-1;for(let $=0;$<E.length;$++){const we=E[$];if(typeof we>"u"){K&&console.log(`listItem ${$} is undefined. Skipping.`);continue}if(K&&console.log("Item "+$+": "+JSON.stringify(we)),u===we.item){B=$;break}}return K&&(B>=0?console.log("Found index for item: "+B):console.warn("Not found index for item: "+u)),B}function Sn(){K&&console.log("open"),!(o||ll())&&(n(37,Be=!0),n(95,Je=!0))}function ft(){K&&console.log("close"),n(95,Je=!1),n(36,We=!1),!ae&&G&&(n(30,ue=0),Mt())}function ll(){return U>0&&bt<U&&(_||bt>0)}function il(){return ll()?(ft(),!0):!1}function sl(){K&&console.log("clear"),n(2,ae=""),n(1,x=X?[]:void 0),setTimeout(()=>{Fe.focus()})}function ol(u,E){return B=>{let $=B[E];const we=Object.assign({highlighted:void 0},B);we.highlighted=$;const Ee=$.toLowerCase(),sn=r?Dn(Ee):Ee;if(u&&u.length){const In=[];for(let jt=0;jt<u.length;jt++){let Ve=u[jt];r&&(Ve=Dn(Ve));const Jt=Ve.length;let Xe=0;do if(Xe=sn.indexOf(Ve,Xe),Xe>=0){let Fn=Xe+Jt;In.push([Xe,Fn]),Xe=Fn}while(Xe!==-1)}if(In.length>0){const jt=new Set;for(let Ve=0;Ve<In.length;Ve++){const Jt=In[Ve],Xe=Jt[0],Fn=Jt[1],zi=Ee.substring(Xe,Fn);jt.add(zi)}for(let Ve of jt){if(Ve==="b")continue;const Jt=new RegExp("("+Ve+")","ig"),Xe=we.highlighted.replace(Jt,"<b>$1</b>");we.highlighted=Xe}}}return we}}function wi(u){return x?X?x.includes(u):u===x:!1}let Tn=!1;function rl(u,E){ve&&u.dataTransfer.setData("source",E)}function Kn(u,E){ve&&(u.preventDefault(),n(38,Tn=E))}function al(u,E){ve&&n(38,Tn=!1)}function Yn(u,E){if(ve){u.preventDefault(),n(38,Tn=!1);let B=parseInt(u.dataTransfer.getData("source")),$=E;B!=$&&Si(B,$)}}function Si(u,E){let B=[...x];u<E?(B.splice(E+1,0,B[u]),B.splice(u,1)):(B.splice(E,0,B[u]),B.splice(u+1,1)),n(1,x=B)}function Ti(){const{height:u}=window.visualViewport,{bottom:E,height:B}=Ce.getBoundingClientRect(),{height:$}=ke.getBoundingClientRect();E+$>u?n(34,ke.style.top=`-${B+$}px`,ke):n(34,ke.style.top="",ke)}const Ii=()=>n(37,Be=!0),Fi=(u,E)=>{E.key=="Enter"&&z(u)},Ci=(u,E)=>rl(E,u),Li=(u,E)=>Kn(E,u),Di=(u,E)=>al(),Ni=(u,E)=>Yn(E,u);function Mi(u){Re[u?"unshift":"push"](()=>{Fe=u,n(33,Fe)})}function Ai(){ae=this.value,n(2,ae)}const Ei=u=>Kn(u,x.length-1),qi=u=>Yn(u,x.length-1),Oi=u=>{u.key=="Enter"&&sl()};function Hi(u){Re[u?"unshift":"push"](()=>{Ce=u,n(35,Ce)})}const Bi=u=>wt(u),Pi=(u,E)=>{E.key=="Enter"&&wt(u)},Ri=u=>{n(30,ue=u)},Ki=u=>{u.key=="Enter"&&Mt()};function Yi(u){Re[u?"unshift":"push"](()=>{ke=u,n(34,ke)})}return e.$$set=u=>{t=ht(ht({},t),Vi(u)),n(60,c=fl(t,a)),"items"in u&&n(0,p=u.items),"searchFunction"in u&&n(63,_=u.searchFunction),"labelFieldName"in u&&n(64,v=u.labelFieldName),"keywordsFieldName"in u&&n(65,h=u.keywordsFieldName),"valueFieldName"in u&&n(66,y=u.valueFieldName),"labelFunction"in u&&n(67,I=u.labelFunction),"keywordsFunction"in u&&n(68,k=u.keywordsFunction),"valueFunction"in u&&n(3,D=u.valueFunction),"keywordsCleanFunction"in u&&n(69,F=u.keywordsCleanFunction),"textCleanFunction"in u&&n(70,C=u.textCleanFunction),"beforeChange"in u&&n(72,L=u.beforeChange),"onChange"in u&&n(73,N=u.onChange),"onFocus"in u&&n(74,Y=u.onFocus),"onBlur"in u&&n(75,W=u.onBlur),"onCreate"in u&&n(76,te=u.onCreate),"selectFirstIfEmpty"in u&&n(77,G=u.selectFirstIfEmpty),"minCharactersToSearch"in u&&n(78,U=u.minCharactersToSearch),"maxItemsToShowInList"in u&&n(4,R=u.maxItemsToShowInList),"multiple"in u&&n(5,X=u.multiple),"create"in u&&n(6,g=u.create),"ignoreAccents"in u&&n(79,r=u.ignoreAccents),"matchAllKeywords"in u&&n(80,T=u.matchAllKeywords),"sortByMatchedKeywords"in u&&n(81,A=u.sortByMatchedKeywords),"itemFilterFunction"in u&&n(82,q=u.itemFilterFunction),"itemSortFunction"in u&&n(83,V=u.itemSortFunction),"lock"in u&&n(84,Q=u.lock),"delay"in u&&n(85,Z=u.delay),"localFiltering"in u&&n(86,ne=u.localFiltering),"localSorting"in u&&n(87,M=u.localSorting),"cleanUserText"in u&&n(88,le=u.cleanUserText),"lowercaseKeywords"in u&&n(89,w=u.lowercaseKeywords),"closeOnBlur"in u&&n(90,re=u.closeOnBlur),"orderableSelection"in u&&n(91,ve=u.orderableSelection),"hideArrow"in u&&n(7,Ze=u.hideArrow),"showClear"in u&&n(92,De=u.showClear),"clearText"in u&&n(8,_t=u.clearText),"showLoadingIndicator"in u&&n(9,xe=u.showLoadingIndicator),"noResultsText"in u&&n(10,$e=u.noResultsText),"loadingText"in u&&n(11,He=u.loadingText),"moreItemsText"in u&&n(12,Ie=u.moreItemsText),"createText"in u&&n(13,et=u.createText),"placeholder"in u&&n(14,ot=u.placeholder),"className"in u&&n(15,Ne=u.className),"inputClassName"in u&&n(16,Me=u.inputClassName),"inputId"in u&&n(17,ye=u.inputId),"name"in u&&n(18,pt=u.name),"selectName"in u&&n(19,Ye=u.selectName),"selectId"in u&&n(20,ze=u.selectId),"title"in u&&n(21,Ue=u.title),"html5autocomplete"in u&&n(22,Te=u.html5autocomplete),"autocompleteOffValue"in u&&n(23,oe=u.autocompleteOffValue),"readonly"in u&&n(24,je=u.readonly),"dropdownClassName"in u&&n(25,rt=u.dropdownClassName),"disabled"in u&&n(26,at=u.disabled),"noInputStyles"in u&&n(27,tt=u.noInputStyles),"required"in u&&n(28,ln=u.required),"debug"in u&&n(93,K=u.debug),"tabindex"in u&&n(29,ut=u.tabindex),"selectedItem"in u&&n(1,x=u.selectedItem),"value"in u&&n(61,nt=u.value),"highlightedItem"in u&&n(62,Ot=u.highlightedItem),"text"in u&&n(2,ae=u.text),"$$scope"in u&&n(97,S=u.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1|e.$$.dirty[2]&2&&(_||Lt()),e.$$.dirty[0]&2&&Pt(),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1&&n(62,Ot=de&&ue&&ue>=0&&ue<de.length?de[ue].item:null),e.$$.dirty[0]&1|e.$$.dirty[3]&12&&n(41,l=Je&&(p&&p.length>0||bt>0)),e.$$.dirty[0]&34&&n(32,i=X&&x&&x.length>0||!X&&x),e.$$.dirty[0]&32|e.$$.dirty[1]&2|e.$$.dirty[2]&1077936128&&n(40,s=De||(Q||X)&&i),e.$$.dirty[1]&2|e.$$.dirty[2]&4194304&&n(39,o=Q&&i)},[p,x,ae,D,R,X,g,Ze,_t,xe,$e,He,Ie,et,ot,Ne,Me,ye,pt,Ye,ze,Ue,Te,oe,je,rt,at,tt,ln,ut,ue,de,i,Fe,ke,Ce,We,Be,Tn,o,s,l,Ct,vt,Mt,wt,Pn,Yt,zt,Ut,z,yn,wn,ki,sl,wi,rl,Kn,al,Yn,c,nt,Ot,_,v,h,y,I,k,F,C,H,L,N,Y,W,te,G,U,r,T,A,q,V,Q,Z,ne,M,le,w,re,ve,De,K,ol,Je,bt,S,f,Ii,Fi,Ci,Li,Di,Ni,Mi,Ai,Ei,qi,Oi,Hi,Bi,Pi,Ri,Ki,Yi]}class $t extends Qe{constructor(t){super(),Ge(this,t,_o,mo,Ke,{items:0,searchFunction:63,labelFieldName:64,keywordsFieldName:65,valueFieldName:66,labelFunction:67,keywordsFunction:68,valueFunction:3,keywordsCleanFunction:69,textCleanFunction:70,clearSelection:71,beforeChange:72,onChange:73,onFocus:74,onBlur:75,onCreate:76,selectFirstIfEmpty:77,minCharactersToSearch:78,maxItemsToShowInList:4,multiple:5,create:6,ignoreAccents:79,matchAllKeywords:80,sortByMatchedKeywords:81,itemFilterFunction:82,itemSortFunction:83,lock:84,delay:85,localFiltering:86,localSorting:87,cleanUserText:88,lowercaseKeywords:89,closeOnBlur:90,orderableSelection:91,hideArrow:7,showClear:92,clearText:8,showLoadingIndicator:9,noResultsText:10,loadingText:11,moreItemsText:12,createText:13,placeholder:14,className:15,inputClassName:16,inputId:17,name:18,selectName:19,selectId:20,title:21,html5autocomplete:22,autocompleteOffValue:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:93,tabindex:29,selectedItem:1,value:61,highlightedItem:62,text:2,highlightFilter:94},null,[-1,-1,-1,-1,-1])}get clearSelection(){return this.$$.ctx[71]}get highlightFilter(){return this.$$.ctx[94]}}function po(e){let t,n,l,i,s,o,a,c,f,S,p,_,v,h,y,I,k,D,F,C,H,L,N,Y,W,te,G,U,R,X,g,r,T,A,q,V,Q,Z,ne,M,le,w,re,ve,Ze,De,_t,xe,$e,He,Ie,et,ot,Ne,Me,ye,pt;const Ye=[e[1]];let ze={};for(let oe=0;oe<Ye.length;oe+=1)ze=ht(ze,Ye[oe]);f=new $t({props:ze});const Ue=[e[1]];let Te={};for(let oe=0;oe<Ue.length;oe+=1)Te=ht(Te,Ue[oe]);return W=new $t({props:Te}),{c(){t=b("table"),n=b("thead"),n.innerHTML="<tr><th>№</th> <th>Наименование</th> <th>Кол-во мест</th> <th>Вес</th> <th>Объем</th> <th>Цена (₽)</th> <th>Сумма (₽)</th></tr>",l=O(),i=b("tbody"),s=b("tr"),o=b("td"),o.innerHTML="<span></span>",a=O(),c=b("td"),Pe(f.$$.fragment),S=O(),p=b("td"),p.innerHTML='<input type="text" class="num input is-small" name="seats"/>',_=O(),v=b("td"),v.innerHTML='<input type="text" class="num input is-small" name="weight"/>',h=O(),y=b("td"),y.innerHTML='<input type="text" class="num input is-small" name="volume"/>',I=O(),k=b("td"),k.innerHTML='<input type="text" class="rub input is-small" name="price"/>',D=O(),F=b("td"),F.innerHTML='<input type="text" class="rub input is-small" name="item_sum"/> <a class="removeline" title="удалить строку" href=""><span class="icon is-small has-text-grey-light"><i class="fa-light fa-xmark"></i></span></a>',C=O(),H=b("tr"),L=b("td"),L.innerHTML="<span></span>",N=O(),Y=b("td"),Pe(W.$$.fragment),te=O(),G=b("td"),G.innerHTML='<input type="text" class="num input is-small" name="seats"/>',U=O(),R=b("td"),R.innerHTML='<input type="text" class="num input is-small" name="weight"/>',X=O(),g=b("td"),g.innerHTML='<input type="text" class="num input is-small" name="volume"/>',r=O(),T=b("td"),T.innerHTML='<input type="text" class="rub input is-small" name="price"/>',A=O(),q=b("td"),q.innerHTML='<input type="text" class="rub input is-small" name="item_sum"/> <a class="removeline" title="удалить строку" href=""><span class="icon is-small has-text-grey-light"><i class="fa-light fa-xmark"></i></span></a>',V=O(),Q=b("tfoot"),Z=b("tr"),ne=b("td"),M=O(),le=b("td"),w=b("a"),w.textContent="+ строка",re=O(),ve=b("td"),Ze=O(),De=b("td"),_t=O(),xe=b("td"),$e=O(),He=b("td"),He.textContent="Всего к оплате:",Ie=O(),et=b("td"),ot=b("strong"),Ne=ge(e[0]),m(o,"class","count"),m(s,"class","item"),m(L,"class","count"),m(H,"class","item"),m(w,"href",""),m(He,"align","right"),m(t,"class","table content is-small"),m(t,"id","docitemform_table")},m(oe,je){J(oe,t,je),d(t,n),d(t,l),d(t,i),d(i,s),d(s,o),d(s,a),d(s,c),qe(f,c,null),d(s,S),d(s,p),d(s,_),d(s,v),d(s,h),d(s,y),d(s,I),d(s,k),d(s,D),d(s,F),d(i,C),d(i,H),d(H,L),d(H,N),d(H,Y),qe(W,Y,null),d(H,te),d(H,G),d(H,U),d(H,R),d(H,X),d(H,g),d(H,r),d(H,T),d(H,A),d(H,q),d(t,V),d(t,Q),d(Q,Z),d(Z,ne),d(Z,M),d(Z,le),d(le,w),d(Z,re),d(Z,ve),d(Z,Ze),d(Z,De),d(Z,_t),d(Z,xe),d(Z,$e),d(Z,He),d(Z,Ie),d(Z,et),d(et,ot),d(ot,Ne),Me=!0,ye||(pt=P(w,"click",st(e[2])),ye=!0)},p(oe,[je]){const rt=je&2?xt(Ye,[dn(oe[1])]):{};f.$set(rt);const at=je&2?xt(Ue,[dn(oe[1])]):{};W.$set(at),(!Me||je&1)&&Se(Ne,oe[0])},i(oe){Me||(ee(f.$$.fragment,oe),ee(W.$$.fragment,oe),Me=!0)},o(oe){se(f.$$.fragment,oe),se(W.$$.fragment,oe),Me=!1},d(oe){oe&&j(t),Oe(f),Oe(W),ye=!1,pt()}}}function Xt(e){let t=parseFloat(e.replace(/\s/g,"").replace(",","."));return isNaN(t)?0:t}function un(e){return e==0?"":new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function bo(e,t,n){let{editDocument_id:l=-1}=t,i=!1,s={labelFieldName:"name",maxItemsToShowInList:5,delay:350,minCharactersToSearch:2,create:!0,lowercaseKeywords:!1,noInputStyles:!0,showLoadingIndicator:!0,loadingText:"Загрузка...",moreItemsText:"не показано",createText:'Не найдено, "Enter", чтобы создать.',placeholder:"наименование груза",className:void 0,inputClassName:"input is-small",name:"name",localFiltering:!1,searchFunction:f,onCreate:c};const o=document.querySelector("[name=csrfmiddlewaretoken]").value,a={base:"https://"+document.domain+"/api/v1/",get org(){return this.base+"organizations/"},get items(){return this.base+"items/"},get documentitems(){return this.base+"documentitems/"},get doclist(){return this.base+"documentitems/doclist?doc_id="}};async function c(F,C="post"){const H=await fetch(a.items,{method:C,headers:{"Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify({name:F})});return H.ok?await H.json():JSON.stringify({id:-1,name:`Ошибка^ ${H.status} - ${H.statusText}`})}async function f(F){return await(await fetch(a.items+"search/"+encodeURIComponent(F))).json()}const S=async F=>{try{const C=await fetch(`${a.documentitems}${F}/`,{method:"delete",headers:{"X-CSRFToken":o}});return C.ok?"":`<br> id: ${F}, ${C.status} - ${C.statusText}`}catch(C){return`<br> id: ${F}, ${C.message}`}},p=()=>{document.querySelectorAll("a.removeline").forEach(function(C){C.onclick=async function(H){H.preventDefault();const L=H.currentTarget.parentNode.parentNode;if(L.dataset.id){const N=await S(L.dataset.id);if(N){alert("Ошибка!!! Не могу удалить!"+N);return}}L.remove(),h()}})};Hn(()=>{k(),i&&D()});const _=()=>{const F=`<tr class="item"><td class="count"><span></span></td>
            <td></td>
            <td><input type="text" class="num input is-small" name="seats"></td>
            <td><input type="text" class="num input is-small" name="weight"></td>
            <td><input type="text" class="num input is-small" name="volume"></td>
            <td><input type="text" class="rub input is-small" name="price"></td>
            <td><input type="text" class="rub input is-small" name="item_sum">
                <a class="removeline" title="удалить строку" href="">
                    <span class="icon is-small has-text-grey-light"><i class="fa-light fa-xmark"></i></span>
                </a>
            </td>
        </tr>`;let C=document.getElementById("docitemform_table");C.childNodes[2].insertAdjacentHTML("beforeend",F),new $t({target:C.childNodes[2].lastChild.childNodes[2],props:{...s}}),k()};let v="";const h=()=>{let F=0;document.querySelector("#docitemform_table tbody").querySelectorAll("[name=item_sum]").forEach(L=>{F+=Xt(L.value)}),n(0,v=un(F))};function y(F){let C=F.currentTarget.parentNode.parentNode,H=Xt(C.querySelector("[name=seats]").value),L=Xt(C.querySelector("[name=price]").value),N=H*L;C.querySelector("[name=item_sum]").value=un(N),h()}const I=F=>{let C=Xt(F.currentTarget.value);F.currentTarget.value=un(C)};function k(){document.querySelectorAll("[name=price]").forEach(function(L){L.addEventListener("change",N=>I(N)),L.addEventListener("input",N=>{N.currentTarget.value=N.currentTarget.value.replace(/[^0-9,.]/g,""),y(N)})}),document.querySelectorAll("[name=seats]").forEach(function(L){L.addEventListener("input",N=>{N.currentTarget.value=N.currentTarget.value.replace(/[^0-9]/g,""),y(N)})}),document.querySelectorAll("[name=item_sum]").forEach(L=>{L.addEventListener("input",N=>N.currentTarget.value=N.currentTarget.value.replace(/[^0-9,.]/g,"")),L.addEventListener("blur",N=>{I(N),h()})}),p()}async function D(){const F=await fetch(a.doclist+encodeURIComponent(l)).then(L=>L.json()),C=F.length;if(C>2)for(let L=2;L<C;L++)_();const H=document.querySelectorAll("tr.item");for(let L=0;L<C;L++)H[L].querySelector("[name=name]").value=F[L].item.name,H[L].querySelector("[name=seats]").value=parseInt(F[L].seats),H[L].querySelector("[name=weight]").value=F[L].weight,H[L].querySelector("[name=volume]").value=F[L].volume,H[L].querySelector("[name=price]").value=un(Xt(F[L].price)),H[L].querySelector("[name=item_sum]").value=un(Xt(F[L].item_sum)),h(),H[L].dataset.id=F[L].id}return e.$$set=F=>{"editDocument_id"in F&&n(3,l=F.editDocument_id)},e.$$.update=()=>{e.$$.dirty&8&&(i=l!==-1)},[v,s,_,l]}class yo extends Qe{constructor(t){super(),Ge(this,t,bo,po,Ke,{editDocument_id:3})}}function vo(e){let t,n,l,i,s,o,a,c,f,S,p,_,v,h,y,I,k,D,F,C,H,L,N,Y,W,te,G,U,R,X,g,r,T,A,q,V,Q,Z,ne,M,le,w,re,ve,Ze,De,_t,xe,$e,He,Ie,et,ot,Ne,Me,ye,pt,Ye,ze,Ue,Te,oe,je,rt,at,tt,ln,K,ut,x,nt,Ot,Ct,Fe,ke,Ce,Je,We,ue,ae,bt,de,_e,yt,he,Ht,Be,vt,kt,Lt,Bt,Pt,Rt,Ae,bn,lt,Dt,Nt,Mt;h=new Us({props:{value:new Date,format:"dd.MM.yyyy",locale:{weekdays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Янаврь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekStartsOn:1},closeOnSelection:!0,placeholder:new Date().toLocaleDateString()}});const Kt=[e[3],{placeholder:e[3].placeholder+" отправителя"},{name:"sender"}];function Bn(z){e[13](z)}let ct={};for(let z=0;z<Kt.length;z+=1)ct=ht(ct,Kt[z]);e[1].sender!==void 0&&(ct.value=e[1].sender),le=new $t({props:ct}),Re.push(()=>qt(le,"value",Bn));const wt=[e[3],{placeholder:e[3].placeholder+" получателя"},{name:"receiver"}];function Pn(z){e[14](z)}let Yt={};for(let z=0;z<wt.length;z+=1)Yt=ht(Yt,wt[z]);e[1].receiver!==void 0&&(Yt.value=e[1].receiver),Ie=new $t({props:Yt}),Re.push(()=>qt(Ie,"value",Pn));const zt=[e[3],{placeholder:e[3].placeholder+" плательщика"},{name:"payer"}];function Rn(z){e[15](z)}let Ut={};for(let z=0;z<zt.length;z+=1)Ut=ht(Ut,zt[z]);return e[1].payer!==void 0&&(Ut.value=e[1].payer),Te=new $t({props:Ut}),Re.push(()=>qt(Te,"value",Rn)),tt=new yo({props:{editDocument_id:e[0]}}),{c(){t=b("div"),n=b("h5"),n.textContent="Товарно-транспортная накладная",l=O(),i=b("div"),s=b("div"),o=b("label"),o.textContent="Номер и дата",a=O(),c=b("div"),f=b("div"),S=b("div"),p=b("input"),_=O(),v=b("p"),Pe(h.$$.fragment),y=O(),I=b("div"),k=b("div"),D=b("label"),D.textContent="Город",F=O(),C=b("div"),H=b("div"),L=b("p"),N=b("input"),Y=O(),W=b("div"),te=b("div"),G=b("label"),G.textContent="Авто",U=O(),R=b("div"),X=b("div"),g=b("p"),r=b("input"),T=O(),A=b("div"),q=b("div"),V=b("label"),V.textContent="Отправитель",Q=O(),Z=b("div"),ne=b("div"),M=b("div"),Pe(le.$$.fragment),re=O(),ve=b("div"),Ze=b("div"),De=b("label"),De.textContent="Получатель",_t=O(),xe=b("div"),$e=b("div"),He=b("div"),Pe(Ie.$$.fragment),ot=O(),Ne=b("div"),Me=b("div"),ye=b("label"),ye.textContent="Плательщик",pt=O(),Ye=b("div"),ze=b("div"),Ue=b("div"),Pe(Te.$$.fragment),je=O(),rt=b("div"),at=b("div"),Pe(tt.$$.fragment),ln=O(),K=b("form"),ut=b("div"),x=b("div"),nt=b("label"),nt.textContent="Особые отметки",Ot=O(),Ct=b("div"),Fe=b("div"),ke=b("p"),Ce=b("textarea"),Je=O(),We=b("div"),ue=b("div"),ae=b("label"),ae.textContent="Адрес доставки",bt=O(),de=b("div"),_e=b("div"),yt=b("p"),he=b("input"),Ht=O(),Be=b("div"),vt=b("div"),kt=b("label"),kt.textContent="Условия договора",Lt=O(),Bt=b("div"),Pt=b("div"),Rt=b("p"),Ae=b("textarea"),bn=O(),lt=b("div"),lt.innerHTML='<div class="field-label is-small"><label for="" class="label"></label></div> <div class="field-body"><div class="field is-grouped"><p class="control is-expanded"><button class="button is-small is-link is-outlined is-fullwidth" type="submit">Сохранить</button></p> <p class="control"><button class="button is-small is-outlined" type="reset">Очистить</button></p></div></div>',m(n,"class","title is-5 has-text-centered"),m(o,"for",""),m(o,"class","label get"),m(s,"class","field-label is-small is-hidden-mobile"),m(p,"type","text"),m(p,"class","input is-small"),m(p,"placeholder","номер"),m(p,"name","number"),m(p,"maxlength","15"),p.required=!0,p.disabled=!0,m(S,"class","control"),m(v,"class","control control-dateinput"),m(f,"class","field is-grouped is-justify-content-space-between"),m(c,"class","field-body"),m(i,"class","field is-horizontal"),m(D,"for",""),m(D,"class","label get"),m(k,"class","field-label is-small is-hidden-mobile"),m(N,"type","text"),m(N,"class","input is-small"),m(N,"placeholder","город"),m(N,"name","city"),m(N,"maxlength","100"),m(N,"form","documentform"),m(L,"class","control"),m(H,"class","field"),m(C,"class","field-body"),m(I,"class","field is-horizontal"),m(G,"for",""),m(G,"class","label get"),m(te,"class","field-label is-small is-hidden-mobile"),m(r,"type","text"),m(r,"class","input is-small"),m(r,"placeholder","№ ТС"),m(r,"name","truck"),m(r,"maxlength","20"),m(r,"form","documentform"),m(g,"class","control"),m(X,"class","field"),m(R,"class","field-body"),m(W,"class","field is-horizontal"),m(V,"for",""),m(V,"class","label get"),m(q,"class","field-label is-small is-hidden-mobile"),m(M,"class","control"),m(ne,"class","field"),m(Z,"class","field-body"),m(A,"class","field is-horizontal"),m(De,"for",""),m(De,"class","label get"),m(Ze,"class","field-label is-small is-hidden-mobile"),m(He,"class","control"),m($e,"class","field"),m(xe,"class","field-body"),m(ve,"class","field is-horizontal"),m(ye,"for",""),m(ye,"class","label get"),m(Me,"class","field-label is-small is-hidden-mobile"),m(Ue,"class","control"),m(ze,"class","field"),m(Ye,"class","field-body"),m(Ne,"class","field is-horizontal"),m(at,"class","control"),m(rt,"class","field"),m(nt,"for",""),m(nt,"class","label get"),m(x,"class","field-label is-small is-hidden-mobile"),m(Ce,"class","textarea is-small"),m(Ce,"name","spec_notes"),m(Ce,"placeholder","особые отметки"),m(Ce,"rows","2"),m(ke,"class","control"),m(Fe,"class","field"),m(Ct,"class","field-body"),m(ut,"class","field is-horizontal"),m(ae,"for",""),m(ae,"class","label get"),m(ue,"class","field-label is-small is-hidden-mobile"),m(he,"type","text"),m(he,"class","input is-small"),m(he,"placeholder","адрес доставки"),m(he,"name","destination_address"),m(he,"maxlength","256"),m(yt,"class","control"),m(_e,"class","field"),m(de,"class","field-body"),m(We,"class","field is-horizontal"),m(kt,"for",""),m(kt,"class","label get"),m(vt,"class","field-label is-small is-hidden-mobile"),m(Ae,"class","textarea is-small"),m(Ae,"name","text"),m(Ae,"id",""),m(Ae,"placeholder","условия договора"),m(Ae,"rows","3"),m(Rt,"class","control"),m(Pt,"class","field"),m(Bt,"class","field-body"),m(Be,"class","field is-horizontal"),m(lt,"class","field is-horizontal"),m(K,"id","documentform"),m(t,"class","box")},m(z,pe){J(z,t,pe),d(t,n),d(t,l),d(t,i),d(i,s),d(s,o),d(i,a),d(i,c),d(c,f),d(f,S),d(S,p),ce(p,e[2].number),d(f,_),d(f,v),qe(h,v,null),d(t,y),d(t,I),d(I,k),d(k,D),d(I,F),d(I,C),d(C,H),d(H,L),d(L,N),ce(N,e[2].city),d(t,Y),d(t,W),d(W,te),d(te,G),d(W,U),d(W,R),d(R,X),d(X,g),d(g,r),ce(r,e[2].truck),d(t,T),d(t,A),d(A,q),d(q,V),d(A,Q),d(A,Z),d(Z,ne),d(ne,M),qe(le,M,null),d(t,re),d(t,ve),d(ve,Ze),d(Ze,De),d(ve,_t),d(ve,xe),d(xe,$e),d($e,He),qe(Ie,He,null),d(t,ot),d(t,Ne),d(Ne,Me),d(Me,ye),d(Ne,pt),d(Ne,Ye),d(Ye,ze),d(ze,Ue),qe(Te,Ue,null),d(t,je),d(t,rt),d(rt,at),qe(tt,at,null),d(t,ln),d(t,K),d(K,ut),d(ut,x),d(x,nt),d(ut,Ot),d(ut,Ct),d(Ct,Fe),d(Fe,ke),d(ke,Ce),ce(Ce,e[2].spec_notes),d(K,Je),d(K,We),d(We,ue),d(ue,ae),d(We,bt),d(We,de),d(de,_e),d(_e,yt),d(yt,he),ce(he,e[2].destination_address),d(K,Ht),d(K,Be),d(Be,vt),d(vt,kt),d(Be,Lt),d(Be,Bt),d(Bt,Pt),d(Pt,Rt),d(Rt,Ae),ce(Ae,e[2].text),d(K,bn),d(K,lt),Dt=!0,Nt||(Mt=[P(o,"click",e[8]),P(p,"input",e[10]),P(S,"dblclick",ko),P(D,"click",e[5]),P(N,"input",e[11]),P(G,"click",e[5]),P(r,"input",e[12]),P(V,"click",e[6]),P(De,"click",e[6]),P(ye,"click",e[6]),P(nt,"click",e[5]),P(Ce,"input",e[16]),P(ae,"click",e[5]),P(he,"input",e[17]),P(kt,"click",e[5]),P(Ae,"input",e[18]),P(K,"submit",st(e[7])),P(K,"reset",e[4])],Nt=!0)},p(z,[pe]){pe&4&&p.value!==z[2].number&&ce(p,z[2].number),pe&4&&N.value!==z[2].city&&ce(N,z[2].city),pe&4&&r.value!==z[2].truck&&ce(r,z[2].truck);const yn=pe&8?xt(Kt,[dn(z[3]),{placeholder:z[3].placeholder+" отправителя"},Kt[2]]):{};!w&&pe&2&&(w=!0,yn.value=z[1].sender,Et(()=>w=!1)),le.$set(yn);const vn=pe&8?xt(wt,[dn(z[3]),{placeholder:z[3].placeholder+" получателя"},wt[2]]):{};!et&&pe&2&&(et=!0,vn.value=z[1].receiver,Et(()=>et=!1)),Ie.$set(vn);const kn=pe&8?xt(zt,[dn(z[3]),{placeholder:z[3].placeholder+" плательщика"},zt[2]]):{};!oe&&pe&2&&(oe=!0,kn.value=z[1].payer,Et(()=>oe=!1)),Te.$set(kn);const wn={};pe&1&&(wn.editDocument_id=z[0]),tt.$set(wn),pe&4&&ce(Ce,z[2].spec_notes),pe&4&&he.value!==z[2].destination_address&&ce(he,z[2].destination_address),pe&4&&ce(Ae,z[2].text)},i(z){Dt||(ee(h.$$.fragment,z),ee(le.$$.fragment,z),ee(Ie.$$.fragment,z),ee(Te.$$.fragment,z),ee(tt.$$.fragment,z),Dt=!0)},o(z){se(h.$$.fragment,z),se(le.$$.fragment,z),se(Ie.$$.fragment,z),se(Te.$$.fragment,z),se(tt.$$.fragment,z),Dt=!1},d(z){z&&j(t),Oe(h),Oe(le),Oe(Ie),Oe(Te),Oe(tt),Nt=!1,be(Mt)}}}function Nn(e="",t="",n="",l="",i="",s="",o="",a="",c=0,f=void 0,S=void 0,p=void 0){return{id:e,number:t,date:n,city:l,truck:i,spec_notes:s,destination_address:o,text:a,doc_sum:c,sender:f,receiver:S,payer:p}}function ii(e){let t=parseFloat(e.replace(/\s/g,"").replace(",","."));return isNaN(t)?0:t}const ko=e=>e.currentTarget.querySelector("[name=number]").removeAttribute("disabled");function wo(e,t,n){let{editDocument_id:l=-1}=t,{copy:i=!1}=t;const s=pn(),o=document.querySelector("[name=csrfmiddlewaretoken]").value,a={base:"https://"+document.domain+"/api/v1/",get org(){return this.base+"organizations/"},get num(){return this.base+"documentnumber/"},get documents(){return this.base+"documents/"},get documentitems(){return this.base+"documentitems/"}};let c={labelFieldName:"name",valueFieldName:"id",maxItemsToShowInList:4,delay:350,minCharactersToSearch:2,create:!1,lowercaseKeywords:!1,noInputStyles:!0,showLoadingIndicator:!0,loadingText:"Загрузка...",moreItemsText:"не показано",noResultsText:"Не найдено",placeholder:"наименование или ИНН",className:"is-size-7",inputClassName:"input is-small",searchFunction:f,localFiltering:!1,required:!0};async function f(g){return await(await fetch(a.org+"search/"+encodeURIComponent(g))).json()}function S(){n(1,_.sender="",_),n(1,_.receiver="",_),n(1,_.payer="",_);let g=`input[name=name], input[name=seats], input[name=volume], 
                        input[name=weight], input[name=price], input[name=item_sum],
                        input[name=payer], input[name=receiver], input[name=sender]`;if(document.querySelectorAll(g).forEach(T=>{T.value=""}),h.id){let T=h.id,A=h.number,q=h.date;n(2,h=Nn(T,A,q))}else n(2,h=Nn())}const p=async function(g,r,T="post"){let A={ok:!1,resp:{}};try{const q=await fetch(r,{method:T,headers:{"Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify(g)});q.ok?(A.ok=!0,A.resp=await q.json()):A.resp=await q.json()}catch(q){A.resp.error=q.message+" - Нет связи с сервером."}finally{return A}};let _={sender:"",payer:"",receiver:""};const v=async g=>{let r={ok:!0},T=document.querySelectorAll("tr.item");for(let A of T){let q=A.querySelectorAll("input"),V={},Q="post",Z=a.documentitems;if(i&&(A.dataset.id=""),A.dataset.id&&(V.id=A.dataset.id,Q="put",Z=a.documentitems+V.id+"/"),q.forEach(ne=>{V[ne.name]=ne.value}),V.price=ii(V.price),V.item_sum=ii(V.item_sum),V.seats=parseInt(V.seats),V.name.trim()===""&&!V.id){if(V.item_sum==0)continue;F({name:["Введите наименование!"]},target=A),r.ok=!1;continue}else{V.document=g;let ne=await p(V,Z,Q);if(ne.ok)A.dataset.id=ne.resp.id;else{F(ne.resp,target=A),r.ok=!1;continue}}}return n(9,i=!1),r};let h=Nn(),y=Nn();async function I(){!i&&l===-1&&(y=await fetch(a.documents+"last/").then(r=>r.json()));let g=this.parentNode.parentNode.querySelector("input");g||(g=this.parentNode.parentNode.querySelector("textarea")),n(2,h[g.name]=y[g.name],h)}async function k(){!i&&l===-1&&(y=await fetch(a.documents+"last/").then(r=>r.json()));let g=this.parentNode.parentNode.querySelector("input");document.querySelector(`input[name=${g.name}]`).value=y[g.name].name,n(1,_[g.name]=y[g.name].id,_)}const D=async()=>{let g=document.querySelector(".date-time-field input").value.split(".").reverse().join("-");n(2,h.date=g,h),n(2,h.sender=parseInt(_.sender),h),n(2,h.receiver=parseInt(_.receiver),h),n(2,h.payer=parseInt(_.payer),h);let r={ok:!0,data:{}};if(h.number.trim()||(r.ok=!1,r.data.number=["Введите номер!"]),!/^\d\d\d\d-\d\d-\d\d$/.test(h.date)){alert("Формат даты документа не верный");return}if(h.sender||(r.ok=!1,r.data.sender=["Выберите отправителя, начните вводить ИНН или наименование!"]),h.receiver||(r.ok=!1,r.data.receiver=["Выберите получателя, начните вводить ИНН или наименование!"]),h.payer||(r.ok=!1,r.data.payer=["Выберите плательщика, начните вводить ИНН или наименование!"]),!r.ok){F(r.data);return}let T="post",A="";h.id&&(T="put",A=h.id+"/");let q=await p(h,a.documents+A,T);if(!q.ok){F(q.resp);return}s("updatetable"),n(2,h.id=q.resp.id,h),(await v(q.resp.id)).ok&&s("closemodal")},F=(g,r=document)=>{for(let T in g){let A=r.querySelector(`[name=${T}]`);A.setAttribute("title",g[T]),A.classList.add("is-danger"),A.addEventListener("input",q=>{q.currentTarget.classList.remove("is-danger"),q.currentTarget.removeAttribute("title")},{once:!0})}};async function C(){let g="";h.id&&!i?g=y.number:g=(await fetch(a.num).then(T=>T.json())).number,n(2,h.number=g,h)}async function H(){y=await fetch(a.documents+l+"/").then(g=>g.json()),y.date=y.date.split("-").reverse().join("."),i&&(y.id=void 0,await C(),y.number=h.number,y.date=new Date().toLocaleDateString()),document.querySelector(".date-time-field input").value=y.date;for(let g of["id","number","city","truck","spec_notes","destination_address","text","doc_sum"])n(2,h[g]=y[g],h);document.querySelector("input[name=sender]").value=y.sender.name,document.querySelector("input[name=receiver]").value=y.receiver.name,document.querySelector("input[name=payer]").value=y.payer.name,n(1,_.sender=y.sender.id,_),n(1,_.receiver=y.receiver.id,_),n(1,_.payer=y.payer.id,_)}Hn(()=>{let g=document.querySelector(".date-time-field input");g.classList.add("input"),g.classList.add("is-small"),l!==-1?H():C(),document.querySelector("[name=number]").setAttribute("disabled","true")});function L(){h.number=this.value,n(2,h)}function N(){h.city=this.value,n(2,h)}function Y(){h.truck=this.value,n(2,h)}function W(g){e.$$.not_equal(_.sender,g)&&(_.sender=g,n(1,_))}function te(g){e.$$.not_equal(_.receiver,g)&&(_.receiver=g,n(1,_))}function G(g){e.$$.not_equal(_.payer,g)&&(_.payer=g,n(1,_))}function U(){h.spec_notes=this.value,n(2,h)}function R(){h.destination_address=this.value,n(2,h)}function X(){h.text=this.value,n(2,h)}return e.$$set=g=>{"editDocument_id"in g&&n(0,l=g.editDocument_id),"copy"in g&&n(9,i=g.copy)},[l,_,h,c,S,I,k,D,C,i,L,N,Y,W,te,G,U,R,X]}class So extends Qe{constructor(t){super(),Ge(this,t,wo,vo,Ke,{editDocument_id:0,copy:9})}}function To(e){let t;return{c(){t=b("div"),m(t,"id","document-form-container")},m(n,l){J(n,t,l)},p:fe,d(n){n&&j(t)}}}function Io(e){let t,n,l,i,s,o,a,c,f,S,p,_,v,h,y,I,k,D,F,C,H,L,N;function Y(U){e[7](U)}let W={modal_style:"justify-content: flex-start",content_style:"top: 3rem; max-width: 70rem; min-width: 25rem; width: 100%; max-height: calc(100% - 3rem)",$$slots:{default:[To]},$$scope:{ctx:e}};e[0]!==void 0&&(W.active=e[0]),t=new Ds({props:W}),Re.push(()=>qt(t,"active",Y));function te(U){e[8](U)}let G={uriPath:"documents"};return e[1]!==void 0&&(G.disabled=e[1]),f=new Ss({props:G}),Re.push(()=>qt(f,"disabled",te)),f.$on("notification",e[9]),f.$on("updatetable",e[2]),{c(){Pe(t.$$.fragment),l=O(),i=b("h4"),i.textContent="Список документов",s=O(),o=b("form"),a=b("div"),c=O(),Pe(f.$$.fragment),p=O(),_=b("button"),_.innerHTML='<i class="fa-light fa-plus"></i>',v=O(),h=b("button"),y=b("i"),k=O(),D=b("button"),F=b("i"),m(i,"class","title is-4 pl-4 pt-5"),m(a,"id",xn),m(_,"class","button is-link is-outlined mt-1"),m(_,"title","Новый документ"),m(y,"class","fa-light fa-pen"),m(h,"class","button is-link is-outlined mt-1"),h.disabled=I=!e[1],m(h,"title","Редактировать"),m(F,"class","fa-light fa-copy"),m(D,"class","button is-link is-outlined mt-1"),D.disabled=C=!e[1],m(D,"title","Копировать"),m(o,"class","svelte-vf04cj")},m(U,R){qe(t,U,R),J(U,l,R),J(U,i,R),J(U,s,R),J(U,o,R),d(o,a),d(o,c),qe(f,o,null),d(o,p),d(o,_),d(o,v),d(o,h),d(h,y),d(o,k),d(o,D),d(D,F),H=!0,L||(N=[P(_,"click",st(e[10])),P(h,"click",st(e[11])),P(D,"click",st(e[12]))],L=!0)},p(U,[R]){const X={};R&65536&&(X.$$scope={dirty:R,ctx:U}),!n&&R&1&&(n=!0,X.active=U[0],Et(()=>n=!1)),t.$set(X);const g={};!S&&R&2&&(S=!0,g.disabled=U[1],Et(()=>S=!1)),f.$set(g),(!H||R&2&&I!==(I=!U[1]))&&(h.disabled=I),(!H||R&2&&C!==(C=!U[1]))&&(D.disabled=C)},i(U){H||(ee(t.$$.fragment,U),ee(f.$$.fragment,U),H=!0)},o(U){se(t.$$.fragment,U),se(f.$$.fragment,U),H=!1},d(U){U&&(j(l),j(i),j(s),j(o)),Oe(t,U),Oe(f),L=!1,be(N)}}}const Fo="/document/",xn="tablegen_id";function Co(e){let t=JSON.parse(JSON.stringify(e,["id","number","city","truck","destination_address","doc_sum"]));for(let n=0;n<t.length;n++)t[n].sender=e[n].sender?e[n].sender.name:"",t[n].receiver=e[n].receiver?e[n].receiver.name:"",t[n].date=new Date(e[n].date).toLocaleDateString("ru"),t[n].number='<span title="Изменено: '+new Date(e[n].modified).toLocaleString("ru")+'">'+t[n].number+"</span>";return JSON.parse(JSON.stringify(t,["id","number","date","doc_sum","sender","receiver","city","truck","destination_address"]))}function Lo(e,t,n){let l=!1,i=!1;const s="https://"+document.domain+app.dataset.api;let o;const a=async()=>{o==null||o.$destroy(),o=new Fs({target:document.getElementById(xn),props:{href:Fo,checkbox_name:"id",url:s,parseData:Co}}),n(6,p=!1)};function c(){n(0,i=!1)}let f;const S=(F=-1,C=!1)=>{f==null||f.$destroy(),n(5,f=new So({target:document.getElementById("document-form-container"),props:{editDocument_id:F,copy:C}})),f.$on("closemodal",c),f.$on("updatetable",()=>n(6,p=!0)),n(0,i=!0)};Hn(a),document.querySelector("#navbar-item-documents").classList.add("is-active");let p=!1;function _(){if(!l)return-1;let F=document.getElementById(xn).parentNode;return new FormData(F).get("id")}function v(F){i=F,n(0,i)}function h(F){l=F,n(1,l)}function y(F){pi.call(this,e,F)}const I=()=>{S(-1)},k=()=>{S(_())},D=()=>{S(_(),!0)};return e.$$.update=()=>{e.$$.dirty&97&&(i||(f==null||f.$destroy(),p&&a()))},[i,l,a,S,_,f,p,v,h,y,I,k,D]}class Do extends Qe{constructor(t){super(),Ge(this,t,Lo,Io,Ke,{})}}function No(e){let t,n;return t=new Do({}),{c(){Pe(t.$$.fragment)},m(l,i){qe(t,l,i),n=!0},p:fe,i(l){n||(ee(t.$$.fragment,l),n=!0)},o(l){se(t.$$.fragment,l),n=!1},d(l){Oe(t,l)}}}class Mo extends Qe{constructor(t){super(),Ge(this,t,null,No,Ke,{})}}new Mo({target:document.getElementById("app")});
