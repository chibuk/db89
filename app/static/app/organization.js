var $e=Object.defineProperty;var ke=(t,e,n)=>e in t?$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>(ke(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function N(){}function me(t){return t()}function ie(){return Object.create(null)}function q(t){t.forEach(me)}function _e(t){return typeof t=="function"}function x(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function we(t){return Object.keys(t).length===0}function g(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function W(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function Ee(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function T(){return B(" ")}function S(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Y(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ne(t){return Array.from(t.childNodes)}function ne(t,e){e=""+e,t.data!==e&&(t.data=e)}function O(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function oe(t,e,n){t.classList.toggle(e,!!n)}function Te(t,e,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:s})}class Le{constructor(e=!1){L(this,"is_svg",!1);L(this,"e");L(this,"n");L(this,"t");L(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,s=null){this.e||(this.is_svg?this.e=Ee(n.nodeName):this.e=y(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)E(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(w)}}let H;function D(t){H=t}function se(){if(!H)throw new Error("Function called outside component initialization");return H}function Oe(t){se().$$.on_mount.push(t)}function Se(t){se().$$.on_destroy.push(t)}function pe(){const t=se();return(e,n,{cancelable:s=!1}={})=>{const l=t.$$.callbacks[e];if(l){const i=Te(e,n,{cancelable:s});return l.slice().forEach(c=>{c.call(t,i)}),!i.defaultPrevented}return!0}}function xe(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const P=[],V=[];let j=[];const Z=[],Me=Promise.resolve();let ee=!1;function Ae(){ee||(ee=!0,Me.then(be))}function te(t){j.push(t)}function ge(t){Z.push(t)}const Q=new Set;let M=0;function be(){if(M!==0)return;const t=H;do{try{for(;M<P.length;){const e=P[M];M++,D(e),Pe(e.$$)}}catch(e){throw P.length=0,M=0,e}for(D(null),P.length=0,M=0;V.length;)V.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];Q.has(n)||(Q.add(n),n())}j.length=0}while(P.length);for(;Z.length;)Z.pop()();ee=!1,Q.clear(),D(t)}function Pe(t){if(t.fragment!==null){t.update(),q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(te)}}function ze(t){const e=[],n=[];j.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),j=e}const U=new Set;let je;function F(t,e){t&&t.i&&(U.delete(t),t.i(e))}function G(t,e,n,s){if(t&&t.o){if(U.has(t))return;U.add(t),je.c.push(()=>{U.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function z(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ve(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function J(t){t&&t.c()}function R(t,e,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),te(()=>{const i=t.$$.on_mount.map(me).filter(_e);t.$$.on_destroy?t.$$.on_destroy.push(...i):q(i),t.$$.on_mount=[]}),l.forEach(te)}function K(t,e){const n=t.$$;n.fragment!==null&&(ze(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ce(t,e){t.$$.dirty[0]===-1&&(P.push(t),Ae(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function C(t,e,n,s,l,i,c,u=[-1]){const h=H;D(t);const r=t.$$={fragment:null,ctx:[],props:i,update:N,not_equal:l,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:ie(),dirty:u,skip_bound:!1,root:e.target||h.$$.root};c&&c(r.root);let m=!1;if(r.ctx=n?n(t,e.props||{},(o,a,..._)=>{const p=_.length?_[0]:a;return r.ctx&&l(r.ctx[o],r.ctx[o]=p)&&(!r.skip_bound&&r.bound[o]&&r.bound[o](p),m&&Ce(t,o)),a}):[],r.update(),m=!0,q(r.before_update),r.fragment=s?s(r.ctx):!1,e.target){if(e.hydrate){const o=Ne(e.target);r.fragment&&r.fragment.l(o),o.forEach(w)}else r.fragment&&r.fragment.c();e.intro&&F(t.$$.fragment),R(t,e.target,e.anchor),be()}D(h)}class I{constructor(){L(this,"$$");L(this,"$$set")}$destroy(){K(this,1),this.$destroy=N}$on(e,n){if(!_e(n))return N;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!we(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ie="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ie);const A=[];function De(t,e=N){let n;const s=new Set;function l(u){if(x(t,u)&&(t=u,n)){const h=!A.length;for(const r of s)r[1](),A.push(r,t);if(h){for(let r=0;r<A.length;r+=2)A[r][0](A[r+1]);A.length=0}}}function i(u){l(u(t))}function c(u,h=N){const r=[u,h];return s.add(r),s.size===1&&(n=e(l,i)||N),u(t),()=>{s.delete(r),s.size===0&&n&&(n(),n=null)}}return{set:l,update:i,subscribe:c}}const X=De(!1);function He(t){let e,n,s,l,i,c,u,h,r,m,o;return{c(){e=y("div"),n=y("div"),s=T(),l=y("div"),i=y("form"),c=y("div"),u=y("div"),h=T(),r=y("div"),r.innerHTML='<p class="control"><button type="submit" class="button is-success svelte-1vm7l7d" title="Подтвердить"><span class="icon is-small"><i class="fa-light fa-check"></i></span><span>Да</span></button></p> <p class="control"><button type="reset" class="button is-danger is-outlined svelte-1vm7l7d" title="Отменить"><span class="icon is-small"><i class="fa-light fa-xmark"></i></span><span>Нет</span></button></p>',$(n,"class","modal-background"),$(u,"class","container content"),$(r,"class","field is-grouped is-grouped-centered"),$(c,"class","message-body"),$(i,"class","message is-warning"),$(l,"class","modal-content"),$(e,"class","modal"),oe(e,"is-active",t[0])},m(a,_){E(a,e,_),g(e,n),g(e,s),g(e,l),g(l,i),g(i,c),g(c,u),u.innerHTML=t[1],g(c,h),g(c,r),m||(o=[S(n,"click",t[3]),S(i,"submit",Y(t[2])),S(i,"reset",Y(t[3]))],m=!0)},p(a,[_]){_&2&&(u.innerHTML=a[1]),_&1&&oe(e,"is-active",a[0])},i:N,o:N,d(a){a&&w(e),m=!1,q(o)}}}let ce="modalevent";function qe(t,e,n){const s=pe();let{htmldata:l="Sample modal data"}=e,{active:i=!1}=e,c=!1;const u=()=>{c=!0,n(0,i=!1),s(ce,c)},h=()=>{c=!1,n(0,i=!1),s(ce,c)};return t.$$set=r=>{"htmldata"in r&&n(1,l=r.htmldata),"active"in r&&n(0,i=r.active)},[i,l,u,h]}class Be extends I{constructor(e){super(),C(this,e,qe,He,x,{htmldata:1,active:0})}}function Fe(t){let e,n,s,l,i,c,u,h,r;function m(a){t[4](a)}let o={htmldata:Ke};return t[1]!==void 0&&(o.active=t[1]),i=new Be({props:o}),V.push(()=>ve(i,"active",m)),i.$on("modalevent",t[3]),{c(){e=y("button"),n=y("i"),l=T(),J(i.$$.fragment),$(n,"class","fa-light fa-trash-xmark"),$(e,"type","submit"),$(e,"class","button is-link is-outlined mt-1 ml-2"),e.disabled=s=!t[0],$(e,"title","Удалить отмеченные")},m(a,_){E(a,e,_),g(e,n),E(a,l,_),R(i,a,_),u=!0,h||(r=S(e,"click",Y(t[2])),h=!0)},p(a,[_]){(!u||_&1&&s!==(s=!a[0]))&&(e.disabled=s);const p={};!c&&_&2&&(c=!0,p.active=a[1],ge(()=>c=!1)),i.$set(p)},i(a){u||(F(i.$$.fragment,a),u=!0)},o(a){G(i.$$.fragment,a),u=!1},d(a){a&&(w(e),w(l)),K(i,a),h=!1,r()}}}const Re="http://127.0.0.1:8000/api/v1/organisations/";let Ke="<p><i class='fa-light fa-trash-xmark fa-lg'></i>Удаление <span class='has-text-danger-dark'>необратимо</span>! Удалить?</p>";const Ue="notification";function Ve(t,e,n){const s=document.querySelector("[name=csrfmiddlewaretoken]").value;let l=!1;const i=pe();let{disabled:c=!0}=e,u=X.subscribe(p=>n(0,c=p));Se(u);const h={add_class:"is-danger",text:"Не удалось удалить:"};let r=null;const m=p=>{r=p.currentTarget,n(1,l=!0)};async function o(p){if(!p.detail)return;const b=r.parentElement;let d="";const v=new FormData(b);for(let f of v.values())d+=await a(f);if(i("deleteitem"),X.update(f=>!1),d){let f={...h};f.text+=d,i(Ue,f)}}const a=async p=>{try{const b=await fetch(`${Re}${p}/`,{method:"delete",headers:{"X-CSRFToken":s}});return b.ok?"":`<br> id: ${p}, ${b.status} - ${b.statusText}`}catch(b){return`<br> id: ${p}, ${b.message}`}};function _(p){l=p,n(1,l)}return t.$$set=p=>{"disabled"in p&&n(0,c=p.disabled)},[c,l,m,o,_]}class Xe extends I{constructor(e){super(),C(this,e,Ve,Fe,x,{disabled:0})}}function re(t,e,n){const s=t.slice();s[8]=e[n];const l=Object.values(s[8]);return s[9]=l,s}function ae(t,e,n){const s=t.slice();return s[12]=e[n],s}function ue(t,e,n){const s=t.slice();return s[15]=e[n],s}function fe(t){let e,n=t[5](t[15])+"",s;return{c(){e=y("th"),s=B(n),$(e,"class","svelte-6ul0da")},m(l,i){E(l,e,i),g(e,s)},p(l,i){i&1&&n!==(n=l[5](l[15])+"")&&ne(s,n)},d(l){l&&w(e)}}}function de(t){let e,n=t[12]+"",s;return{c(){e=y("td"),s=B(n)},m(l,i){E(l,e,i),g(e,s)},p(l,i){i&1&&n!==(n=l[12]+"")&&ne(s,n)},d(l){l&&w(e)}}}function he(t){let e,n,s,l,i,c,u,h=t[9][1]+"",r,m,o,a,_,p,b=z(t[9].slice(2)),d=[];for(let v=0;v<b.length;v+=1)d[v]=de(ae(t,b,v));return{c(){e=y("tr"),n=y("td"),s=y("input"),i=T(),c=y("td"),u=y("a"),r=B(h),o=T();for(let v=0;v<d.length;v+=1)d[v].c();a=T(),$(s,"type","checkbox"),$(s,"name",t[2]),s.value=l=t[9][0],$(u,"href",m=""+(t[1]+t[9][0])),$(u,"class","svelte-6ul0da")},m(v,f){E(v,e,f),g(e,n),g(n,s),g(e,i),g(e,c),g(c,u),g(u,r),g(e,o);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(e,null);g(e,a),_||(p=S(s,"change",t[3]),_=!0)},p(v,f){if(f&4&&$(s,"name",v[2]),f&1&&l!==(l=v[9][0])&&(s.value=l),f&1&&h!==(h=v[9][1]+"")&&ne(r,h),f&3&&m!==(m=""+(v[1]+v[9][0]))&&$(u,"href",m),f&1){b=z(v[9].slice(2));let k;for(k=0;k<b.length;k+=1){const le=ae(v,b,k);d[k]?d[k].p(le,f):(d[k]=de(le),d[k].c(),d[k].m(e,a))}for(;k<d.length;k+=1)d[k].d(1);d.length=b.length}},d(v){v&&w(e),W(d,v),_=!1,p()}}}function Ge(t){let e,n,s,l,i,c,u,h,r,m,o,a=z(Object.keys(t[0][0]).slice(1)),_=[];for(let d=0;d<a.length;d+=1)_[d]=fe(ue(t,a,d));let p=z(t[0]),b=[];for(let d=0;d<p.length;d+=1)b[d]=he(re(t,p,d));return{c(){e=y("div"),n=y("table"),s=y("thead"),l=y("tr"),i=y("th"),c=y("input"),u=T();for(let d=0;d<_.length;d+=1)_[d].c();h=T(),r=y("tbody");for(let d=0;d<b.length;d+=1)b[d].c();$(c,"type","checkbox"),$(c,"id",ye),$(i,"class","svelte-6ul0da"),$(n,"class","table is-hoverable is-striped has-background-white-ter"),$(e,"class","svelte-6ul0da")},m(d,v){E(d,e,v),g(e,n),g(n,s),g(s,l),g(l,i),g(i,c),g(l,u);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(l,null);g(n,h),g(n,r);for(let f=0;f<b.length;f+=1)b[f]&&b[f].m(r,null);m||(o=S(c,"change",t[4]),m=!0)},p(d,[v]){if(v&33){a=z(Object.keys(d[0][0]).slice(1));let f;for(f=0;f<a.length;f+=1){const k=ue(d,a,f);_[f]?_[f].p(k,v):(_[f]=fe(k),_[f].c(),_[f].m(l,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=a.length}if(v&15){p=z(d[0]);let f;for(f=0;f<p.length;f+=1){const k=re(d,p,f);b[f]?b[f].p(k,v):(b[f]=he(k),b[f].c(),b[f].m(r,null))}for(;f<b.length;f+=1)b[f].d(1);b.length=p.length}},i:N,o:N,d(d){d&&w(e),W(_,d),W(b,d),m=!1,o()}}}const Je="has-background-warning-light",ye="tablegen-all";function Qe(t,e,n){let{table_content:s=[]}=e,{href:l="/item/"}=e,{checkbox_name:i="id"}=e,c=new Set;function u(o){let a=o.currentTarget;h(a)}const h=o=>{o.checked?(c.add(o.value),X.update(a=>!0),o.parentNode.parentNode.className=Je):(document.querySelector(`#${ye}`).checked=!1,c.delete(o.value),c.size==0&&X.update(a=>!1),o.parentNode.parentNode.className="")},r=o=>{let a=o.currentTarget,_=document.getElementsByName(i);if(a.checked)for(let p of _)p.checked=!0,h(p);else for(let p of _)p.checked=!1,h(p)},m=o=>{const a={name:"Наименование",address:"Адрес",inn:"ИНН",kpp:"КПП",ogrn:"ОГРН",bank:"Банк",bik:"БИК",pay_acount:"Номер счёта",kor_acount:"Корр. счёт",phone:"Телефон"};return o=a[o]?a[o]:o,o};return t.$$set=o=>{"table_content"in o&&n(0,s=o.table_content),"href"in o&&n(1,l=o.href),"checkbox_name"in o&&n(2,i=o.checkbox_name)},[s,l,i,u,r,m]}class We extends I{constructor(e){super(),C(this,e,Qe,Ge,x,{table_content:0,href:1,checkbox_name:2})}}function Ye(t){let e,n,s,l,i,c,u,h;function r(o){t[3](o)}let m={};return t[0]!==void 0&&(m.disabled=t[0]),c=new Xe({props:m}),V.push(()=>ve(c,"disabled",r)),c.$on("notification",t[4]),c.$on("deleteitem",t[2]),{c(){e=y("h4"),e.textContent="Список организаций.",n=T(),s=y("form"),l=y("div"),i=T(),J(c.$$.fragment),$(e,"class","title is-4 pl-4 pt-5"),$(l,"id",t[1])},m(o,a){E(o,e,a),E(o,n,a),E(o,s,a),g(s,l),g(s,i),R(c,s,null),h=!0},p(o,[a]){const _={};!u&&a&1&&(u=!0,_.disabled=o[0],ge(()=>u=!1)),c.$set(_)},i(o){h||(F(c.$$.fragment,o),h=!0)},o(o){G(c.$$.fragment,o),h=!1},d(o){o&&(w(e),w(n),w(s)),K(c)}}}const Ze="http://127.0.0.1:8000/api/v1/organizations/",et="/organization/";function tt(t,e){return t.id<e.id?1:t.id>e.id?-1:0}function nt(t,e,n){let s=!0,l,i=[];const c="tablegen_"+Math.round(Math.random()*1e4),u=async()=>{i=await fetch(Ze).then(m=>m.json()),l==null||l.$destroy(),l=new We({target:document.getElementById(c),props:{table_content:i.sort(tt),href:et,checkbox_name:"id"}})};Oe(u);function h(m){s=m,n(0,s)}function r(m){xe.call(this,t,m)}return[s,c,u,h,r]}class st extends I{constructor(e){super(),C(this,e,nt,Ye,x,{})}}function lt(t){let e,n,s,l,i,c,u,h,r,m;return u=new st({}),u.$on("notification",t[4]),{c(){e=y("div"),n=new Le(!1),s=B("  "),l=y("button"),c=T(),J(u.$$.fragment),n.a=s,$(l,"class","delete"),$(e,"id",it),$(e,"class",i="notification "+t[1]),O(e,"opacity",t[3]()),O(e,"position","fixed"),O(e,"bottom","3rem"),O(e,"right","3rem"),O(e,"font-size","1rem"),O(e,"display",t[2])},m(o,a){E(o,e,a),n.m(t[0],e),g(e,s),g(e,l),E(o,c,a),R(u,o,a),h=!0,r||(m=S(l,"click",t[5]),r=!0)},p(o,[a]){(!h||a&1)&&n.p(o[0]),(!h||a&2&&i!==(i="notification "+o[1]))&&$(e,"class",i),a&4&&O(e,"display",o[2])},i(o){h||(F(u.$$.fragment,o),h=!0)},o(o){G(u.$$.fragment,o),h=!1},d(o){o&&(w(e),w(c)),K(u,o),r=!1,m()}}}const it="svelt-notyfycation";function ot(t,e,n){let s="Test text",l="is-warning",i="none";const c=()=>{let m;return l.includes("is-danger")||l.includes("is-warning")?m=.5:m=.4,m},u=()=>{let m;return l.includes("is-danger")||l.includes("is-warning")?m=1e4:m=2e3,m};function h(m){n(0,s=m.detail.text),n(1,l=m.detail.add_class),n(2,i="block"),setTimeout(()=>{n(2,i="none")},u())}return[s,l,i,c,h,()=>n(2,i="none")]}class ct extends I{constructor(e){super(),C(this,e,ot,lt,x,{})}}function rt(t){let e,n;return e=new ct({}),{c(){J(e.$$.fragment)},m(s,l){R(e,s,l),n=!0},p:N,i(s){n||(F(e.$$.fragment,s),n=!0)},o(s){G(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}class at extends I{constructor(e){super(),C(this,e,null,rt,x,{})}}new at({target:document.getElementById("app")});
