var $e=Object.defineProperty;var ke=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(ke(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function w(){}function me(e){return e()}function se(){return Object.create(null)}function I(e){e.forEach(me)}function _e(e){return typeof e=="function"}function A(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function we(e){return Object.keys(e).length===0}function b(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function X(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function S(){return H(" ")}function M(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function G(e){return function(t){return t.preventDefault(),e.call(this,t)}}function $(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ee(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t,n){e.classList.toggle(t,!!n)}function Ne(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}let D;function C(e){D=e}function ee(){if(!D)throw new Error("Function called outside component initialization");return D}function Se(e){ee().$$.on_mount.push(e)}function Oe(e){ee().$$.on_destroy.push(e)}function pe(){const e=ee();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=Ne(t,n,{cancelable:l});return s.slice().forEach(c=>{c.call(e,i)}),!i.defaultPrevented}return!0}}function xe(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const L=[],z=[];let j=[];const Q=[],Le=Promise.resolve();let W=!1;function Te(){W||(W=!0,Le.then(be))}function Y(e){j.push(e)}function ge(e){Q.push(e)}const V=new Set;let O=0;function be(){if(O!==0)return;const e=D;do{try{for(;O<L.length;){const t=L[O];O++,C(t),Me(t.$$)}}catch(t){throw L.length=0,O=0,t}for(C(null),L.length=0,O=0;z.length;)z.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];V.has(n)||(V.add(n),n())}j.length=0}while(L.length);for(;Q.length;)Q.pop()();W=!1,V.clear(),C(e)}function Me(e){if(e.fragment!==null){e.update(),I(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}function je(e){const t=[],n=[];j.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),j=t}const B=new Set;let Ae;function R(e,t){e&&e.i&&(B.delete(e),e.i(t))}function te(e,t,n,l){if(e&&e.o){if(B.has(e))return;B.add(e),Ae.c.push(()=>{B.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function T(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ve(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function ne(e){e&&e.c()}function J(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),Y(()=>{const i=e.$$.on_mount.map(me).filter(_e);e.$$.on_destroy?e.$$.on_destroy.push(...i):I(i),e.$$.on_mount=[]}),s.forEach(Y)}function K(e,t){const n=e.$$;n.fragment!==null&&(je(n.after_update),I(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ce(e,t){e.$$.dirty[0]===-1&&(L.push(e),Te(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(e,t,n,l,s,i,c,f=[-1]){const m=D;C(e);const o=e.$$={fragment:null,ctx:[],props:i,update:w,not_equal:s,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:se(),dirty:f,skip_bound:!1,root:t.target||m.$$.root};c&&c(o.root);let v=!1;if(o.ctx=n?n(e,t.props||{},(r,a,...h)=>{const k=h.length?h[0]:a;return o.ctx&&s(o.ctx[r],o.ctx[r]=k)&&(!o.skip_bound&&o.bound[r]&&o.bound[r](k),v&&Ce(e,r)),a}):[],o.update(),v=!0,I(o.before_update),o.fragment=l?l(o.ctx):!1,t.target){if(t.hydrate){const r=Ee(t.target);o.fragment&&o.fragment.l(r),r.forEach(E)}else o.fragment&&o.fragment.c();t.intro&&R(e.$$.fragment),J(e,t.target,t.anchor),be()}C(m)}class q{constructor(){U(this,"$$");U(this,"$$set")}$destroy(){K(this,1),this.$destroy=w}$on(t,n){if(!_e(n))return w;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!we(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const De="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(De);const x=[];function Ie(e,t=w){let n;const l=new Set;function s(f){if(A(e,f)&&(e=f,n)){const m=!x.length;for(const o of l)o[1](),x.push(o,e);if(m){for(let o=0;o<x.length;o+=2)x[o][0](x[o+1]);x.length=0}}}function i(f){s(f(e))}function c(f,m=w){const o=[f,m];return l.add(o),l.size===1&&(n=t(s,i)||w),f(e),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:c}}const F=Ie(!1);function Pe(e){let t,n,l,s,i,c,f,m,o,v,r;return{c(){t=y("div"),n=y("div"),l=S(),s=y("div"),i=y("form"),c=y("div"),f=y("div"),m=S(),o=y("div"),o.innerHTML='<p class="control"><button type="submit" class="button is-success svelte-1vm7l7d" title="Подтвердить"><span class="icon is-small"><i class="fa-light fa-check"></i></span><span>Да</span></button></p> <p class="control"><button type="reset" class="button is-danger is-outlined svelte-1vm7l7d" title="Отменить"><span class="icon is-small"><i class="fa-light fa-xmark"></i></span><span>Нет</span></button></p>',$(n,"class","modal-background"),$(f,"class","container content"),$(o,"class","field is-grouped is-grouped-centered"),$(c,"class","message-body"),$(i,"class","message is-warning"),$(s,"class","modal-content"),$(t,"class","modal"),ie(t,"is-active",e[0])},m(a,h){N(a,t,h),b(t,n),b(t,l),b(t,s),b(s,i),b(i,c),b(c,f),f.innerHTML=e[1],b(c,m),b(c,o),v||(r=[M(n,"click",e[3]),M(i,"submit",G(e[2])),M(i,"reset",G(e[3]))],v=!0)},p(a,[h]){h&2&&(f.innerHTML=a[1]),h&1&&ie(t,"is-active",a[0])},i:w,o:w,d(a){a&&E(t),v=!1,I(r)}}}let re="modalevent";function qe(e,t,n){const l=pe();let{htmldata:s="Sample modal data"}=t,{active:i=!1}=t,c=!1;const f=()=>{c=!0,n(0,i=!1),l(re,c)},m=()=>{c=!1,n(0,i=!1),l(re,c)};return e.$$set=o=>{"htmldata"in o&&n(1,s=o.htmldata),"active"in o&&n(0,i=o.active)},[i,s,f,m]}class Be extends q{constructor(t){super(),P(this,t,qe,Pe,A,{htmldata:1,active:0})}}function ze(e){let t,n,l,s,i,c,f,m,o;function v(a){e[5](a)}let r={htmldata:Fe};return e[1]!==void 0&&(r.active=e[1]),i=new Be({props:r}),z.push(()=>ve(i,"active",v)),i.$on("modalevent",e[3]),{c(){t=y("button"),n=y("i"),s=S(),ne(i.$$.fragment),$(n,"class","fa-light fa-trash-xmark"),$(t,"type","submit"),$(t,"class","button is-link is-outlined mt-1 ml-2"),t.disabled=l=!e[0],$(t,"title","Удалить отмеченные")},m(a,h){N(a,t,h),b(t,n),N(a,s,h),J(i,a,h),f=!0,m||(o=M(t,"click",G(e[2])),m=!0)},p(a,[h]){(!f||h&1&&l!==(l=!a[0]))&&(t.disabled=l);const k={};!c&&h&2&&(c=!0,k.active=a[1],ge(()=>c=!1)),i.$set(k)},i(a){f||(R(i.$$.fragment,a),f=!0)},o(a){te(i.$$.fragment,a),f=!1},d(a){a&&(E(t),E(s)),K(i,a),m=!1,o()}}}let Fe="<p>Удаление <span class='has-text-danger-dark'>необратимо</span>! Удалить?</p>";const He="notification";function Re(e,t,n){const l=document.querySelector("[name=csrfmiddlewaretoken]").value;let{url:s=""}=t,i=!1;const c=pe();let{disabled:f=!0}=t,m=F.subscribe(_=>n(0,f=_));Oe(m);const o={add_class:"is-danger",text:"Не удалось удалить:"};let v=null;const r=_=>{v=_.currentTarget,n(1,i=!0)};async function a(_){if(!_.detail)return;const u=v.parentElement;let p="";const d=new FormData(u);for(let g of d.values())p+=await h(g);if(c("deleteitem"),p){let g={...o};g.text+=p,c(He,g)}F.update(g=>!1)}const h=async _=>{try{const u=await fetch(`${s}${_}/`,{method:"delete",headers:{"X-CSRFToken":l}});return u.ok?"":`<br> id: ${_}, ${u.status} - ${u.statusText}`}catch(u){return`<br> id: ${_}, ${u.message}`}};function k(_){i=_,n(1,i)}return e.$$set=_=>{"url"in _&&n(4,s=_.url),"disabled"in _&&n(0,f=_.disabled)},[f,i,r,a,s,k]}class Je extends q{constructor(t){super(),P(this,t,Re,ze,A,{url:4,disabled:0})}}function ce(e,t,n){const l=e.slice();l[8]=t[n];const s=Object.values(l[8]);return l[9]=s,l}function oe(e,t,n){const l=e.slice();return l[12]=t[n],l}function ae(e,t,n){const l=e.slice();return l[15]=t[n],l}function ue(e){let t,n=e[5](e[15])+"",l;return{c(){t=y("th"),l=H(n),$(t,"class","has-text-grey svelte-5f7ih4")},m(s,i){N(s,t,i),b(t,l)},p(s,i){i&1&&n!==(n=s[5](s[15])+"")&&Z(l,n)},d(s){s&&E(t)}}}function fe(e){let t,n=e[12]+"",l;return{c(){t=y("td"),l=H(n)},m(s,i){N(s,t,i),b(t,l)},p(s,i){i&1&&n!==(n=s[12]+"")&&Z(l,n)},d(s){s&&E(t)}}}function de(e){let t,n,l,s,i,c,f,m=e[9][1]+"",o,v,r,a,h,k,_=T(e[9].slice(2)),u=[];for(let p=0;p<_.length;p+=1)u[p]=fe(oe(e,_,p));return{c(){t=y("tr"),n=y("td"),l=y("input"),i=S(),c=y("td"),f=y("a"),o=H(m),r=S();for(let p=0;p<u.length;p+=1)u[p].c();a=S(),$(l,"type","checkbox"),$(l,"name",e[2]),l.value=s=e[9][0],$(f,"href",v=""+(e[1]+e[9][0])),$(f,"class","svelte-5f7ih4")},m(p,d){N(p,t,d),b(t,n),b(n,l),b(t,i),b(t,c),b(c,f),b(f,o),b(t,r);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(t,null);b(t,a),h||(k=M(l,"change",e[3]),h=!0)},p(p,d){if(d&4&&$(l,"name",p[2]),d&1&&s!==(s=p[9][0])&&(l.value=s),d&1&&m!==(m=p[9][1]+"")&&Z(o,m),d&3&&v!==(v=""+(p[1]+p[9][0]))&&$(f,"href",v),d&1){_=T(p[9].slice(2));let g;for(g=0;g<_.length;g+=1){const le=oe(p,_,g);u[g]?u[g].p(le,d):(u[g]=fe(le),u[g].c(),u[g].m(t,a))}for(;g<u.length;g+=1)u[g].d(1);u.length=_.length}},d(p){p&&E(t),X(u,p),h=!1,k()}}}function Ke(e){let t,n,l,s,i,c,f,m,o,v,r,a=T(Object.keys(e[0][0]).slice(1)),h=[];for(let u=0;u<a.length;u+=1)h[u]=ue(ae(e,a,u));let k=T(e[0]),_=[];for(let u=0;u<k.length;u+=1)_[u]=de(ce(e,k,u));return{c(){t=y("div"),n=y("table"),l=y("thead"),s=y("tr"),i=y("th"),c=y("input"),f=S();for(let u=0;u<h.length;u+=1)h[u].c();m=S(),o=y("tbody");for(let u=0;u<_.length;u+=1)_[u].c();$(c,"type","checkbox"),$(c,"id",ye),$(i,"class","svelte-5f7ih4"),$(n,"class","table is-hoverable is-striped has-background-white-ter"),$(t,"class","svelte-5f7ih4")},m(u,p){N(u,t,p),b(t,n),b(n,l),b(l,s),b(s,i),b(i,c),b(s,f);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(s,null);b(n,m),b(n,o);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(o,null);v||(r=M(c,"change",e[4]),v=!0)},p(u,[p]){if(p&33){a=T(Object.keys(u[0][0]).slice(1));let d;for(d=0;d<a.length;d+=1){const g=ae(u,a,d);h[d]?h[d].p(g,p):(h[d]=ue(g),h[d].c(),h[d].m(s,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=a.length}if(p&15){k=T(u[0]);let d;for(d=0;d<k.length;d+=1){const g=ce(u,k,d);_[d]?_[d].p(g,p):(_[d]=de(g),_[d].c(),_[d].m(o,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=k.length}},i:w,o:w,d(u){u&&E(t),X(h,u),X(_,u),v=!1,r()}}}const Ue="has-background-warning-light",ye="tablegen-all";function Ve(e,t,n){let{table_content:l=[]}=t,{href:s="/item/"}=t,{checkbox_name:i="id"}=t;const c=new Set;function f(r){let a=r.currentTarget;m(a)}const m=r=>{r.checked?(c.add(r.value),F.update(a=>!0),r.parentNode.parentNode.className=Ue):(document.querySelector(`#${ye}`).checked=!1,c.delete(r.value),c.size==0&&F.update(a=>!1),r.parentNode.parentNode.className="")},o=r=>{let a=r.currentTarget,h=document.getElementsByName(i);if(a.checked)for(let k of h)k.checked=!0,m(k);else for(let k of h)k.checked=!1,m(k)},v=r=>{const a={name:"Наименование",address:"Адрес",inn:"ИНН",kpp:"КПП",ogrn:"ОГРН",bank:"Банк",bik:"БИК",pay_acount:"Номер счёта",kor_acount:"Корр. счёт",phone:"Телефон",number:"Номер",data:"Дата",city:"Город",truck:"Номер машины",spec_notes:"Особые отметки",destination_address:"Адрес назначения",text:"Условия договора",sender:"Отправитель",receiver:"Получатель",payer:"Плательщик"};return r=a[r]?a[r]:r,r};return e.$$set=r=>{"table_content"in r&&n(0,l=r.table_content),"href"in r&&n(1,s=r.href),"checkbox_name"in r&&n(2,i=r.checkbox_name)},[l,s,i,f,o,v]}class Xe extends q{constructor(t){super(),P(this,t,Ve,Ke,A,{table_content:0,href:1,checkbox_name:2})}}function Ge(e){let t,n,l,s,i,c,f,m;function o(r){e[4](r)}let v={url:e[1]};return e[0]!==void 0&&(v.disabled=e[0]),c=new Je({props:v}),z.push(()=>ve(c,"disabled",o)),c.$on("notification",e[5]),c.$on("deleteitem",e[3]),{c(){t=y("h4"),t.textContent="Список документов.",n=S(),l=y("form"),s=y("div"),i=S(),ne(c.$$.fragment),$(t,"class","title is-4 pl-4 pt-5"),$(s,"id",e[2])},m(r,a){N(r,t,a),N(r,n,a),N(r,l,a),b(l,s),b(l,i),J(c,l,null),m=!0},p(r,[a]){const h={};!f&&a&1&&(f=!0,h.disabled=r[0],ge(()=>f=!1)),c.$set(h)},i(r){m||(R(c.$$.fragment,r),m=!0)},o(r){te(c.$$.fragment,r),m=!1},d(r){r&&(E(t),E(n),E(l)),K(c)}}}const Qe="/document/";function he(e){let t=JSON.parse(JSON.stringify(e,["id","number","data","city","truck","destination_address"]));for(let n=0;n<t.length;n++)t[n].sender=e[n].sender.name,t[n].receiver=e[n].receiver.name,t[n].payer=e[n].payer.name;return t}function We(e,t){return e.id<t.id?1:e.id>t.id?-1:0}function Ye(e,t,n){let l=!0;const s="https://"+document.domain+app.dataset.api;let i,c=[];const f="tablegen_"+Math.round(Math.random()*1e4),m=async()=>{c=await fetch(s).then(r=>r.json()),i==null||i.$destroy(),i=new Xe({target:document.getElementById(f),props:{table_content:he(c).sort(We),href:Qe,checkbox_name:"id"}}),he(c)};Se(m),document.querySelector("#navbar-item-documents").classList.add("is-active");function o(r){l=r,n(0,l)}function v(r){xe.call(this,e,r)}return[l,s,f,m,o,v]}class Ze extends q{constructor(t){super(),P(this,t,Ye,Ge,A,{})}}function et(e){let t,n;return t=new Ze({}),{c(){ne(t.$$.fragment)},m(l,s){J(t,l,s),n=!0},p:w,i(l){n||(R(t.$$.fragment,l),n=!0)},o(l){te(t.$$.fragment,l),n=!1},d(l){K(t,l)}}}class tt extends q{constructor(t){super(),P(this,t,null,et,A,{})}}new tt({target:document.getElementById("app")});
